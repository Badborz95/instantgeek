(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Xp(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const bt={},Sa=[],Ys=()=>{},vS=()=>!1,Jh=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Jp=t=>t.startsWith("onUpdate:"),fn=Object.assign,Zp=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},yS=Object.prototype.hasOwnProperty,dt=(t,e)=>yS.call(t,e),Pe=Array.isArray,Ca=t=>Nc(t)==="[object Map]",Zh=t=>Nc(t)==="[object Set]",C_=t=>Nc(t)==="[object Date]",Be=t=>typeof t=="function",qt=t=>typeof t=="string",ni=t=>typeof t=="symbol",Tt=t=>t!==null&&typeof t=="object",GE=t=>(Tt(t)||Be(t))&&Be(t.then)&&Be(t.catch),QE=Object.prototype.toString,Nc=t=>QE.call(t),ES=t=>Nc(t).slice(8,-1),YE=t=>Nc(t)==="[object Object]",em=t=>qt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Jl=Xp(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ed=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},bS=/-(\w)/g,bs=ed(t=>t.replace(bS,(e,n)=>n?n.toUpperCase():"")),wS=/\B([A-Z])/g,$o=ed(t=>t.replace(wS,"-$1").toLowerCase()),td=ed(t=>t.charAt(0).toUpperCase()+t.slice(1)),pf=ed(t=>t?`on${td(t)}`:""),yr=(t,e)=>!Object.is(t,e),Yu=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},XE=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},mh=t=>{const e=parseFloat(t);return isNaN(e)?t:e},TS=t=>{const e=qt(t)?Number(t):NaN;return isNaN(e)?t:e};let R_;const nd=()=>R_||(R_=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Co(t){if(Pe(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],i=qt(s)?CS(s):Co(s);if(i)for(const r in i)e[r]=i[r]}return e}else if(qt(t)||Tt(t))return t}const AS=/;(?![^(]*\))/g,IS=/:([^]+)/,SS=/\/\*[^]*?\*\//g;function CS(t){const e={};return t.replace(SS,"").split(AS).forEach(n=>{if(n){const s=n.split(IS);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function en(t){let e="";if(qt(t))e=t;else if(Pe(t))for(let n=0;n<t.length;n++){const s=en(t[n]);s&&(e+=s+" ")}else if(Tt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const RS="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",PS=Xp(RS);function JE(t){return!!t||t===""}function OS(t,e){if(t.length!==e.length)return!1;let n=!0;for(let s=0;n&&s<t.length;s++)n=sd(t[s],e[s]);return n}function sd(t,e){if(t===e)return!0;let n=C_(t),s=C_(e);if(n||s)return n&&s?t.getTime()===e.getTime():!1;if(n=ni(t),s=ni(e),n||s)return t===e;if(n=Pe(t),s=Pe(e),n||s)return n&&s?OS(t,e):!1;if(n=Tt(t),s=Tt(e),n||s){if(!n||!s)return!1;const i=Object.keys(t).length,r=Object.keys(e).length;if(i!==r)return!1;for(const o in t){const l=t.hasOwnProperty(o),c=e.hasOwnProperty(o);if(l&&!c||!l&&c||!sd(t[o],e[o]))return!1}}return String(t)===String(e)}function kS(t,e){return t.findIndex(n=>sd(n,e))}const ZE=t=>!!(t&&t.__v_isRef===!0),ae=t=>qt(t)?t:t==null?"":Pe(t)||Tt(t)&&(t.toString===QE||!Be(t.toString))?ZE(t)?ae(t.value):JSON.stringify(t,eb,2):String(t),eb=(t,e)=>ZE(e)?eb(t,e.value):Ca(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,i],r)=>(n[mf(s,r)+" =>"]=i,n),{})}:Zh(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>mf(n))}:ni(e)?mf(e):Tt(e)&&!Pe(e)&&!YE(e)?String(e):e,mf=(t,e="")=>{var n;return ni(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ln;class tb{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ln,!e&&Ln&&(this.index=(Ln.scopes||(Ln.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Ln;try{return Ln=this,e()}finally{Ln=n}}}on(){Ln=this}off(){Ln=this.parent}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function nb(t){return new tb(t)}function sb(){return Ln}function xS(t,e=!1){Ln&&Ln.cleanups.push(t)}let St;const gf=new WeakSet;class ib{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ln&&Ln.active&&Ln.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,gf.has(this)&&(gf.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ob(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,P_(this),ab(this);const e=St,n=ks;St=this,ks=!0;try{return this.fn()}finally{lb(this),St=e,ks=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)sm(e);this.deps=this.depsTail=void 0,P_(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?gf.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){tp(this)&&this.run()}get dirty(){return tp(this)}}let rb=0,Zl,ec;function ob(t,e=!1){if(t.flags|=8,e){t.next=ec,ec=t;return}t.next=Zl,Zl=t}function tm(){rb++}function nm(){if(--rb>0)return;if(ec){let e=ec;for(ec=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Zl;){let e=Zl;for(Zl=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function ab(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function lb(t){let e,n=t.depsTail,s=n;for(;s;){const i=s.prevDep;s.version===-1?(s===n&&(n=i),sm(s),DS(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=i}t.deps=e,t.depsTail=n}function tp(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(cb(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function cb(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===mc))return;t.globalVersion=mc;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!tp(t)){t.flags&=-3;return}const n=St,s=ks;St=t,ks=!0;try{ab(t);const i=t.fn(t._value);(e.version===0||yr(i,t._value))&&(t._value=i,e.version++)}catch(i){throw e.version++,i}finally{St=n,ks=s,lb(t),t.flags&=-3}}function sm(t,e=!1){const{dep:n,prevSub:s,nextSub:i}=t;if(s&&(s.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)sm(r,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function DS(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let ks=!0;const ub=[];function Mr(){ub.push(ks),ks=!1}function $r(){const t=ub.pop();ks=t===void 0?!0:t}function P_(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=St;St=void 0;try{e()}finally{St=n}}}let mc=0;class NS{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class im{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!St||!ks||St===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==St)n=this.activeLink=new NS(St,this),St.deps?(n.prevDep=St.depsTail,St.depsTail.nextDep=n,St.depsTail=n):St.deps=St.depsTail=n,hb(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=St.depsTail,n.nextDep=void 0,St.depsTail.nextDep=n,St.depsTail=n,St.deps===n&&(St.deps=s)}return n}trigger(e){this.version++,mc++,this.notify(e)}notify(e){tm();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{nm()}}}function hb(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)hb(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const gh=new WeakMap,To=Symbol(""),np=Symbol(""),gc=Symbol("");function wn(t,e,n){if(ks&&St){let s=gh.get(t);s||gh.set(t,s=new Map);let i=s.get(n);i||(s.set(n,i=new im),i.map=s,i.key=n),i.track()}}function wi(t,e,n,s,i,r){const o=gh.get(t);if(!o){mc++;return}const l=c=>{c&&c.trigger()};if(tm(),e==="clear")o.forEach(l);else{const c=Pe(t),d=c&&em(n);if(c&&n==="length"){const h=Number(s);o.forEach((p,_)=>{(_==="length"||_===gc||!ni(_)&&_>=h)&&l(p)})}else switch((n!==void 0||o.has(void 0))&&l(o.get(n)),d&&l(o.get(gc)),e){case"add":c?d&&l(o.get("length")):(l(o.get(To)),Ca(t)&&l(o.get(np)));break;case"delete":c||(l(o.get(To)),Ca(t)&&l(o.get(np)));break;case"set":Ca(t)&&l(o.get(To));break}}nm()}function LS(t,e){const n=gh.get(t);return n&&n.get(e)}function da(t){const e=rt(t);return e===t?e:(wn(e,"iterate",gc),_s(t)?e:e.map(Tn))}function id(t){return wn(t=rt(t),"iterate",gc),t}const VS={__proto__:null,[Symbol.iterator](){return _f(this,Symbol.iterator,Tn)},concat(...t){return da(this).concat(...t.map(e=>Pe(e)?da(e):e))},entries(){return _f(this,"entries",t=>(t[1]=Tn(t[1]),t))},every(t,e){return vi(this,"every",t,e,void 0,arguments)},filter(t,e){return vi(this,"filter",t,e,n=>n.map(Tn),arguments)},find(t,e){return vi(this,"find",t,e,Tn,arguments)},findIndex(t,e){return vi(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return vi(this,"findLast",t,e,Tn,arguments)},findLastIndex(t,e){return vi(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return vi(this,"forEach",t,e,void 0,arguments)},includes(...t){return vf(this,"includes",t)},indexOf(...t){return vf(this,"indexOf",t)},join(t){return da(this).join(t)},lastIndexOf(...t){return vf(this,"lastIndexOf",t)},map(t,e){return vi(this,"map",t,e,void 0,arguments)},pop(){return Ul(this,"pop")},push(...t){return Ul(this,"push",t)},reduce(t,...e){return O_(this,"reduce",t,e)},reduceRight(t,...e){return O_(this,"reduceRight",t,e)},shift(){return Ul(this,"shift")},some(t,e){return vi(this,"some",t,e,void 0,arguments)},splice(...t){return Ul(this,"splice",t)},toReversed(){return da(this).toReversed()},toSorted(t){return da(this).toSorted(t)},toSpliced(...t){return da(this).toSpliced(...t)},unshift(...t){return Ul(this,"unshift",t)},values(){return _f(this,"values",Tn)}};function _f(t,e,n){const s=id(t),i=s[e]();return s!==t&&!_s(t)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.value&&(r.value=n(r.value)),r}),i}const MS=Array.prototype;function vi(t,e,n,s,i,r){const o=id(t),l=o!==t&&!_s(t),c=o[e];if(c!==MS[e]){const p=c.apply(t,r);return l?Tn(p):p}let d=n;o!==t&&(l?d=function(p,_){return n.call(this,Tn(p),_,t)}:n.length>2&&(d=function(p,_){return n.call(this,p,_,t)}));const h=c.call(o,d,s);return l&&i?i(h):h}function O_(t,e,n,s){const i=id(t);let r=n;return i!==t&&(_s(t)?n.length>3&&(r=function(o,l,c){return n.call(this,o,l,c,t)}):r=function(o,l,c){return n.call(this,o,Tn(l),c,t)}),i[e](r,...s)}function vf(t,e,n){const s=rt(t);wn(s,"iterate",gc);const i=s[e](...n);return(i===-1||i===!1)&&am(n[0])?(n[0]=rt(n[0]),s[e](...n)):i}function Ul(t,e,n=[]){Mr(),tm();const s=rt(t)[e].apply(t,n);return nm(),$r(),s}const $S=Xp("__proto__,__v_isRef,__isVue"),db=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(ni));function FS(t){ni(t)||(t=String(t));const e=rt(this);return wn(e,"has",t),e.hasOwnProperty(t)}class fb{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return r;if(n==="__v_raw")return s===(i?r?QS:_b:r?gb:mb).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=Pe(e);if(!i){let c;if(o&&(c=VS[n]))return c;if(n==="hasOwnProperty")return FS}const l=Reflect.get(e,n,Dt(e)?e:s);return(ni(n)?db.has(n):$S(n))||(i||wn(e,"get",n),r)?l:Dt(l)?o&&em(n)?l:l.value:Tt(l)?i?yb(l):Lc(l):l}}class pb extends fb{constructor(e=!1){super(!1,e)}set(e,n,s,i){let r=e[n];if(!this._isShallow){const c=Ro(r);if(!_s(s)&&!Ro(s)&&(r=rt(r),s=rt(s)),!Pe(e)&&Dt(r)&&!Dt(s))return c?!1:(r.value=s,!0)}const o=Pe(e)&&em(n)?Number(n)<e.length:dt(e,n),l=Reflect.set(e,n,s,Dt(e)?e:i);return e===rt(i)&&(o?yr(s,r)&&wi(e,"set",n,s):wi(e,"add",n,s)),l}deleteProperty(e,n){const s=dt(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&s&&wi(e,"delete",n,void 0),i}has(e,n){const s=Reflect.has(e,n);return(!ni(n)||!db.has(n))&&wn(e,"has",n),s}ownKeys(e){return wn(e,"iterate",Pe(e)?"length":To),Reflect.ownKeys(e)}}class US extends fb{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const jS=new pb,BS=new US,HS=new pb(!0);const sp=t=>t,xu=t=>Reflect.getPrototypeOf(t);function qS(t,e,n){return function(...s){const i=this.__v_raw,r=rt(i),o=Ca(r),l=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,d=i[t](...s),h=n?sp:e?ip:Tn;return!e&&wn(r,"iterate",c?np:To),{next(){const{value:p,done:_}=d.next();return _?{value:p,done:_}:{value:l?[h(p[0]),h(p[1])]:h(p),done:_}},[Symbol.iterator](){return this}}}}function Du(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function WS(t,e){const n={get(i){const r=this.__v_raw,o=rt(r),l=rt(i);t||(yr(i,l)&&wn(o,"get",i),wn(o,"get",l));const{has:c}=xu(o),d=e?sp:t?ip:Tn;if(c.call(o,i))return d(r.get(i));if(c.call(o,l))return d(r.get(l));r!==o&&r.get(i)},get size(){const i=this.__v_raw;return!t&&wn(rt(i),"iterate",To),Reflect.get(i,"size",i)},has(i){const r=this.__v_raw,o=rt(r),l=rt(i);return t||(yr(i,l)&&wn(o,"has",i),wn(o,"has",l)),i===l?r.has(i):r.has(i)||r.has(l)},forEach(i,r){const o=this,l=o.__v_raw,c=rt(l),d=e?sp:t?ip:Tn;return!t&&wn(c,"iterate",To),l.forEach((h,p)=>i.call(r,d(h),d(p),o))}};return fn(n,t?{add:Du("add"),set:Du("set"),delete:Du("delete"),clear:Du("clear")}:{add(i){!e&&!_s(i)&&!Ro(i)&&(i=rt(i));const r=rt(this);return xu(r).has.call(r,i)||(r.add(i),wi(r,"add",i,i)),this},set(i,r){!e&&!_s(r)&&!Ro(r)&&(r=rt(r));const o=rt(this),{has:l,get:c}=xu(o);let d=l.call(o,i);d||(i=rt(i),d=l.call(o,i));const h=c.call(o,i);return o.set(i,r),d?yr(r,h)&&wi(o,"set",i,r):wi(o,"add",i,r),this},delete(i){const r=rt(this),{has:o,get:l}=xu(r);let c=o.call(r,i);c||(i=rt(i),c=o.call(r,i)),l&&l.call(r,i);const d=r.delete(i);return c&&wi(r,"delete",i,void 0),d},clear(){const i=rt(this),r=i.size!==0,o=i.clear();return r&&wi(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=qS(i,t,e)}),n}function rm(t,e){const n=WS(t,e);return(s,i,r)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?s:Reflect.get(dt(n,i)&&i in s?n:s,i,r)}const zS={get:rm(!1,!1)},KS={get:rm(!1,!0)},GS={get:rm(!0,!1)};const mb=new WeakMap,gb=new WeakMap,_b=new WeakMap,QS=new WeakMap;function YS(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function XS(t){return t.__v_skip||!Object.isExtensible(t)?0:YS(ES(t))}function Lc(t){return Ro(t)?t:om(t,!1,jS,zS,mb)}function vb(t){return om(t,!1,HS,KS,gb)}function yb(t){return om(t,!0,BS,GS,_b)}function om(t,e,n,s,i){if(!Tt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=i.get(t);if(r)return r;const o=XS(t);if(o===0)return t;const l=new Proxy(t,o===2?s:n);return i.set(t,l),l}function Er(t){return Ro(t)?Er(t.__v_raw):!!(t&&t.__v_isReactive)}function Ro(t){return!!(t&&t.__v_isReadonly)}function _s(t){return!!(t&&t.__v_isShallow)}function am(t){return t?!!t.__v_raw:!1}function rt(t){const e=t&&t.__v_raw;return e?rt(e):t}function lm(t){return!dt(t,"__v_skip")&&Object.isExtensible(t)&&XE(t,"__v_skip",!0),t}const Tn=t=>Tt(t)?Lc(t):t,ip=t=>Tt(t)?yb(t):t;function Dt(t){return t?t.__v_isRef===!0:!1}function Ae(t){return Eb(t,!1)}function JS(t){return Eb(t,!0)}function Eb(t,e){return Dt(t)?t:new ZS(t,e)}class ZS{constructor(e,n){this.dep=new im,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:rt(e),this._value=n?e:Tn(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||_s(e)||Ro(e);e=s?e:rt(e),yr(e,n)&&(this._rawValue=e,this._value=s?e:Tn(e),this.dep.trigger())}}function Ne(t){return Dt(t)?t.value:t}const eC={get:(t,e,n)=>e==="__v_raw"?t:Ne(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const i=t[e];return Dt(i)&&!Dt(n)?(i.value=n,!0):Reflect.set(t,e,n,s)}};function bb(t){return Er(t)?t:new Proxy(t,eC)}function tC(t){const e=Pe(t)?new Array(t.length):{};for(const n in t)e[n]=sC(t,n);return e}class nC{constructor(e,n,s){this._object=e,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return LS(rt(this._object),this._key)}}function sC(t,e,n){const s=t[e];return Dt(s)?s:new nC(t,e,n)}class iC{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new im(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=mc-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&St!==this)return ob(this,!0),!0}get value(){const e=this.dep.track();return cb(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function rC(t,e,n=!1){let s,i;return Be(t)?s=t:(s=t.get,i=t.set),new iC(s,i,n)}const Nu={},_h=new WeakMap;let mo;function oC(t,e=!1,n=mo){if(n){let s=_h.get(n);s||_h.set(n,s=[]),s.push(t)}}function aC(t,e,n=bt){const{immediate:s,deep:i,once:r,scheduler:o,augmentJob:l,call:c}=n,d=B=>i?B:_s(B)||i===!1||i===0?Ti(B,1):Ti(B);let h,p,_,E,C=!1,D=!1;if(Dt(t)?(p=()=>t.value,C=_s(t)):Er(t)?(p=()=>d(t),C=!0):Pe(t)?(D=!0,C=t.some(B=>Er(B)||_s(B)),p=()=>t.map(B=>{if(Dt(B))return B.value;if(Er(B))return d(B);if(Be(B))return c?c(B,2):B()})):Be(t)?e?p=c?()=>c(t,2):t:p=()=>{if(_){Mr();try{_()}finally{$r()}}const B=mo;mo=h;try{return c?c(t,3,[E]):t(E)}finally{mo=B}}:p=Ys,e&&i){const B=p,se=i===!0?1/0:i;p=()=>Ti(B(),se)}const N=sb(),j=()=>{h.stop(),N&&N.active&&Zp(N.effects,h)};if(r&&e){const B=e;e=(...se)=>{B(...se),j()}}let $=D?new Array(t.length).fill(Nu):Nu;const U=B=>{if(!(!(h.flags&1)||!h.dirty&&!B))if(e){const se=h.run();if(i||C||(D?se.some((re,x)=>yr(re,$[x])):yr(se,$))){_&&_();const re=mo;mo=h;try{const x=[se,$===Nu?void 0:D&&$[0]===Nu?[]:$,E];c?c(e,3,x):e(...x),$=se}finally{mo=re}}}else h.run()};return l&&l(U),h=new ib(p),h.scheduler=o?()=>o(U,!1):U,E=B=>oC(B,!1,h),_=h.onStop=()=>{const B=_h.get(h);if(B){if(c)c(B,4);else for(const se of B)se();_h.delete(h)}},e?s?U(!0):$=h.run():o?o(U.bind(null,!0),!0):h.run(),j.pause=h.pause.bind(h),j.resume=h.resume.bind(h),j.stop=j,j}function Ti(t,e=1/0,n){if(e<=0||!Tt(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Dt(t))Ti(t.value,e,n);else if(Pe(t))for(let s=0;s<t.length;s++)Ti(t[s],e,n);else if(Zh(t)||Ca(t))t.forEach(s=>{Ti(s,e,n)});else if(YE(t)){for(const s in t)Ti(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&Ti(t[s],e,n)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Vc(t,e,n,s){try{return s?t(...s):t()}catch(i){rd(i,e,n)}}function Ns(t,e,n,s){if(Be(t)){const i=Vc(t,e,n,s);return i&&GE(i)&&i.catch(r=>{rd(r,e,n)}),i}if(Pe(t)){const i=[];for(let r=0;r<t.length;r++)i.push(Ns(t[r],e,n,s));return i}}function rd(t,e,n,s=!0){const i=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||bt;if(e){let l=e.parent;const c=e.proxy,d=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const h=l.ec;if(h){for(let p=0;p<h.length;p++)if(h[p](t,c,d)===!1)return}l=l.parent}if(r){Mr(),Vc(r,null,10,[t,c,d]),$r();return}}lC(t,n,i,s,o)}function lC(t,e,n,s=!0,i=!1){if(i)throw t;console.error(t)}const Vn=[];let Ks=-1;const Ra=[];let ur=null,ga=0;const wb=Promise.resolve();let vh=null;function Ao(t){const e=vh||wb;return t?e.then(this?t.bind(this):t):e}function cC(t){let e=Ks+1,n=Vn.length;for(;e<n;){const s=e+n>>>1,i=Vn[s],r=_c(i);r<t||r===t&&i.flags&2?e=s+1:n=s}return e}function cm(t){if(!(t.flags&1)){const e=_c(t),n=Vn[Vn.length-1];!n||!(t.flags&2)&&e>=_c(n)?Vn.push(t):Vn.splice(cC(e),0,t),t.flags|=1,Tb()}}function Tb(){vh||(vh=wb.then(Ib))}function uC(t){Pe(t)?Ra.push(...t):ur&&t.id===-1?ur.splice(ga+1,0,t):t.flags&1||(Ra.push(t),t.flags|=1),Tb()}function k_(t,e,n=Ks+1){for(;n<Vn.length;n++){const s=Vn[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;Vn.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Ab(t){if(Ra.length){const e=[...new Set(Ra)].sort((n,s)=>_c(n)-_c(s));if(Ra.length=0,ur){ur.push(...e);return}for(ur=e,ga=0;ga<ur.length;ga++){const n=ur[ga];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}ur=null,ga=0}}const _c=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Ib(t){try{for(Ks=0;Ks<Vn.length;Ks++){const e=Vn[Ks];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Vc(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Ks<Vn.length;Ks++){const e=Vn[Ks];e&&(e.flags&=-2)}Ks=-1,Vn.length=0,Ab(),vh=null,(Vn.length||Ra.length)&&Ib()}}let Mn=null,Sb=null;function yh(t){const e=Mn;return Mn=t,Sb=t&&t.type.__scopeId||null,e}function Je(t,e=Mn,n){if(!e||t._n)return t;const s=(...i)=>{s._d&&B_(-1);const r=yh(e);let o;try{o=t(...i)}finally{yh(r),s._d&&B_(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function yt(t,e){if(Mn===null)return t;const n=hd(Mn),s=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[r,o,l,c=bt]=e[i];r&&(Be(r)&&(r={mounted:r,updated:r}),r.deep&&Ti(o),s.push({dir:r,instance:n,value:o,oldValue:void 0,arg:l,modifiers:c}))}return t}function uo(t,e,n,s){const i=t.dirs,r=e&&e.dirs;for(let o=0;o<i.length;o++){const l=i[o];r&&(l.oldValue=r[o].value);let c=l.dir[s];c&&(Mr(),Ns(c,n,8,[t.el,l,t,e]),$r())}}const hC=Symbol("_vte"),Cb=t=>t.__isTeleport,hr=Symbol("_leaveCb"),Lu=Symbol("_enterCb");function dC(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Un(()=>{t.isMounted=!0}),Vb(()=>{t.isUnmounting=!0}),t}const gs=[Function,Array],Rb={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:gs,onEnter:gs,onAfterEnter:gs,onEnterCancelled:gs,onBeforeLeave:gs,onLeave:gs,onAfterLeave:gs,onLeaveCancelled:gs,onBeforeAppear:gs,onAppear:gs,onAfterAppear:gs,onAppearCancelled:gs},Pb=t=>{const e=t.subTree;return e.component?Pb(e.component):e},fC={name:"BaseTransition",props:Rb,setup(t,{slots:e}){const n=h1(),s=dC();return()=>{const i=e.default&&xb(e.default(),!0);if(!i||!i.length)return;const r=Ob(i),o=rt(t),{mode:l}=o;if(s.isLeaving)return yf(r);const c=x_(r);if(!c)return yf(r);let d=rp(c,o,s,n,p=>d=p);c.type!==zn&&vc(c,d);let h=n.subTree&&x_(n.subTree);if(h&&h.type!==zn&&!_o(c,h)&&Pb(n).type!==zn){let p=rp(h,o,s,n);if(vc(h,p),l==="out-in"&&c.type!==zn)return s.isLeaving=!0,p.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete p.afterLeave,h=void 0},yf(r);l==="in-out"&&c.type!==zn?p.delayLeave=(_,E,C)=>{const D=kb(s,h);D[String(h.key)]=h,_[hr]=()=>{E(),_[hr]=void 0,delete d.delayedLeave,h=void 0},d.delayedLeave=()=>{C(),delete d.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return r}}};function Ob(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==zn){e=n;break}}return e}const pC=fC;function kb(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function rp(t,e,n,s,i){const{appear:r,mode:o,persisted:l=!1,onBeforeEnter:c,onEnter:d,onAfterEnter:h,onEnterCancelled:p,onBeforeLeave:_,onLeave:E,onAfterLeave:C,onLeaveCancelled:D,onBeforeAppear:N,onAppear:j,onAfterAppear:$,onAppearCancelled:U}=e,B=String(t.key),se=kb(n,t),re=(T,R)=>{T&&Ns(T,s,9,R)},x=(T,R)=>{const O=R[1];re(T,R),Pe(T)?T.every(A=>A.length<=1)&&O():T.length<=1&&O()},I={mode:o,persisted:l,beforeEnter(T){let R=c;if(!n.isMounted)if(r)R=N||c;else return;T[hr]&&T[hr](!0);const O=se[B];O&&_o(t,O)&&O.el[hr]&&O.el[hr](),re(R,[T])},enter(T){let R=d,O=h,A=p;if(!n.isMounted)if(r)R=j||d,O=$||h,A=U||p;else return;let S=!1;const Le=T[Lu]=ot=>{S||(S=!0,ot?re(A,[T]):re(O,[T]),I.delayedLeave&&I.delayedLeave(),T[Lu]=void 0)};R?x(R,[T,Le]):Le()},leave(T,R){const O=String(t.key);if(T[Lu]&&T[Lu](!0),n.isUnmounting)return R();re(_,[T]);let A=!1;const S=T[hr]=Le=>{A||(A=!0,R(),Le?re(D,[T]):re(C,[T]),T[hr]=void 0,se[O]===t&&delete se[O])};se[O]=t,E?x(E,[T,S]):S()},clone(T){const R=rp(T,e,n,s,i);return i&&i(R),R}};return I}function yf(t){if(od(t))return t=Sr(t),t.children=null,t}function x_(t){if(!od(t))return Cb(t.type)&&t.children?Ob(t.children):t;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Be(n.default))return n.default()}}function vc(t,e){t.shapeFlag&6&&t.component?(t.transition=e,vc(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function xb(t,e=!1,n){let s=[],i=0;for(let r=0;r<t.length;r++){let o=t[r];const l=n==null?o.key:String(n)+String(o.key!=null?o.key:r);o.type===xe?(o.patchFlag&128&&i++,s=s.concat(xb(o.children,e,l))):(e||o.type!==zn)&&s.push(l!=null?Sr(o,{key:l}):o)}if(i>1)for(let r=0;r<s.length;r++)s[r].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function Db(t,e){return Be(t)?fn({name:t.name},e,{setup:t}):t}function Nb(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Eh(t,e,n,s,i=!1){if(Pe(t)){t.forEach((C,D)=>Eh(C,e&&(Pe(e)?e[D]:e),n,s,i));return}if(tc(s)&&!i){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Eh(t,e,n,s.component.subTree);return}const r=s.shapeFlag&4?hd(s.component):s.el,o=i?null:r,{i:l,r:c}=t,d=e&&e.r,h=l.refs===bt?l.refs={}:l.refs,p=l.setupState,_=rt(p),E=p===bt?()=>!1:C=>dt(_,C);if(d!=null&&d!==c&&(qt(d)?(h[d]=null,E(d)&&(p[d]=null)):Dt(d)&&(d.value=null)),Be(c))Vc(c,l,12,[o,h]);else{const C=qt(c),D=Dt(c);if(C||D){const N=()=>{if(t.f){const j=C?E(c)?p[c]:h[c]:c.value;i?Pe(j)&&Zp(j,r):Pe(j)?j.includes(r)||j.push(r):C?(h[c]=[r],E(c)&&(p[c]=h[c])):(c.value=[r],t.k&&(h[t.k]=c.value))}else C?(h[c]=o,E(c)&&(p[c]=o)):D&&(c.value=o,t.k&&(h[t.k]=o))};o?(N.id=-1,ts(N,n)):N()}}}nd().requestIdleCallback;nd().cancelIdleCallback;const tc=t=>!!t.type.__asyncLoader,od=t=>t.type.__isKeepAlive;function mC(t,e){Lb(t,"a",e)}function gC(t,e){Lb(t,"da",e)}function Lb(t,e,n=dn){const s=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(ad(e,s,n),n){let i=n.parent;for(;i&&i.parent;)od(i.parent.vnode)&&_C(s,e,n,i),i=i.parent}}function _C(t,e,n,s){const i=ad(e,t,s,!0);ld(()=>{Zp(s[e],i)},n)}function ad(t,e,n=dn,s=!1){if(n){const i=n[t]||(n[t]=[]),r=e.__weh||(e.__weh=(...o)=>{Mr();const l=Mc(n),c=Ns(e,n,t,o);return l(),$r(),c});return s?i.unshift(r):i.push(r),r}}const Fi=t=>(e,n=dn)=>{(!Ec||t==="sp")&&ad(t,(...s)=>e(...s),n)},vC=Fi("bm"),Un=Fi("m"),yC=Fi("bu"),EC=Fi("u"),Vb=Fi("bum"),ld=Fi("um"),bC=Fi("sp"),wC=Fi("rtg"),TC=Fi("rtc");function AC(t,e=dn){ad("ec",t,e)}const IC="components";function jn(t,e){return CC(IC,t,!0,e)||t}const SC=Symbol.for("v-ndc");function CC(t,e,n=!0,s=!1){const i=Mn||dn;if(i){const r=i.type;{const l=g1(r,!1);if(l&&(l===e||l===bs(e)||l===td(bs(e))))return r}const o=D_(i[t]||r[t],e)||D_(i.appContext[t],e);return!o&&s?r:o}}function D_(t,e){return t&&(t[e]||t[bs(e)]||t[td(bs(e))])}function wt(t,e,n,s){let i;const r=n,o=Pe(t);if(o||qt(t)){const l=o&&Er(t);let c=!1;l&&(c=!_s(t),t=id(t)),i=new Array(t.length);for(let d=0,h=t.length;d<h;d++)i[d]=e(c?Tn(t[d]):t[d],d,void 0,r)}else if(typeof t=="number"){i=new Array(t);for(let l=0;l<t;l++)i[l]=e(l+1,l,void 0,r)}else if(Tt(t))if(t[Symbol.iterator])i=Array.from(t,(l,c)=>e(l,c,void 0,r));else{const l=Object.keys(t);i=new Array(l.length);for(let c=0,d=l.length;c<d;c++){const h=l[c];i[c]=e(t[h],h,c,r)}}else i=[];return i}const op=t=>t?nw(t)?hd(t):op(t.parent):null,nc=fn(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>op(t.parent),$root:t=>op(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>$b(t),$forceUpdate:t=>t.f||(t.f=()=>{cm(t.update)}),$nextTick:t=>t.n||(t.n=Ao.bind(t.proxy)),$watch:t=>YC.bind(t)}),Ef=(t,e)=>t!==bt&&!t.__isScriptSetup&&dt(t,e),RC={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:i,props:r,accessCache:o,type:l,appContext:c}=t;let d;if(e[0]!=="$"){const E=o[e];if(E!==void 0)switch(E){case 1:return s[e];case 2:return i[e];case 4:return n[e];case 3:return r[e]}else{if(Ef(s,e))return o[e]=1,s[e];if(i!==bt&&dt(i,e))return o[e]=2,i[e];if((d=t.propsOptions[0])&&dt(d,e))return o[e]=3,r[e];if(n!==bt&&dt(n,e))return o[e]=4,n[e];ap&&(o[e]=0)}}const h=nc[e];let p,_;if(h)return e==="$attrs"&&wn(t.attrs,"get",""),h(t);if((p=l.__cssModules)&&(p=p[e]))return p;if(n!==bt&&dt(n,e))return o[e]=4,n[e];if(_=c.config.globalProperties,dt(_,e))return _[e]},set({_:t},e,n){const{data:s,setupState:i,ctx:r}=t;return Ef(i,e)?(i[e]=n,!0):s!==bt&&dt(s,e)?(s[e]=n,!0):dt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:i,propsOptions:r}},o){let l;return!!n[o]||t!==bt&&dt(t,o)||Ef(e,o)||(l=r[0])&&dt(l,o)||dt(s,o)||dt(nc,o)||dt(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:dt(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function N_(t){return Pe(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let ap=!0;function PC(t){const e=$b(t),n=t.proxy,s=t.ctx;ap=!1,e.beforeCreate&&L_(e.beforeCreate,t,"bc");const{data:i,computed:r,methods:o,watch:l,provide:c,inject:d,created:h,beforeMount:p,mounted:_,beforeUpdate:E,updated:C,activated:D,deactivated:N,beforeDestroy:j,beforeUnmount:$,destroyed:U,unmounted:B,render:se,renderTracked:re,renderTriggered:x,errorCaptured:I,serverPrefetch:T,expose:R,inheritAttrs:O,components:A,directives:S,filters:Le}=e;if(d&&OC(d,s,null),o)for(const we in o){const qe=o[we];Be(qe)&&(s[we]=qe.bind(n))}if(i){const we=i.call(n,n);Tt(we)&&(t.data=Lc(we))}if(ap=!0,r)for(const we in r){const qe=r[we],kt=Be(qe)?qe.bind(n,n):Be(qe.get)?qe.get.bind(n,n):Ys,X=!Be(qe)&&Be(qe.set)?qe.set.bind(n):Ys,zt=Ot({get:kt,set:X});Object.defineProperty(s,we,{enumerable:!0,configurable:!0,get:()=>zt.value,set:at=>zt.value=at})}if(l)for(const we in l)Mb(l[we],s,n,we);if(c){const we=Be(c)?c.call(n):c;Reflect.ownKeys(we).forEach(qe=>{Xu(qe,we[qe])})}h&&L_(h,t,"c");function Me(we,qe){Pe(qe)?qe.forEach(kt=>we(kt.bind(n))):qe&&we(qe.bind(n))}if(Me(vC,p),Me(Un,_),Me(yC,E),Me(EC,C),Me(mC,D),Me(gC,N),Me(AC,I),Me(TC,re),Me(wC,x),Me(Vb,$),Me(ld,B),Me(bC,T),Pe(R))if(R.length){const we=t.exposed||(t.exposed={});R.forEach(qe=>{Object.defineProperty(we,qe,{get:()=>n[qe],set:kt=>n[qe]=kt})})}else t.exposed||(t.exposed={});se&&t.render===Ys&&(t.render=se),O!=null&&(t.inheritAttrs=O),A&&(t.components=A),S&&(t.directives=S),T&&Nb(t)}function OC(t,e,n=Ys){Pe(t)&&(t=lp(t));for(const s in t){const i=t[s];let r;Tt(i)?"default"in i?r=vs(i.from||s,i.default,!0):r=vs(i.from||s):r=vs(i),Dt(r)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[s]=r}}function L_(t,e,n){Ns(Pe(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function Mb(t,e,n,s){let i=s.includes(".")?Xb(n,s):()=>n[s];if(qt(t)){const r=e[t];Be(r)&&rs(i,r)}else if(Be(t))rs(i,t.bind(n));else if(Tt(t))if(Pe(t))t.forEach(r=>Mb(r,e,n,s));else{const r=Be(t.handler)?t.handler.bind(n):e[t.handler];Be(r)&&rs(i,r,t)}}function $b(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=t.appContext,l=r.get(e);let c;return l?c=l:!i.length&&!n&&!s?c=e:(c={},i.length&&i.forEach(d=>bh(c,d,o,!0)),bh(c,e,o)),Tt(e)&&r.set(e,c),c}function bh(t,e,n,s=!1){const{mixins:i,extends:r}=e;r&&bh(t,r,n,!0),i&&i.forEach(o=>bh(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const l=kC[o]||n&&n[o];t[o]=l?l(t[o],e[o]):e[o]}return t}const kC={data:V_,props:M_,emits:M_,methods:Wl,computed:Wl,beforeCreate:Nn,created:Nn,beforeMount:Nn,mounted:Nn,beforeUpdate:Nn,updated:Nn,beforeDestroy:Nn,beforeUnmount:Nn,destroyed:Nn,unmounted:Nn,activated:Nn,deactivated:Nn,errorCaptured:Nn,serverPrefetch:Nn,components:Wl,directives:Wl,watch:DC,provide:V_,inject:xC};function V_(t,e){return e?t?function(){return fn(Be(t)?t.call(this,this):t,Be(e)?e.call(this,this):e)}:e:t}function xC(t,e){return Wl(lp(t),lp(e))}function lp(t){if(Pe(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Nn(t,e){return t?[...new Set([].concat(t,e))]:e}function Wl(t,e){return t?fn(Object.create(null),t,e):e}function M_(t,e){return t?Pe(t)&&Pe(e)?[...new Set([...t,...e])]:fn(Object.create(null),N_(t),N_(e??{})):e}function DC(t,e){if(!t)return e;if(!e)return t;const n=fn(Object.create(null),t);for(const s in e)n[s]=Nn(t[s],e[s]);return n}function Fb(){return{app:null,config:{isNativeTag:vS,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let NC=0;function LC(t,e){return function(s,i=null){Be(s)||(s=fn({},s)),i!=null&&!Tt(i)&&(i=null);const r=Fb(),o=new WeakSet,l=[];let c=!1;const d=r.app={_uid:NC++,_component:s,_props:i,_container:null,_context:r,_instance:null,version:v1,get config(){return r.config},set config(h){},use(h,...p){return o.has(h)||(h&&Be(h.install)?(o.add(h),h.install(d,...p)):Be(h)&&(o.add(h),h(d,...p))),d},mixin(h){return r.mixins.includes(h)||r.mixins.push(h),d},component(h,p){return p?(r.components[h]=p,d):r.components[h]},directive(h,p){return p?(r.directives[h]=p,d):r.directives[h]},mount(h,p,_){if(!c){const E=d._ceVNode||pe(s,i);return E.appContext=r,_===!0?_="svg":_===!1&&(_=void 0),t(E,h,_),c=!0,d._container=h,h.__vue_app__=d,hd(E.component)}},onUnmount(h){l.push(h)},unmount(){c&&(Ns(l,d._instance,16),t(null,d._container),delete d._container.__vue_app__)},provide(h,p){return r.provides[h]=p,d},runWithContext(h){const p=Io;Io=d;try{return h()}finally{Io=p}}};return d}}let Io=null;function Xu(t,e){if(dn){let n=dn.provides;const s=dn.parent&&dn.parent.provides;s===n&&(n=dn.provides=Object.create(s)),n[t]=e}}function vs(t,e,n=!1){const s=dn||Mn;if(s||Io){const i=Io?Io._context.provides:s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&Be(e)?e.call(s&&s.proxy):e}}function VC(){return!!(dn||Mn||Io)}const Ub={},jb=()=>Object.create(Ub),Bb=t=>Object.getPrototypeOf(t)===Ub;function MC(t,e,n,s=!1){const i={},r=jb();t.propsDefaults=Object.create(null),Hb(t,e,i,r);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=s?i:vb(i):t.type.props?t.props=i:t.props=r,t.attrs=r}function $C(t,e,n,s){const{props:i,attrs:r,vnode:{patchFlag:o}}=t,l=rt(i),[c]=t.propsOptions;let d=!1;if((s||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let p=0;p<h.length;p++){let _=h[p];if(cd(t.emitsOptions,_))continue;const E=e[_];if(c)if(dt(r,_))E!==r[_]&&(r[_]=E,d=!0);else{const C=bs(_);i[C]=cp(c,l,C,E,t,!1)}else E!==r[_]&&(r[_]=E,d=!0)}}}else{Hb(t,e,i,r)&&(d=!0);let h;for(const p in l)(!e||!dt(e,p)&&((h=$o(p))===p||!dt(e,h)))&&(c?n&&(n[p]!==void 0||n[h]!==void 0)&&(i[p]=cp(c,l,p,void 0,t,!0)):delete i[p]);if(r!==l)for(const p in r)(!e||!dt(e,p))&&(delete r[p],d=!0)}d&&wi(t.attrs,"set","")}function Hb(t,e,n,s){const[i,r]=t.propsOptions;let o=!1,l;if(e)for(let c in e){if(Jl(c))continue;const d=e[c];let h;i&&dt(i,h=bs(c))?!r||!r.includes(h)?n[h]=d:(l||(l={}))[h]=d:cd(t.emitsOptions,c)||(!(c in s)||d!==s[c])&&(s[c]=d,o=!0)}if(r){const c=rt(n),d=l||bt;for(let h=0;h<r.length;h++){const p=r[h];n[p]=cp(i,c,p,d[p],t,!dt(d,p))}}return o}function cp(t,e,n,s,i,r){const o=t[n];if(o!=null){const l=dt(o,"default");if(l&&s===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Be(c)){const{propsDefaults:d}=i;if(n in d)s=d[n];else{const h=Mc(i);s=d[n]=c.call(null,e),h()}}else s=c;i.ce&&i.ce._setProp(n,s)}o[0]&&(r&&!l?s=!1:o[1]&&(s===""||s===$o(n))&&(s=!0))}return s}const FC=new WeakMap;function qb(t,e,n=!1){const s=n?FC:e.propsCache,i=s.get(t);if(i)return i;const r=t.props,o={},l=[];let c=!1;if(!Be(t)){const h=p=>{c=!0;const[_,E]=qb(p,e,!0);fn(o,_),E&&l.push(...E)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!r&&!c)return Tt(t)&&s.set(t,Sa),Sa;if(Pe(r))for(let h=0;h<r.length;h++){const p=bs(r[h]);$_(p)&&(o[p]=bt)}else if(r)for(const h in r){const p=bs(h);if($_(p)){const _=r[h],E=o[p]=Pe(_)||Be(_)?{type:_}:fn({},_),C=E.type;let D=!1,N=!0;if(Pe(C))for(let j=0;j<C.length;++j){const $=C[j],U=Be($)&&$.name;if(U==="Boolean"){D=!0;break}else U==="String"&&(N=!1)}else D=Be(C)&&C.name==="Boolean";E[0]=D,E[1]=N,(D||dt(E,"default"))&&l.push(p)}}const d=[o,l];return Tt(t)&&s.set(t,d),d}function $_(t){return t[0]!=="$"&&!Jl(t)}const Wb=t=>t[0]==="_"||t==="$stable",um=t=>Pe(t)?t.map(Qs):[Qs(t)],UC=(t,e,n)=>{if(e._n)return e;const s=Je((...i)=>um(e(...i)),n);return s._c=!1,s},zb=(t,e,n)=>{const s=t._ctx;for(const i in t){if(Wb(i))continue;const r=t[i];if(Be(r))e[i]=UC(i,r,s);else if(r!=null){const o=um(r);e[i]=()=>o}}},Kb=(t,e)=>{const n=um(e);t.slots.default=()=>n},Gb=(t,e,n)=>{for(const s in e)(n||s!=="_")&&(t[s]=e[s])},jC=(t,e,n)=>{const s=t.slots=jb();if(t.vnode.shapeFlag&32){const i=e._;i?(Gb(s,e,n),n&&XE(s,"_",i,!0)):zb(e,s)}else e&&Kb(t,e)},BC=(t,e,n)=>{const{vnode:s,slots:i}=t;let r=!0,o=bt;if(s.shapeFlag&32){const l=e._;l?n&&l===1?r=!1:Gb(i,e,n):(r=!e.$stable,zb(e,i)),o=e}else e&&(Kb(t,e),o={default:1});if(r)for(const l in i)!Wb(l)&&o[l]==null&&delete i[l]},ts=s1;function HC(t){return qC(t)}function qC(t,e){const n=nd();n.__VUE__=!0;const{insert:s,remove:i,patchProp:r,createElement:o,createText:l,createComment:c,setText:d,setElementText:h,parentNode:p,nextSibling:_,setScopeId:E=Ys,insertStaticContent:C}=t,D=(P,k,M,K=null,Q=null,J=null,de=void 0,le=null,oe=!!k.dynamicChildren)=>{if(P===k)return;P&&!_o(P,k)&&(K=z(P),at(P,Q,J,!0),P=null),k.patchFlag===-2&&(oe=!1,k.dynamicChildren=null);const{type:ne,ref:Se,shapeFlag:fe}=k;switch(ne){case ud:N(P,k,M,K);break;case zn:j(P,k,M,K);break;case Ju:P==null&&$(k,M,K,de);break;case xe:A(P,k,M,K,Q,J,de,le,oe);break;default:fe&1?se(P,k,M,K,Q,J,de,le,oe):fe&6?S(P,k,M,K,Q,J,de,le,oe):(fe&64||fe&128)&&ne.process(P,k,M,K,Q,J,de,le,oe,ve)}Se!=null&&Q&&Eh(Se,P&&P.ref,J,k||P,!k)},N=(P,k,M,K)=>{if(P==null)s(k.el=l(k.children),M,K);else{const Q=k.el=P.el;k.children!==P.children&&d(Q,k.children)}},j=(P,k,M,K)=>{P==null?s(k.el=c(k.children||""),M,K):k.el=P.el},$=(P,k,M,K)=>{[P.el,P.anchor]=C(P.children,k,M,K,P.el,P.anchor)},U=({el:P,anchor:k},M,K)=>{let Q;for(;P&&P!==k;)Q=_(P),s(P,M,K),P=Q;s(k,M,K)},B=({el:P,anchor:k})=>{let M;for(;P&&P!==k;)M=_(P),i(P),P=M;i(k)},se=(P,k,M,K,Q,J,de,le,oe)=>{k.type==="svg"?de="svg":k.type==="math"&&(de="mathml"),P==null?re(k,M,K,Q,J,de,le,oe):T(P,k,Q,J,de,le,oe)},re=(P,k,M,K,Q,J,de,le)=>{let oe,ne;const{props:Se,shapeFlag:fe,transition:Ee,dirs:Te}=P;if(oe=P.el=o(P.type,J,Se&&Se.is,Se),fe&8?h(oe,P.children):fe&16&&I(P.children,oe,null,K,Q,bf(P,J),de,le),Te&&uo(P,null,K,"created"),x(oe,P,P.scopeId,de,K),Se){for(const Ve in Se)Ve!=="value"&&!Jl(Ve)&&r(oe,Ve,null,Se[Ve],J,K);"value"in Se&&r(oe,"value",null,Se.value,J),(ne=Se.onVnodeBeforeMount)&&zs(ne,K,P)}Te&&uo(P,null,K,"beforeMount");const Ie=WC(Q,Ee);Ie&&Ee.beforeEnter(oe),s(oe,k,M),((ne=Se&&Se.onVnodeMounted)||Ie||Te)&&ts(()=>{ne&&zs(ne,K,P),Ie&&Ee.enter(oe),Te&&uo(P,null,K,"mounted")},Q)},x=(P,k,M,K,Q)=>{if(M&&E(P,M),K)for(let J=0;J<K.length;J++)E(P,K[J]);if(Q){let J=Q.subTree;if(k===J||Zb(J.type)&&(J.ssContent===k||J.ssFallback===k)){const de=Q.vnode;x(P,de,de.scopeId,de.slotScopeIds,Q.parent)}}},I=(P,k,M,K,Q,J,de,le,oe=0)=>{for(let ne=oe;ne<P.length;ne++){const Se=P[ne]=le?dr(P[ne]):Qs(P[ne]);D(null,Se,k,M,K,Q,J,de,le)}},T=(P,k,M,K,Q,J,de)=>{const le=k.el=P.el;let{patchFlag:oe,dynamicChildren:ne,dirs:Se}=k;oe|=P.patchFlag&16;const fe=P.props||bt,Ee=k.props||bt;let Te;if(M&&ho(M,!1),(Te=Ee.onVnodeBeforeUpdate)&&zs(Te,M,k,P),Se&&uo(k,P,M,"beforeUpdate"),M&&ho(M,!0),(fe.innerHTML&&Ee.innerHTML==null||fe.textContent&&Ee.textContent==null)&&h(le,""),ne?R(P.dynamicChildren,ne,le,M,K,bf(k,Q),J):de||qe(P,k,le,null,M,K,bf(k,Q),J,!1),oe>0){if(oe&16)O(le,fe,Ee,M,Q);else if(oe&2&&fe.class!==Ee.class&&r(le,"class",null,Ee.class,Q),oe&4&&r(le,"style",fe.style,Ee.style,Q),oe&8){const Ie=k.dynamicProps;for(let Ve=0;Ve<Ie.length;Ve++){const Ke=Ie[Ve],Vt=fe[Ke],xt=Ee[Ke];(xt!==Vt||Ke==="value")&&r(le,Ke,Vt,xt,Q,M)}}oe&1&&P.children!==k.children&&h(le,k.children)}else!de&&ne==null&&O(le,fe,Ee,M,Q);((Te=Ee.onVnodeUpdated)||Se)&&ts(()=>{Te&&zs(Te,M,k,P),Se&&uo(k,P,M,"updated")},K)},R=(P,k,M,K,Q,J,de)=>{for(let le=0;le<k.length;le++){const oe=P[le],ne=k[le],Se=oe.el&&(oe.type===xe||!_o(oe,ne)||oe.shapeFlag&70)?p(oe.el):M;D(oe,ne,Se,null,K,Q,J,de,!0)}},O=(P,k,M,K,Q)=>{if(k!==M){if(k!==bt)for(const J in k)!Jl(J)&&!(J in M)&&r(P,J,k[J],null,Q,K);for(const J in M){if(Jl(J))continue;const de=M[J],le=k[J];de!==le&&J!=="value"&&r(P,J,le,de,Q,K)}"value"in M&&r(P,"value",k.value,M.value,Q)}},A=(P,k,M,K,Q,J,de,le,oe)=>{const ne=k.el=P?P.el:l(""),Se=k.anchor=P?P.anchor:l("");let{patchFlag:fe,dynamicChildren:Ee,slotScopeIds:Te}=k;Te&&(le=le?le.concat(Te):Te),P==null?(s(ne,M,K),s(Se,M,K),I(k.children||[],M,Se,Q,J,de,le,oe)):fe>0&&fe&64&&Ee&&P.dynamicChildren?(R(P.dynamicChildren,Ee,M,Q,J,de,le),(k.key!=null||Q&&k===Q.subTree)&&Qb(P,k,!0)):qe(P,k,M,Se,Q,J,de,le,oe)},S=(P,k,M,K,Q,J,de,le,oe)=>{k.slotScopeIds=le,P==null?k.shapeFlag&512?Q.ctx.activate(k,M,K,de,oe):Le(k,M,K,Q,J,de,oe):ot(P,k,oe)},Le=(P,k,M,K,Q,J,de)=>{const le=P.component=u1(P,K,Q);if(od(P)&&(le.ctx.renderer=ve),d1(le,!1,de),le.asyncDep){if(Q&&Q.registerDep(le,Me,de),!P.el){const oe=le.subTree=pe(zn);j(null,oe,k,M)}}else Me(le,P,k,M,Q,J,de)},ot=(P,k,M)=>{const K=k.component=P.component;if(t1(P,k,M))if(K.asyncDep&&!K.asyncResolved){we(K,k,M);return}else K.next=k,K.update();else k.el=P.el,K.vnode=k},Me=(P,k,M,K,Q,J,de)=>{const le=()=>{if(P.isMounted){let{next:fe,bu:Ee,u:Te,parent:Ie,vnode:Ve}=P;{const Ut=Yb(P);if(Ut){fe&&(fe.el=Ve.el,we(P,fe,de)),Ut.asyncDep.then(()=>{P.isUnmounted||le()});return}}let Ke=fe,Vt;ho(P,!1),fe?(fe.el=Ve.el,we(P,fe,de)):fe=Ve,Ee&&Yu(Ee),(Vt=fe.props&&fe.props.onVnodeBeforeUpdate)&&zs(Vt,Ie,fe,Ve),ho(P,!0);const xt=U_(P),Yt=P.subTree;P.subTree=xt,D(Yt,xt,p(Yt.el),z(Yt),P,Q,J),fe.el=xt.el,Ke===null&&n1(P,xt.el),Te&&ts(Te,Q),(Vt=fe.props&&fe.props.onVnodeUpdated)&&ts(()=>zs(Vt,Ie,fe,Ve),Q)}else{let fe;const{el:Ee,props:Te}=k,{bm:Ie,m:Ve,parent:Ke,root:Vt,type:xt}=P,Yt=tc(k);ho(P,!1),Ie&&Yu(Ie),!Yt&&(fe=Te&&Te.onVnodeBeforeMount)&&zs(fe,Ke,k),ho(P,!0);{Vt.ce&&Vt.ce._injectChildStyle(xt);const Ut=P.subTree=U_(P);D(null,Ut,M,K,P,Q,J),k.el=Ut.el}if(Ve&&ts(Ve,Q),!Yt&&(fe=Te&&Te.onVnodeMounted)){const Ut=k;ts(()=>zs(fe,Ke,Ut),Q)}(k.shapeFlag&256||Ke&&tc(Ke.vnode)&&Ke.vnode.shapeFlag&256)&&P.a&&ts(P.a,Q),P.isMounted=!0,k=M=K=null}};P.scope.on();const oe=P.effect=new ib(le);P.scope.off();const ne=P.update=oe.run.bind(oe),Se=P.job=oe.runIfDirty.bind(oe);Se.i=P,Se.id=P.uid,oe.scheduler=()=>cm(Se),ho(P,!0),ne()},we=(P,k,M)=>{k.component=P;const K=P.vnode.props;P.vnode=k,P.next=null,$C(P,k.props,K,M),BC(P,k.children,M),Mr(),k_(P),$r()},qe=(P,k,M,K,Q,J,de,le,oe=!1)=>{const ne=P&&P.children,Se=P?P.shapeFlag:0,fe=k.children,{patchFlag:Ee,shapeFlag:Te}=k;if(Ee>0){if(Ee&128){X(ne,fe,M,K,Q,J,de,le,oe);return}else if(Ee&256){kt(ne,fe,M,K,Q,J,de,le,oe);return}}Te&8?(Se&16&&ct(ne,Q,J),fe!==ne&&h(M,fe)):Se&16?Te&16?X(ne,fe,M,K,Q,J,de,le,oe):ct(ne,Q,J,!0):(Se&8&&h(M,""),Te&16&&I(fe,M,K,Q,J,de,le,oe))},kt=(P,k,M,K,Q,J,de,le,oe)=>{P=P||Sa,k=k||Sa;const ne=P.length,Se=k.length,fe=Math.min(ne,Se);let Ee;for(Ee=0;Ee<fe;Ee++){const Te=k[Ee]=oe?dr(k[Ee]):Qs(k[Ee]);D(P[Ee],Te,M,null,Q,J,de,le,oe)}ne>Se?ct(P,Q,J,!0,!1,fe):I(k,M,K,Q,J,de,le,oe,fe)},X=(P,k,M,K,Q,J,de,le,oe)=>{let ne=0;const Se=k.length;let fe=P.length-1,Ee=Se-1;for(;ne<=fe&&ne<=Ee;){const Te=P[ne],Ie=k[ne]=oe?dr(k[ne]):Qs(k[ne]);if(_o(Te,Ie))D(Te,Ie,M,null,Q,J,de,le,oe);else break;ne++}for(;ne<=fe&&ne<=Ee;){const Te=P[fe],Ie=k[Ee]=oe?dr(k[Ee]):Qs(k[Ee]);if(_o(Te,Ie))D(Te,Ie,M,null,Q,J,de,le,oe);else break;fe--,Ee--}if(ne>fe){if(ne<=Ee){const Te=Ee+1,Ie=Te<Se?k[Te].el:K;for(;ne<=Ee;)D(null,k[ne]=oe?dr(k[ne]):Qs(k[ne]),M,Ie,Q,J,de,le,oe),ne++}}else if(ne>Ee)for(;ne<=fe;)at(P[ne],Q,J,!0),ne++;else{const Te=ne,Ie=ne,Ve=new Map;for(ne=Ie;ne<=Ee;ne++){const Xt=k[ne]=oe?dr(k[ne]):Qs(k[ne]);Xt.key!=null&&Ve.set(Xt.key,ne)}let Ke,Vt=0;const xt=Ee-Ie+1;let Yt=!1,Ut=0;const $s=new Array(xt);for(ne=0;ne<xt;ne++)$s[ne]=0;for(ne=Te;ne<=fe;ne++){const Xt=P[ne];if(Vt>=xt){at(Xt,Q,J,!0);continue}let Bn;if(Xt.key!=null)Bn=Ve.get(Xt.key);else for(Ke=Ie;Ke<=Ee;Ke++)if($s[Ke-Ie]===0&&_o(Xt,k[Ke])){Bn=Ke;break}Bn===void 0?at(Xt,Q,J,!0):($s[Bn-Ie]=ne+1,Bn>=Ut?Ut=Bn:Yt=!0,D(Xt,k[Bn],M,null,Q,J,de,le,oe),Vt++)}const li=Yt?zC($s):Sa;for(Ke=li.length-1,ne=xt-1;ne>=0;ne--){const Xt=Ie+ne,Bn=k[Xt],zo=Xt+1<Se?k[Xt+1].el:K;$s[ne]===0?D(null,Bn,M,zo,Q,J,de,le,oe):Yt&&(Ke<0||ne!==li[Ke]?zt(Bn,M,zo,2):Ke--)}}},zt=(P,k,M,K,Q=null)=>{const{el:J,type:de,transition:le,children:oe,shapeFlag:ne}=P;if(ne&6){zt(P.component.subTree,k,M,K);return}if(ne&128){P.suspense.move(k,M,K);return}if(ne&64){de.move(P,k,M,ve);return}if(de===xe){s(J,k,M);for(let fe=0;fe<oe.length;fe++)zt(oe[fe],k,M,K);s(P.anchor,k,M);return}if(de===Ju){U(P,k,M);return}if(K!==2&&ne&1&&le)if(K===0)le.beforeEnter(J),s(J,k,M),ts(()=>le.enter(J),Q);else{const{leave:fe,delayLeave:Ee,afterLeave:Te}=le,Ie=()=>s(J,k,M),Ve=()=>{fe(J,()=>{Ie(),Te&&Te()})};Ee?Ee(J,Ie,Ve):Ve()}else s(J,k,M)},at=(P,k,M,K=!1,Q=!1)=>{const{type:J,props:de,ref:le,children:oe,dynamicChildren:ne,shapeFlag:Se,patchFlag:fe,dirs:Ee,cacheIndex:Te}=P;if(fe===-2&&(Q=!1),le!=null&&Eh(le,null,M,P,!0),Te!=null&&(k.renderCache[Te]=void 0),Se&256){k.ctx.deactivate(P);return}const Ie=Se&1&&Ee,Ve=!tc(P);let Ke;if(Ve&&(Ke=de&&de.onVnodeBeforeUnmount)&&zs(Ke,k,P),Se&6)Rt(P.component,M,K);else{if(Se&128){P.suspense.unmount(M,K);return}Ie&&uo(P,null,k,"beforeUnmount"),Se&64?P.type.remove(P,k,M,ve,K):ne&&!ne.hasOnce&&(J!==xe||fe>0&&fe&64)?ct(ne,k,M,!1,!0):(J===xe&&fe&384||!Q&&Se&16)&&ct(oe,k,M),K&&lt(P)}(Ve&&(Ke=de&&de.onVnodeUnmounted)||Ie)&&ts(()=>{Ke&&zs(Ke,k,P),Ie&&uo(P,null,k,"unmounted")},M)},lt=P=>{const{type:k,el:M,anchor:K,transition:Q}=P;if(k===xe){Ct(M,K);return}if(k===Ju){B(P);return}const J=()=>{i(M),Q&&!Q.persisted&&Q.afterLeave&&Q.afterLeave()};if(P.shapeFlag&1&&Q&&!Q.persisted){const{leave:de,delayLeave:le}=Q,oe=()=>de(M,J);le?le(P.el,J,oe):oe()}else J()},Ct=(P,k)=>{let M;for(;P!==k;)M=_(P),i(P),P=M;i(k)},Rt=(P,k,M)=>{const{bum:K,scope:Q,job:J,subTree:de,um:le,m:oe,a:ne}=P;F_(oe),F_(ne),K&&Yu(K),Q.stop(),J&&(J.flags|=8,at(de,P,k,M)),le&&ts(le,k),ts(()=>{P.isUnmounted=!0},k),k&&k.pendingBranch&&!k.isUnmounted&&P.asyncDep&&!P.asyncResolved&&P.suspenseId===k.pendingId&&(k.deps--,k.deps===0&&k.resolve())},ct=(P,k,M,K=!1,Q=!1,J=0)=>{for(let de=J;de<P.length;de++)at(P[de],k,M,K,Q)},z=P=>{if(P.shapeFlag&6)return z(P.component.subTree);if(P.shapeFlag&128)return P.suspense.next();const k=_(P.anchor||P.el),M=k&&k[hC];return M?_(M):k};let W=!1;const ce=(P,k,M)=>{P==null?k._vnode&&at(k._vnode,null,null,!0):D(k._vnode||null,P,k,null,null,null,M),k._vnode=P,W||(W=!0,k_(),Ab(),W=!1)},ve={p:D,um:at,m:zt,r:lt,mt:Le,mc:I,pc:qe,pbc:R,n:z,o:t};return{render:ce,hydrate:void 0,createApp:LC(ce)}}function bf({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function ho({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function WC(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Qb(t,e,n=!1){const s=t.children,i=e.children;if(Pe(s)&&Pe(i))for(let r=0;r<s.length;r++){const o=s[r];let l=i[r];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=i[r]=dr(i[r]),l.el=o.el),!n&&l.patchFlag!==-2&&Qb(o,l)),l.type===ud&&(l.el=o.el)}}function zC(t){const e=t.slice(),n=[0];let s,i,r,o,l;const c=t.length;for(s=0;s<c;s++){const d=t[s];if(d!==0){if(i=n[n.length-1],t[i]<d){e[s]=i,n.push(s);continue}for(r=0,o=n.length-1;r<o;)l=r+o>>1,t[n[l]]<d?r=l+1:o=l;d<t[n[r]]&&(r>0&&(e[s]=n[r-1]),n[r]=s)}}for(r=n.length,o=n[r-1];r-- >0;)n[r]=o,o=e[o];return n}function Yb(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Yb(e)}function F_(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const KC=Symbol.for("v-scx"),GC=()=>vs(KC);function QC(t,e){return hm(t,null,e)}function rs(t,e,n){return hm(t,e,n)}function hm(t,e,n=bt){const{immediate:s,deep:i,flush:r,once:o}=n,l=fn({},n),c=e&&s||!e&&r!=="post";let d;if(Ec){if(r==="sync"){const E=GC();d=E.__watcherHandles||(E.__watcherHandles=[])}else if(!c){const E=()=>{};return E.stop=Ys,E.resume=Ys,E.pause=Ys,E}}const h=dn;l.call=(E,C,D)=>Ns(E,h,C,D);let p=!1;r==="post"?l.scheduler=E=>{ts(E,h&&h.suspense)}:r!=="sync"&&(p=!0,l.scheduler=(E,C)=>{C?E():cm(E)}),l.augmentJob=E=>{e&&(E.flags|=4),p&&(E.flags|=2,h&&(E.id=h.uid,E.i=h))};const _=aC(t,e,l);return Ec&&(d?d.push(_):c&&_()),_}function YC(t,e,n){const s=this.proxy,i=qt(t)?t.includes(".")?Xb(s,t):()=>s[t]:t.bind(s,s);let r;Be(e)?r=e:(r=e.handler,n=e);const o=Mc(this),l=hm(i,r.bind(s),n);return o(),l}function Xb(t,e){const n=e.split(".");return()=>{let s=t;for(let i=0;i<n.length&&s;i++)s=s[n[i]];return s}}const XC=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${bs(e)}Modifiers`]||t[`${$o(e)}Modifiers`];function JC(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||bt;let i=n;const r=e.startsWith("update:"),o=r&&XC(s,e.slice(7));o&&(o.trim&&(i=n.map(h=>qt(h)?h.trim():h)),o.number&&(i=n.map(mh)));let l,c=s[l=pf(e)]||s[l=pf(bs(e))];!c&&r&&(c=s[l=pf($o(e))]),c&&Ns(c,t,6,i);const d=s[l+"Once"];if(d){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,Ns(d,t,6,i)}}function Jb(t,e,n=!1){const s=e.emitsCache,i=s.get(t);if(i!==void 0)return i;const r=t.emits;let o={},l=!1;if(!Be(t)){const c=d=>{const h=Jb(d,e,!0);h&&(l=!0,fn(o,h))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!r&&!l?(Tt(t)&&s.set(t,null),null):(Pe(r)?r.forEach(c=>o[c]=null):fn(o,r),Tt(t)&&s.set(t,o),o)}function cd(t,e){return!t||!Jh(e)?!1:(e=e.slice(2).replace(/Once$/,""),dt(t,e[0].toLowerCase()+e.slice(1))||dt(t,$o(e))||dt(t,e))}function U_(t){const{type:e,vnode:n,proxy:s,withProxy:i,propsOptions:[r],slots:o,attrs:l,emit:c,render:d,renderCache:h,props:p,data:_,setupState:E,ctx:C,inheritAttrs:D}=t,N=yh(t);let j,$;try{if(n.shapeFlag&4){const B=i||s,se=B;j=Qs(d.call(se,B,h,p,E,_,C)),$=l}else{const B=e;j=Qs(B.length>1?B(p,{attrs:l,slots:o,emit:c}):B(p,null)),$=e.props?l:ZC(l)}}catch(B){sc.length=0,rd(B,t,1),j=pe(zn)}let U=j;if($&&D!==!1){const B=Object.keys($),{shapeFlag:se}=U;B.length&&se&7&&(r&&B.some(Jp)&&($=e1($,r)),U=Sr(U,$,!1,!0))}return n.dirs&&(U=Sr(U,null,!1,!0),U.dirs=U.dirs?U.dirs.concat(n.dirs):n.dirs),n.transition&&vc(U,n.transition),j=U,yh(N),j}const ZC=t=>{let e;for(const n in t)(n==="class"||n==="style"||Jh(n))&&((e||(e={}))[n]=t[n]);return e},e1=(t,e)=>{const n={};for(const s in t)(!Jp(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function t1(t,e,n){const{props:s,children:i,component:r}=t,{props:o,children:l,patchFlag:c}=e,d=r.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return s?j_(s,o,d):!!o;if(c&8){const h=e.dynamicProps;for(let p=0;p<h.length;p++){const _=h[p];if(o[_]!==s[_]&&!cd(d,_))return!0}}}else return(i||l)&&(!l||!l.$stable)?!0:s===o?!1:s?o?j_(s,o,d):!0:!!o;return!1}function j_(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let i=0;i<s.length;i++){const r=s[i];if(e[r]!==t[r]&&!cd(n,r))return!0}return!1}function n1({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const Zb=t=>t.__isSuspense;function s1(t,e){e&&e.pendingBranch?Pe(t)?e.effects.push(...t):e.effects.push(t):uC(t)}const xe=Symbol.for("v-fgt"),ud=Symbol.for("v-txt"),zn=Symbol.for("v-cmt"),Ju=Symbol.for("v-stc"),sc=[];let ss=null;function G(t=!1){sc.push(ss=t?null:[])}function i1(){sc.pop(),ss=sc[sc.length-1]||null}let yc=1;function B_(t,e=!1){yc+=t,t<0&&ss&&e&&(ss.hasOnce=!0)}function ew(t){return t.dynamicChildren=yc>0?ss||Sa:null,i1(),yc>0&&ss&&ss.push(t),t}function Y(t,e,n,s,i,r){return ew(g(t,e,n,s,i,r,!0))}function dm(t,e,n,s,i){return ew(pe(t,e,n,s,i,!0))}function wh(t){return t?t.__v_isVNode===!0:!1}function _o(t,e){return t.type===e.type&&t.key===e.key}const tw=({key:t})=>t??null,Zu=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?qt(t)||Dt(t)||Be(t)?{i:Mn,r:t,k:e,f:!!n}:t:null);function g(t,e=null,n=null,s=0,i=null,r=t===xe?0:1,o=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&tw(e),ref:e&&Zu(e),scopeId:Sb,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Mn};return l?(fm(c,n),r&128&&t.normalize(c)):n&&(c.shapeFlag|=qt(n)?8:16),yc>0&&!o&&ss&&(c.patchFlag>0||r&6)&&c.patchFlag!==32&&ss.push(c),c}const pe=r1;function r1(t,e=null,n=null,s=0,i=null,r=!1){if((!t||t===SC)&&(t=zn),wh(t)){const l=Sr(t,e,!0);return n&&fm(l,n),yc>0&&!r&&ss&&(l.shapeFlag&6?ss[ss.indexOf(t)]=l:ss.push(l)),l.patchFlag=-2,l}if(_1(t)&&(t=t.__vccOpts),e){e=o1(e);let{class:l,style:c}=e;l&&!qt(l)&&(e.class=en(l)),Tt(c)&&(am(c)&&!Pe(c)&&(c=fn({},c)),e.style=Co(c))}const o=qt(t)?1:Zb(t)?128:Cb(t)?64:Tt(t)?4:Be(t)?2:0;return g(t,e,n,s,i,o,r,!0)}function o1(t){return t?am(t)||Bb(t)?fn({},t):t:null}function Sr(t,e,n=!1,s=!1){const{props:i,ref:r,patchFlag:o,children:l,transition:c}=t,d=e?a1(i||{},e):i,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:d,key:d&&tw(d),ref:e&&e.ref?n&&r?Pe(r)?r.concat(Zu(e)):[r,Zu(e)]:Zu(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==xe?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Sr(t.ssContent),ssFallback:t.ssFallback&&Sr(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&s&&vc(h,c.clone(h)),h}function Xe(t=" ",e=0){return pe(ud,null,t,e)}function Th(t,e){const n=pe(Ju,null,t);return n.staticCount=e,n}function un(t="",e=!1){return e?(G(),dm(zn,null,t)):pe(zn,null,t)}function Qs(t){return t==null||typeof t=="boolean"?pe(zn):Pe(t)?pe(xe,null,t.slice()):wh(t)?dr(t):pe(ud,null,String(t))}function dr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Sr(t)}function fm(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(Pe(e))n=16;else if(typeof e=="object")if(s&65){const i=e.default;i&&(i._c&&(i._d=!1),fm(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!Bb(e)?e._ctx=Mn:i===3&&Mn&&(Mn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Be(e)?(e={default:e,_ctx:Mn},n=32):(e=String(e),s&64?(n=16,e=[Xe(e)]):n=8);t.children=e,t.shapeFlag|=n}function a1(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const i in s)if(i==="class")e.class!==s.class&&(e.class=en([e.class,s.class]));else if(i==="style")e.style=Co([e.style,s.style]);else if(Jh(i)){const r=e[i],o=s[i];o&&r!==o&&!(Pe(r)&&r.includes(o))&&(e[i]=r?[].concat(r,o):o)}else i!==""&&(e[i]=s[i])}return e}function zs(t,e,n,s=null){Ns(t,e,7,[n,s])}const l1=Fb();let c1=0;function u1(t,e,n){const s=t.type,i=(e?e.appContext:t.appContext)||l1,r={uid:c1++,vnode:t,type:s,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new tb(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:qb(s,i),emitsOptions:Jb(s,i),emit:null,emitted:null,propsDefaults:bt,inheritAttrs:s.inheritAttrs,ctx:bt,data:bt,props:bt,attrs:bt,slots:bt,refs:bt,setupState:bt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=JC.bind(null,r),t.ce&&t.ce(r),r}let dn=null;const h1=()=>dn||Mn;let Ah,up;{const t=nd(),e=(n,s)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(s),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};Ah=e("__VUE_INSTANCE_SETTERS__",n=>dn=n),up=e("__VUE_SSR_SETTERS__",n=>Ec=n)}const Mc=t=>{const e=dn;return Ah(t),t.scope.on(),()=>{t.scope.off(),Ah(e)}},H_=()=>{dn&&dn.scope.off(),Ah(null)};function nw(t){return t.vnode.shapeFlag&4}let Ec=!1;function d1(t,e=!1,n=!1){e&&up(e);const{props:s,children:i}=t.vnode,r=nw(t);MC(t,s,r,e),jC(t,i,n);const o=r?f1(t,e):void 0;return e&&up(!1),o}function f1(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,RC);const{setup:s}=n;if(s){Mr();const i=t.setupContext=s.length>1?m1(t):null,r=Mc(t),o=Vc(s,t,0,[t.props,i]),l=GE(o);if($r(),r(),(l||t.sp)&&!tc(t)&&Nb(t),l){if(o.then(H_,H_),e)return o.then(c=>{q_(t,c)}).catch(c=>{rd(c,t,0)});t.asyncDep=o}else q_(t,o)}else sw(t)}function q_(t,e,n){Be(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Tt(e)&&(t.setupState=bb(e)),sw(t)}function sw(t,e,n){const s=t.type;t.render||(t.render=s.render||Ys);{const i=Mc(t);Mr();try{PC(t)}finally{$r(),i()}}}const p1={get(t,e){return wn(t,"get",""),t[e]}};function m1(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,p1),slots:t.slots,emit:t.emit,expose:e}}function hd(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(bb(lm(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in nc)return nc[n](t)},has(e,n){return n in e||n in nc}})):t.proxy}function g1(t,e=!0){return Be(t)?t.displayName||t.name:t.name||e&&t.__name}function _1(t){return Be(t)&&"__vccOpts"in t}const Ot=(t,e)=>rC(t,e,Ec);function pm(t,e,n){const s=arguments.length;return s===2?Tt(e)&&!Pe(e)?wh(e)?pe(t,null,[e]):pe(t,e):pe(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&wh(n)&&(n=[n]),pe(t,e,n))}const v1="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let hp;const W_=typeof window<"u"&&window.trustedTypes;if(W_)try{hp=W_.createPolicy("vue",{createHTML:t=>t})}catch{}const iw=hp?t=>hp.createHTML(t):t=>t,y1="http://www.w3.org/2000/svg",E1="http://www.w3.org/1998/Math/MathML",bi=typeof document<"u"?document:null,z_=bi&&bi.createElement("template"),b1={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const i=e==="svg"?bi.createElementNS(y1,t):e==="mathml"?bi.createElementNS(E1,t):n?bi.createElement(t,{is:n}):bi.createElement(t);return t==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:t=>bi.createTextNode(t),createComment:t=>bi.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>bi.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,i,r){const o=n?n.previousSibling:e.lastChild;if(i&&(i===r||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===r||!(i=i.nextSibling)););else{z_.innerHTML=iw(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const l=z_.content;if(s==="svg"||s==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}e.insertBefore(l,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},rr="transition",jl="animation",bc=Symbol("_vtc"),rw={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},w1=fn({},Rb,rw),T1=t=>(t.displayName="Transition",t.props=w1,t),K_=T1((t,{slots:e})=>pm(pC,A1(t),e)),fo=(t,e=[])=>{Pe(t)?t.forEach(n=>n(...e)):t&&t(...e)},G_=t=>t?Pe(t)?t.some(e=>e.length>1):t.length>1:!1;function A1(t){const e={};for(const A in t)A in rw||(e[A]=t[A]);if(t.css===!1)return e;const{name:n="v",type:s,duration:i,enterFromClass:r=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:c=r,appearActiveClass:d=o,appearToClass:h=l,leaveFromClass:p=`${n}-leave-from`,leaveActiveClass:_=`${n}-leave-active`,leaveToClass:E=`${n}-leave-to`}=t,C=I1(i),D=C&&C[0],N=C&&C[1],{onBeforeEnter:j,onEnter:$,onEnterCancelled:U,onLeave:B,onLeaveCancelled:se,onBeforeAppear:re=j,onAppear:x=$,onAppearCancelled:I=U}=e,T=(A,S,Le,ot)=>{A._enterCancelled=ot,po(A,S?h:l),po(A,S?d:o),Le&&Le()},R=(A,S)=>{A._isLeaving=!1,po(A,p),po(A,E),po(A,_),S&&S()},O=A=>(S,Le)=>{const ot=A?x:$,Me=()=>T(S,A,Le);fo(ot,[S,Me]),Q_(()=>{po(S,A?c:r),yi(S,A?h:l),G_(ot)||Y_(S,s,D,Me)})};return fn(e,{onBeforeEnter(A){fo(j,[A]),yi(A,r),yi(A,o)},onBeforeAppear(A){fo(re,[A]),yi(A,c),yi(A,d)},onEnter:O(!1),onAppear:O(!0),onLeave(A,S){A._isLeaving=!0;const Le=()=>R(A,S);yi(A,p),A._enterCancelled?(yi(A,_),Z_()):(Z_(),yi(A,_)),Q_(()=>{A._isLeaving&&(po(A,p),yi(A,E),G_(B)||Y_(A,s,N,Le))}),fo(B,[A,Le])},onEnterCancelled(A){T(A,!1,void 0,!0),fo(U,[A])},onAppearCancelled(A){T(A,!0,void 0,!0),fo(I,[A])},onLeaveCancelled(A){R(A),fo(se,[A])}})}function I1(t){if(t==null)return null;if(Tt(t))return[wf(t.enter),wf(t.leave)];{const e=wf(t);return[e,e]}}function wf(t){return TS(t)}function yi(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[bc]||(t[bc]=new Set)).add(e)}function po(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.remove(s));const n=t[bc];n&&(n.delete(e),n.size||(t[bc]=void 0))}function Q_(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let S1=0;function Y_(t,e,n,s){const i=t._endId=++S1,r=()=>{i===t._endId&&s()};if(n!=null)return setTimeout(r,n);const{type:o,timeout:l,propCount:c}=C1(t,e);if(!o)return s();const d=o+"end";let h=0;const p=()=>{t.removeEventListener(d,_),r()},_=E=>{E.target===t&&++h>=c&&p()};setTimeout(()=>{h<c&&p()},l+1),t.addEventListener(d,_)}function C1(t,e){const n=window.getComputedStyle(t),s=C=>(n[C]||"").split(", "),i=s(`${rr}Delay`),r=s(`${rr}Duration`),o=X_(i,r),l=s(`${jl}Delay`),c=s(`${jl}Duration`),d=X_(l,c);let h=null,p=0,_=0;e===rr?o>0&&(h=rr,p=o,_=r.length):e===jl?d>0&&(h=jl,p=d,_=c.length):(p=Math.max(o,d),h=p>0?o>d?rr:jl:null,_=h?h===rr?r.length:c.length:0);const E=h===rr&&/\b(transform|all)(,|$)/.test(s(`${rr}Property`).toString());return{type:h,timeout:p,propCount:_,hasTransform:E}}function X_(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,s)=>J_(n)+J_(t[s])))}function J_(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Z_(){return document.body.offsetHeight}function R1(t,e,n){const s=t[bc];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const ev=Symbol("_vod"),P1=Symbol("_vsh"),O1=Symbol(""),k1=/(^|;)\s*display\s*:/;function x1(t,e,n){const s=t.style,i=qt(n);let r=!1;if(n&&!i){if(e)if(qt(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();n[l]==null&&eh(s,l,"")}else for(const o in e)n[o]==null&&eh(s,o,"");for(const o in n)o==="display"&&(r=!0),eh(s,o,n[o])}else if(i){if(e!==n){const o=s[O1];o&&(n+=";"+o),s.cssText=n,r=k1.test(n)}}else e&&t.removeAttribute("style");ev in t&&(t[ev]=r?s.display:"",t[P1]&&(s.display="none"))}const tv=/\s*!important$/;function eh(t,e,n){if(Pe(n))n.forEach(s=>eh(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=D1(t,e);tv.test(n)?t.setProperty($o(s),n.replace(tv,""),"important"):t[s]=n}}const nv=["Webkit","Moz","ms"],Tf={};function D1(t,e){const n=Tf[e];if(n)return n;let s=bs(e);if(s!=="filter"&&s in t)return Tf[e]=s;s=td(s);for(let i=0;i<nv.length;i++){const r=nv[i]+s;if(r in t)return Tf[e]=r}return e}const sv="http://www.w3.org/1999/xlink";function iv(t,e,n,s,i,r=PS(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(sv,e.slice(6,e.length)):t.setAttributeNS(sv,e,n):n==null||r&&!JE(n)?t.removeAttribute(e):t.setAttribute(e,r?"":ni(n)?String(n):n)}function rv(t,e,n,s,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?iw(n):n);return}const r=t.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const l=r==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(l!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=JE(n):n==null&&l==="string"?(n="",o=!0):l==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(i||e)}function vo(t,e,n,s){t.addEventListener(e,n,s)}function N1(t,e,n,s){t.removeEventListener(e,n,s)}const ov=Symbol("_vei");function L1(t,e,n,s,i=null){const r=t[ov]||(t[ov]={}),o=r[e];if(s&&o)o.value=s;else{const[l,c]=V1(e);if(s){const d=r[e]=F1(s,i);vo(t,l,d,c)}else o&&(N1(t,l,o,c),r[e]=void 0)}}const av=/(?:Once|Passive|Capture)$/;function V1(t){let e;if(av.test(t)){e={};let s;for(;s=t.match(av);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):$o(t.slice(2)),e]}let Af=0;const M1=Promise.resolve(),$1=()=>Af||(M1.then(()=>Af=0),Af=Date.now());function F1(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Ns(U1(s,n.value),e,5,[s])};return n.value=t,n.attached=$1(),n}function U1(t,e){if(Pe(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>i=>!i._stopped&&s&&s(i))}else return e}const lv=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,j1=(t,e,n,s,i,r)=>{const o=i==="svg";e==="class"?R1(t,s,o):e==="style"?x1(t,n,s):Jh(e)?Jp(e)||L1(t,e,n,s,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):B1(t,e,s,o))?(rv(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&iv(t,e,s,o,r,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!qt(s))?rv(t,bs(e),s,r,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),iv(t,e,s,o))};function B1(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&lv(e)&&Be(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return lv(e)&&qt(n)?!1:e in t}const Ih=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Pe(e)?n=>Yu(e,n):e};function H1(t){t.target.composing=!0}function cv(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Pa=Symbol("_assign"),Gt={created(t,{modifiers:{lazy:e,trim:n,number:s}},i){t[Pa]=Ih(i);const r=s||i.props&&i.props.type==="number";vo(t,e?"change":"input",o=>{if(o.target.composing)return;let l=t.value;n&&(l=l.trim()),r&&(l=mh(l)),t[Pa](l)}),n&&vo(t,"change",()=>{t.value=t.value.trim()}),e||(vo(t,"compositionstart",H1),vo(t,"compositionend",cv),vo(t,"change",cv))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:s,trim:i,number:r}},o){if(t[Pa]=Ih(o),t.composing)return;const l=(r||t.type==="number")&&!/^0\d/.test(t.value)?mh(t.value):t.value,c=e??"";l!==c&&(document.activeElement===t&&t.type!=="range"&&(s&&e===n||i&&t.value.trim()===c)||(t.value=c))}},Cr={deep:!0,created(t,{value:e,modifiers:{number:n}},s){const i=Zh(e);vo(t,"change",()=>{const r=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?mh(Sh(o)):Sh(o));t[Pa](t.multiple?i?new Set(r):r:r[0]),t._assigning=!0,Ao(()=>{t._assigning=!1})}),t[Pa]=Ih(s)},mounted(t,{value:e}){uv(t,e)},beforeUpdate(t,e,n){t[Pa]=Ih(n)},updated(t,{value:e}){t._assigning||uv(t,e)}};function uv(t,e){const n=t.multiple,s=Pe(e);if(!(n&&!s&&!Zh(e))){for(let i=0,r=t.options.length;i<r;i++){const o=t.options[i],l=Sh(o);if(n)if(s){const c=typeof l;c==="string"||c==="number"?o.selected=e.some(d=>String(d)===String(l)):o.selected=kS(e,l)>-1}else o.selected=e.has(l);else if(sd(Sh(o),e)){t.selectedIndex!==i&&(t.selectedIndex=i);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Sh(t){return"_value"in t?t._value:t.value}const q1=["ctrl","shift","alt","meta"],W1={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>q1.some(n=>t[`${n}Key`]&&!e.includes(n))},_r=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=(i,...r)=>{for(let o=0;o<e.length;o++){const l=W1[e[o]];if(l&&l(i,e))return}return t(i,...r)})},z1=fn({patchProp:j1},b1);let hv;function K1(){return hv||(hv=HC(z1))}const G1=(...t)=>{const e=K1().createApp(...t),{mount:n}=e;return e.mount=s=>{const i=Y1(s);if(!i)return;const r=e._component;!Be(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,Q1(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function Q1(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Y1(t){return qt(t)?document.querySelector(t):t}/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let ow;const dd=t=>ow=t,aw=Symbol();function dp(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var ic;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(ic||(ic={}));function X1(){const t=nb(!0),e=t.run(()=>Ae({}));let n=[],s=[];const i=lm({install(r){dd(i),i._a=r,r.provide(aw,i),r.config.globalProperties.$pinia=i,s.forEach(o=>n.push(o)),s=[]},use(r){return this._a?n.push(r):s.push(r),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return i}const lw=()=>{};function dv(t,e,n,s=lw){t.push(e);const i=()=>{const r=t.indexOf(e);r>-1&&(t.splice(r,1),s())};return!n&&sb()&&xS(i),i}function fa(t,...e){t.slice().forEach(n=>{n(...e)})}const J1=t=>t(),fv=Symbol(),If=Symbol();function fp(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,s)=>t.set(s,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const s=e[n],i=t[n];dp(i)&&dp(s)&&t.hasOwnProperty(n)&&!Dt(s)&&!Er(s)?t[n]=fp(i,s):t[n]=s}return t}const Z1=Symbol();function eR(t){return!dp(t)||!Object.prototype.hasOwnProperty.call(t,Z1)}const{assign:cr}=Object;function tR(t){return!!(Dt(t)&&t.effect)}function nR(t,e,n,s){const{state:i,actions:r,getters:o}=e,l=n.state.value[t];let c;function d(){l||(n.state.value[t]=i?i():{});const h=tC(n.state.value[t]);return cr(h,r,Object.keys(o||{}).reduce((p,_)=>(p[_]=lm(Ot(()=>{dd(n);const E=n._s.get(t);return o[_].call(E,E)})),p),{}))}return c=cw(t,d,e,n,s,!0),c}function cw(t,e,n={},s,i,r){let o;const l=cr({actions:{}},n),c={deep:!0};let d,h,p=[],_=[],E;const C=s.state.value[t];!r&&!C&&(s.state.value[t]={}),Ae({});let D;function N(I){let T;d=h=!1,typeof I=="function"?(I(s.state.value[t]),T={type:ic.patchFunction,storeId:t,events:E}):(fp(s.state.value[t],I),T={type:ic.patchObject,payload:I,storeId:t,events:E});const R=D=Symbol();Ao().then(()=>{D===R&&(d=!0)}),h=!0,fa(p,T,s.state.value[t])}const j=r?function(){const{state:T}=n,R=T?T():{};this.$patch(O=>{cr(O,R)})}:lw;function $(){o.stop(),p=[],_=[],s._s.delete(t)}const U=(I,T="")=>{if(fv in I)return I[If]=T,I;const R=function(){dd(s);const O=Array.from(arguments),A=[],S=[];function Le(we){A.push(we)}function ot(we){S.push(we)}fa(_,{args:O,name:R[If],store:se,after:Le,onError:ot});let Me;try{Me=I.apply(this&&this.$id===t?this:se,O)}catch(we){throw fa(S,we),we}return Me instanceof Promise?Me.then(we=>(fa(A,we),we)).catch(we=>(fa(S,we),Promise.reject(we))):(fa(A,Me),Me)};return R[fv]=!0,R[If]=T,R},B={_p:s,$id:t,$onAction:dv.bind(null,_),$patch:N,$reset:j,$subscribe(I,T={}){const R=dv(p,I,T.detached,()=>O()),O=o.run(()=>rs(()=>s.state.value[t],A=>{(T.flush==="sync"?h:d)&&I({storeId:t,type:ic.direct,events:E},A)},cr({},c,T)));return R},$dispose:$},se=Lc(B);s._s.set(t,se);const x=(s._a&&s._a.runWithContext||J1)(()=>s._e.run(()=>(o=nb()).run(()=>e({action:U}))));for(const I in x){const T=x[I];if(Dt(T)&&!tR(T)||Er(T))r||(C&&eR(T)&&(Dt(T)?T.value=C[I]:fp(T,C[I])),s.state.value[t][I]=T);else if(typeof T=="function"){const R=U(T,I);x[I]=R,l.actions[I]=T}}return cr(se,x),cr(rt(se),x),Object.defineProperty(se,"$state",{get:()=>s.state.value[t],set:I=>{N(T=>{cr(T,I)})}}),s._p.forEach(I=>{cr(se,o.run(()=>I({store:se,app:s._a,pinia:s,options:l})))}),C&&r&&n.hydrate&&n.hydrate(se.$state,C),d=!0,h=!0,se}/*! #__NO_SIDE_EFFECTS__ */function mm(t,e,n){let s;const i=typeof e=="function";s=i?n:e;function r(o,l){const c=VC();return o=o||(c?vs(aw,null):null),o&&dd(o),o=ow,o._s.has(t)||(i?cw(t,e,s,o):nR(t,s,o)),o._s.get(t)}return r.$id=t,r}const sR={id:"app-wrapper"},iR={class:"container-fluid p-0 flex-fill"},rR={__name:"App",setup(t){return(e,n)=>{const s=jn("router-view");return G(),Y("div",sR,[n[0]||(n[0]=g("a",{href:"#main-content",class:"skip-link"},"Aller au contenu principal",-1)),g("main",iR,[pe(s)])])}}};/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const _a=typeof document<"u";function uw(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function oR(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&uw(t.default)}const ht=Object.assign;function Sf(t,e){const n={};for(const s in e){const i=e[s];n[s]=Ls(i)?i.map(t):t(i)}return n}const rc=()=>{},Ls=Array.isArray,hw=/#/g,aR=/&/g,lR=/\//g,cR=/=/g,uR=/\?/g,dw=/\+/g,hR=/%5B/g,dR=/%5D/g,fw=/%5E/g,fR=/%60/g,pw=/%7B/g,pR=/%7C/g,mw=/%7D/g,mR=/%20/g;function gm(t){return encodeURI(""+t).replace(pR,"|").replace(hR,"[").replace(dR,"]")}function gR(t){return gm(t).replace(pw,"{").replace(mw,"}").replace(fw,"^")}function pp(t){return gm(t).replace(dw,"%2B").replace(mR,"+").replace(hw,"%23").replace(aR,"%26").replace(fR,"`").replace(pw,"{").replace(mw,"}").replace(fw,"^")}function _R(t){return pp(t).replace(cR,"%3D")}function vR(t){return gm(t).replace(hw,"%23").replace(uR,"%3F")}function yR(t){return t==null?"":vR(t).replace(lR,"%2F")}function wc(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const ER=/\/$/,bR=t=>t.replace(ER,"");function Cf(t,e,n="/"){let s,i={},r="",o="";const l=e.indexOf("#");let c=e.indexOf("?");return l<c&&l>=0&&(c=-1),c>-1&&(s=e.slice(0,c),r=e.slice(c+1,l>-1?l:e.length),i=t(r)),l>-1&&(s=s||e.slice(0,l),o=e.slice(l,e.length)),s=IR(s??e,n),{fullPath:s+(r&&"?")+r+o,path:s,query:i,hash:wc(o)}}function wR(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function pv(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function TR(t,e,n){const s=e.matched.length-1,i=n.matched.length-1;return s>-1&&s===i&&Na(e.matched[s],n.matched[i])&&gw(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Na(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function gw(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!AR(t[n],e[n]))return!1;return!0}function AR(t,e){return Ls(t)?mv(t,e):Ls(e)?mv(e,t):t===e}function mv(t,e){return Ls(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function IR(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),i=s[s.length-1];(i===".."||i===".")&&s.push("");let r=n.length-1,o,l;for(o=0;o<s.length;o++)if(l=s[o],l!==".")if(l==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+s.slice(o).join("/")}const or={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Tc;(function(t){t.pop="pop",t.push="push"})(Tc||(Tc={}));var oc;(function(t){t.back="back",t.forward="forward",t.unknown=""})(oc||(oc={}));function SR(t){if(!t)if(_a){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),bR(t)}const CR=/^[^#]+#/;function RR(t,e){return t.replace(CR,"#")+e}function PR(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const fd=()=>({left:window.scrollX,top:window.scrollY});function OR(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=PR(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function gv(t,e){return(history.state?history.state.position-e:-1)+t}const mp=new Map;function kR(t,e){mp.set(t,e)}function xR(t){const e=mp.get(t);return mp.delete(t),e}let DR=()=>location.protocol+"//"+location.host;function _w(t,e){const{pathname:n,search:s,hash:i}=e,r=t.indexOf("#");if(r>-1){let l=i.includes(t.slice(r))?t.slice(r).length:1,c=i.slice(l);return c[0]!=="/"&&(c="/"+c),pv(c,"")}return pv(n,t)+s+i}function NR(t,e,n,s){let i=[],r=[],o=null;const l=({state:_})=>{const E=_w(t,location),C=n.value,D=e.value;let N=0;if(_){if(n.value=E,e.value=_,o&&o===C){o=null;return}N=D?_.position-D.position:0}else s(E);i.forEach(j=>{j(n.value,C,{delta:N,type:Tc.pop,direction:N?N>0?oc.forward:oc.back:oc.unknown})})};function c(){o=n.value}function d(_){i.push(_);const E=()=>{const C=i.indexOf(_);C>-1&&i.splice(C,1)};return r.push(E),E}function h(){const{history:_}=window;_.state&&_.replaceState(ht({},_.state,{scroll:fd()}),"")}function p(){for(const _ of r)_();r=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:c,listen:d,destroy:p}}function _v(t,e,n,s=!1,i=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:i?fd():null}}function LR(t){const{history:e,location:n}=window,s={value:_w(t,n)},i={value:e.state};i.value||r(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(c,d,h){const p=t.indexOf("#"),_=p>-1?(n.host&&document.querySelector("base")?t:t.slice(p))+c:DR()+t+c;try{e[h?"replaceState":"pushState"](d,"",_),i.value=d}catch(E){console.error(E),n[h?"replace":"assign"](_)}}function o(c,d){const h=ht({},e.state,_v(i.value.back,c,i.value.forward,!0),d,{position:i.value.position});r(c,h,!0),s.value=c}function l(c,d){const h=ht({},i.value,e.state,{forward:c,scroll:fd()});r(h.current,h,!0);const p=ht({},_v(s.value,c,null),{position:h.position+1},d);r(c,p,!1),s.value=c}return{location:s,state:i,push:l,replace:o}}function vv(t){t=SR(t);const e=LR(t),n=NR(t,e.state,e.location,e.replace);function s(r,o=!0){o||n.pauseListeners(),history.go(r)}const i=ht({location:"",base:t,go:s,createHref:RR.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function VR(t){return typeof t=="string"||t&&typeof t=="object"}function vw(t){return typeof t=="string"||typeof t=="symbol"}const yw=Symbol("");var yv;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(yv||(yv={}));function La(t,e){return ht(new Error,{type:t,[yw]:!0},e)}function Ei(t,e){return t instanceof Error&&yw in t&&(e==null||!!(t.type&e))}const Ev="[^/]+?",MR={sensitive:!1,strict:!1,start:!0,end:!0},$R=/[.+*?^${}()[\]/\\]/g;function FR(t,e){const n=ht({},MR,e),s=[];let i=n.start?"^":"";const r=[];for(const d of t){const h=d.length?[]:[90];n.strict&&!d.length&&(i+="/");for(let p=0;p<d.length;p++){const _=d[p];let E=40+(n.sensitive?.25:0);if(_.type===0)p||(i+="/"),i+=_.value.replace($R,"\\$&"),E+=40;else if(_.type===1){const{value:C,repeatable:D,optional:N,regexp:j}=_;r.push({name:C,repeatable:D,optional:N});const $=j||Ev;if($!==Ev){E+=10;try{new RegExp(`(${$})`)}catch(B){throw new Error(`Invalid custom RegExp for param "${C}" (${$}): `+B.message)}}let U=D?`((?:${$})(?:/(?:${$}))*)`:`(${$})`;p||(U=N&&d.length<2?`(?:/${U})`:"/"+U),N&&(U+="?"),i+=U,E+=20,N&&(E+=-8),D&&(E+=-20),$===".*"&&(E+=-50)}h.push(E)}s.push(h)}if(n.strict&&n.end){const d=s.length-1;s[d][s[d].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function l(d){const h=d.match(o),p={};if(!h)return null;for(let _=1;_<h.length;_++){const E=h[_]||"",C=r[_-1];p[C.name]=E&&C.repeatable?E.split("/"):E}return p}function c(d){let h="",p=!1;for(const _ of t){(!p||!h.endsWith("/"))&&(h+="/"),p=!1;for(const E of _)if(E.type===0)h+=E.value;else if(E.type===1){const{value:C,repeatable:D,optional:N}=E,j=C in d?d[C]:"";if(Ls(j)&&!D)throw new Error(`Provided param "${C}" is an array but it is not repeatable (* or + modifiers)`);const $=Ls(j)?j.join("/"):j;if(!$)if(N)_.length<2&&(h.endsWith("/")?h=h.slice(0,-1):p=!0);else throw new Error(`Missing required param "${C}"`);h+=$}}return h||"/"}return{re:o,score:s,keys:r,parse:l,stringify:c}}function UR(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function Ew(t,e){let n=0;const s=t.score,i=e.score;for(;n<s.length&&n<i.length;){const r=UR(s[n],i[n]);if(r)return r;n++}if(Math.abs(i.length-s.length)===1){if(bv(s))return 1;if(bv(i))return-1}return i.length-s.length}function bv(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const jR={type:0,value:""},BR=/[a-zA-Z0-9_]/;function HR(t){if(!t)return[[]];if(t==="/")return[[jR]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(E){throw new Error(`ERR (${n})/"${d}": ${E}`)}let n=0,s=n;const i=[];let r;function o(){r&&i.push(r),r=[]}let l=0,c,d="",h="";function p(){d&&(n===0?r.push({type:0,value:d}):n===1||n===2||n===3?(r.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:d,regexp:h,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),d="")}function _(){d+=c}for(;l<t.length;){if(c=t[l++],c==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:c==="/"?(d&&p(),o()):c===":"?(p(),n=1):_();break;case 4:_(),n=s;break;case 1:c==="("?n=2:BR.test(c)?_():(p(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case 2:c===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+c:n=3:h+=c;break;case 3:p(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&l--,h="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${d}"`),p(),o(),i}function qR(t,e,n){const s=FR(HR(t.path),n),i=ht(s,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function WR(t,e){const n=[],s=new Map;e=Iv({strict:!1,end:!0,sensitive:!1},e);function i(p){return s.get(p)}function r(p,_,E){const C=!E,D=Tv(p);D.aliasOf=E&&E.record;const N=Iv(e,p),j=[D];if("alias"in p){const B=typeof p.alias=="string"?[p.alias]:p.alias;for(const se of B)j.push(Tv(ht({},D,{components:E?E.record.components:D.components,path:se,aliasOf:E?E.record:D})))}let $,U;for(const B of j){const{path:se}=B;if(_&&se[0]!=="/"){const re=_.record.path,x=re[re.length-1]==="/"?"":"/";B.path=_.record.path+(se&&x+se)}if($=qR(B,_,N),E?E.alias.push($):(U=U||$,U!==$&&U.alias.push($),C&&p.name&&!Av($)&&o(p.name)),bw($)&&c($),D.children){const re=D.children;for(let x=0;x<re.length;x++)r(re[x],$,E&&E.children[x])}E=E||$}return U?()=>{o(U)}:rc}function o(p){if(vw(p)){const _=s.get(p);_&&(s.delete(p),n.splice(n.indexOf(_),1),_.children.forEach(o),_.alias.forEach(o))}else{const _=n.indexOf(p);_>-1&&(n.splice(_,1),p.record.name&&s.delete(p.record.name),p.children.forEach(o),p.alias.forEach(o))}}function l(){return n}function c(p){const _=GR(p,n);n.splice(_,0,p),p.record.name&&!Av(p)&&s.set(p.record.name,p)}function d(p,_){let E,C={},D,N;if("name"in p&&p.name){if(E=s.get(p.name),!E)throw La(1,{location:p});N=E.record.name,C=ht(wv(_.params,E.keys.filter(U=>!U.optional).concat(E.parent?E.parent.keys.filter(U=>U.optional):[]).map(U=>U.name)),p.params&&wv(p.params,E.keys.map(U=>U.name))),D=E.stringify(C)}else if(p.path!=null)D=p.path,E=n.find(U=>U.re.test(D)),E&&(C=E.parse(D),N=E.record.name);else{if(E=_.name?s.get(_.name):n.find(U=>U.re.test(_.path)),!E)throw La(1,{location:p,currentLocation:_});N=E.record.name,C=ht({},_.params,p.params),D=E.stringify(C)}const j=[];let $=E;for(;$;)j.unshift($.record),$=$.parent;return{name:N,path:D,params:C,matched:j,meta:KR(j)}}t.forEach(p=>r(p));function h(){n.length=0,s.clear()}return{addRoute:r,resolve:d,removeRoute:o,clearRoutes:h,getRoutes:l,getRecordMatcher:i}}function wv(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function Tv(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:zR(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function zR(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function Av(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function KR(t){return t.reduce((e,n)=>ht(e,n.meta),{})}function Iv(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}function GR(t,e){let n=0,s=e.length;for(;n!==s;){const r=n+s>>1;Ew(t,e[r])<0?s=r:n=r+1}const i=QR(t);return i&&(s=e.lastIndexOf(i,s-1)),s}function QR(t){let e=t;for(;e=e.parent;)if(bw(e)&&Ew(t,e)===0)return e}function bw({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function YR(t){const e={};if(t===""||t==="?")return e;const s=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<s.length;++i){const r=s[i].replace(dw," "),o=r.indexOf("="),l=wc(o<0?r:r.slice(0,o)),c=o<0?null:wc(r.slice(o+1));if(l in e){let d=e[l];Ls(d)||(d=e[l]=[d]),d.push(c)}else e[l]=c}return e}function Sv(t){let e="";for(let n in t){const s=t[n];if(n=_R(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(Ls(s)?s.map(r=>r&&pp(r)):[s&&pp(s)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+n,r!=null&&(e+="="+r))})}return e}function XR(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=Ls(s)?s.map(i=>i==null?null:""+i):s==null?s:""+s)}return e}const JR=Symbol(""),Cv=Symbol(""),pd=Symbol(""),_m=Symbol(""),gp=Symbol("");function Bl(){let t=[];function e(s){return t.push(s),()=>{const i=t.indexOf(s);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function fr(t,e,n,s,i,r=o=>o()){const o=s&&(s.enterCallbacks[i]=s.enterCallbacks[i]||[]);return()=>new Promise((l,c)=>{const d=_=>{_===!1?c(La(4,{from:n,to:e})):_ instanceof Error?c(_):VR(_)?c(La(2,{from:e,to:_})):(o&&s.enterCallbacks[i]===o&&typeof _=="function"&&o.push(_),l())},h=r(()=>t.call(s&&s.instances[i],e,n,d));let p=Promise.resolve(h);t.length<3&&(p=p.then(d)),p.catch(_=>c(_))})}function Rf(t,e,n,s,i=r=>r()){const r=[];for(const o of t)for(const l in o.components){let c=o.components[l];if(!(e!=="beforeRouteEnter"&&!o.instances[l]))if(uw(c)){const h=(c.__vccOpts||c)[e];h&&r.push(fr(h,n,s,o,l,i))}else{let d=c();r.push(()=>d.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const p=oR(h)?h.default:h;o.mods[l]=h,o.components[l]=p;const E=(p.__vccOpts||p)[e];return E&&fr(E,n,s,o,l,i)()}))}}return r}function Rv(t){const e=vs(pd),n=vs(_m),s=Ot(()=>{const c=Ne(t.to);return e.resolve(c)}),i=Ot(()=>{const{matched:c}=s.value,{length:d}=c,h=c[d-1],p=n.matched;if(!h||!p.length)return-1;const _=p.findIndex(Na.bind(null,h));if(_>-1)return _;const E=Pv(c[d-2]);return d>1&&Pv(h)===E&&p[p.length-1].path!==E?p.findIndex(Na.bind(null,c[d-2])):_}),r=Ot(()=>i.value>-1&&sP(n.params,s.value.params)),o=Ot(()=>i.value>-1&&i.value===n.matched.length-1&&gw(n.params,s.value.params));function l(c={}){if(nP(c)){const d=e[Ne(t.replace)?"replace":"push"](Ne(t.to)).catch(rc);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>d),d}return Promise.resolve()}return{route:s,href:Ot(()=>s.value.href),isActive:r,isExactActive:o,navigate:l}}function ZR(t){return t.length===1?t[0]:t}const eP=Db({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Rv,setup(t,{slots:e}){const n=Lc(Rv(t)),{options:s}=vs(pd),i=Ot(()=>({[Ov(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Ov(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=e.default&&ZR(e.default(n));return t.custom?r:pm("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},r)}}}),tP=eP;function nP(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function sP(t,e){for(const n in e){const s=e[n],i=t[n];if(typeof s=="string"){if(s!==i)return!1}else if(!Ls(i)||i.length!==s.length||s.some((r,o)=>r!==i[o]))return!1}return!0}function Pv(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Ov=(t,e,n)=>t??e??n,iP=Db({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=vs(gp),i=Ot(()=>t.route||s.value),r=vs(Cv,0),o=Ot(()=>{let d=Ne(r);const{matched:h}=i.value;let p;for(;(p=h[d])&&!p.components;)d++;return d}),l=Ot(()=>i.value.matched[o.value]);Xu(Cv,Ot(()=>o.value+1)),Xu(JR,l),Xu(gp,i);const c=Ae();return rs(()=>[c.value,l.value,t.name],([d,h,p],[_,E,C])=>{h&&(h.instances[p]=d,E&&E!==h&&d&&d===_&&(h.leaveGuards.size||(h.leaveGuards=E.leaveGuards),h.updateGuards.size||(h.updateGuards=E.updateGuards))),d&&h&&(!E||!Na(h,E)||!_)&&(h.enterCallbacks[p]||[]).forEach(D=>D(d))},{flush:"post"}),()=>{const d=i.value,h=t.name,p=l.value,_=p&&p.components[h];if(!_)return kv(n.default,{Component:_,route:d});const E=p.props[h],C=E?E===!0?d.params:typeof E=="function"?E(d):E:null,N=pm(_,ht({},C,e,{onVnodeUnmounted:j=>{j.component.isUnmounted&&(p.instances[h]=null)},ref:c}));return kv(n.default,{Component:N,route:d})||N}}});function kv(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const rP=iP;function oP(t){const e=WR(t.routes,t),n=t.parseQuery||YR,s=t.stringifyQuery||Sv,i=t.history,r=Bl(),o=Bl(),l=Bl(),c=JS(or);let d=or;_a&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=Sf.bind(null,z=>""+z),p=Sf.bind(null,yR),_=Sf.bind(null,wc);function E(z,W){let ce,ve;return vw(z)?(ce=e.getRecordMatcher(z),ve=W):ve=z,e.addRoute(ve,ce)}function C(z){const W=e.getRecordMatcher(z);W&&e.removeRoute(W)}function D(){return e.getRoutes().map(z=>z.record)}function N(z){return!!e.getRecordMatcher(z)}function j(z,W){if(W=ht({},W||c.value),typeof z=="string"){const M=Cf(n,z,W.path),K=e.resolve({path:M.path},W),Q=i.createHref(M.fullPath);return ht(M,K,{params:_(K.params),hash:wc(M.hash),redirectedFrom:void 0,href:Q})}let ce;if(z.path!=null)ce=ht({},z,{path:Cf(n,z.path,W.path).path});else{const M=ht({},z.params);for(const K in M)M[K]==null&&delete M[K];ce=ht({},z,{params:p(M)}),W.params=p(W.params)}const ve=e.resolve(ce,W),Qe=z.hash||"";ve.params=h(_(ve.params));const P=wR(s,ht({},z,{hash:gR(Qe),path:ve.path})),k=i.createHref(P);return ht({fullPath:P,hash:Qe,query:s===Sv?XR(z.query):z.query||{}},ve,{redirectedFrom:void 0,href:k})}function $(z){return typeof z=="string"?Cf(n,z,c.value.path):ht({},z)}function U(z,W){if(d!==z)return La(8,{from:W,to:z})}function B(z){return x(z)}function se(z){return B(ht($(z),{replace:!0}))}function re(z){const W=z.matched[z.matched.length-1];if(W&&W.redirect){const{redirect:ce}=W;let ve=typeof ce=="function"?ce(z):ce;return typeof ve=="string"&&(ve=ve.includes("?")||ve.includes("#")?ve=$(ve):{path:ve},ve.params={}),ht({query:z.query,hash:z.hash,params:ve.path!=null?{}:z.params},ve)}}function x(z,W){const ce=d=j(z),ve=c.value,Qe=z.state,P=z.force,k=z.replace===!0,M=re(ce);if(M)return x(ht($(M),{state:typeof M=="object"?ht({},Qe,M.state):Qe,force:P,replace:k}),W||ce);const K=ce;K.redirectedFrom=W;let Q;return!P&&TR(s,ve,ce)&&(Q=La(16,{to:K,from:ve}),zt(ve,ve,!0,!1)),(Q?Promise.resolve(Q):R(K,ve)).catch(J=>Ei(J)?Ei(J,2)?J:X(J):qe(J,K,ve)).then(J=>{if(J){if(Ei(J,2))return x(ht({replace:k},$(J.to),{state:typeof J.to=="object"?ht({},Qe,J.to.state):Qe,force:P}),W||K)}else J=A(K,ve,!0,k,Qe);return O(K,ve,J),J})}function I(z,W){const ce=U(z,W);return ce?Promise.reject(ce):Promise.resolve()}function T(z){const W=Ct.values().next().value;return W&&typeof W.runWithContext=="function"?W.runWithContext(z):z()}function R(z,W){let ce;const[ve,Qe,P]=aP(z,W);ce=Rf(ve.reverse(),"beforeRouteLeave",z,W);for(const M of ve)M.leaveGuards.forEach(K=>{ce.push(fr(K,z,W))});const k=I.bind(null,z,W);return ce.push(k),ct(ce).then(()=>{ce=[];for(const M of r.list())ce.push(fr(M,z,W));return ce.push(k),ct(ce)}).then(()=>{ce=Rf(Qe,"beforeRouteUpdate",z,W);for(const M of Qe)M.updateGuards.forEach(K=>{ce.push(fr(K,z,W))});return ce.push(k),ct(ce)}).then(()=>{ce=[];for(const M of P)if(M.beforeEnter)if(Ls(M.beforeEnter))for(const K of M.beforeEnter)ce.push(fr(K,z,W));else ce.push(fr(M.beforeEnter,z,W));return ce.push(k),ct(ce)}).then(()=>(z.matched.forEach(M=>M.enterCallbacks={}),ce=Rf(P,"beforeRouteEnter",z,W,T),ce.push(k),ct(ce))).then(()=>{ce=[];for(const M of o.list())ce.push(fr(M,z,W));return ce.push(k),ct(ce)}).catch(M=>Ei(M,8)?M:Promise.reject(M))}function O(z,W,ce){l.list().forEach(ve=>T(()=>ve(z,W,ce)))}function A(z,W,ce,ve,Qe){const P=U(z,W);if(P)return P;const k=W===or,M=_a?history.state:{};ce&&(ve||k?i.replace(z.fullPath,ht({scroll:k&&M&&M.scroll},Qe)):i.push(z.fullPath,Qe)),c.value=z,zt(z,W,ce,k),X()}let S;function Le(){S||(S=i.listen((z,W,ce)=>{if(!Rt.listening)return;const ve=j(z),Qe=re(ve);if(Qe){x(ht(Qe,{replace:!0,force:!0}),ve).catch(rc);return}d=ve;const P=c.value;_a&&kR(gv(P.fullPath,ce.delta),fd()),R(ve,P).catch(k=>Ei(k,12)?k:Ei(k,2)?(x(ht($(k.to),{force:!0}),ve).then(M=>{Ei(M,20)&&!ce.delta&&ce.type===Tc.pop&&i.go(-1,!1)}).catch(rc),Promise.reject()):(ce.delta&&i.go(-ce.delta,!1),qe(k,ve,P))).then(k=>{k=k||A(ve,P,!1),k&&(ce.delta&&!Ei(k,8)?i.go(-ce.delta,!1):ce.type===Tc.pop&&Ei(k,20)&&i.go(-1,!1)),O(ve,P,k)}).catch(rc)}))}let ot=Bl(),Me=Bl(),we;function qe(z,W,ce){X(z);const ve=Me.list();return ve.length?ve.forEach(Qe=>Qe(z,W,ce)):console.error(z),Promise.reject(z)}function kt(){return we&&c.value!==or?Promise.resolve():new Promise((z,W)=>{ot.add([z,W])})}function X(z){return we||(we=!z,Le(),ot.list().forEach(([W,ce])=>z?ce(z):W()),ot.reset()),z}function zt(z,W,ce,ve){const{scrollBehavior:Qe}=t;if(!_a||!Qe)return Promise.resolve();const P=!ce&&xR(gv(z.fullPath,0))||(ve||!ce)&&history.state&&history.state.scroll||null;return Ao().then(()=>Qe(z,W,P)).then(k=>k&&OR(k)).catch(k=>qe(k,z,W))}const at=z=>i.go(z);let lt;const Ct=new Set,Rt={currentRoute:c,listening:!0,addRoute:E,removeRoute:C,clearRoutes:e.clearRoutes,hasRoute:N,getRoutes:D,resolve:j,options:t,push:B,replace:se,go:at,back:()=>at(-1),forward:()=>at(1),beforeEach:r.add,beforeResolve:o.add,afterEach:l.add,onError:Me.add,isReady:kt,install(z){const W=this;z.component("RouterLink",tP),z.component("RouterView",rP),z.config.globalProperties.$router=W,Object.defineProperty(z.config.globalProperties,"$route",{enumerable:!0,get:()=>Ne(c)}),_a&&!lt&&c.value===or&&(lt=!0,B(i.location).catch(Qe=>{}));const ce={};for(const Qe in or)Object.defineProperty(ce,Qe,{get:()=>c.value[Qe],enumerable:!0});z.provide(pd,W),z.provide(_m,vb(ce)),z.provide(gp,c);const ve=z.unmount;Ct.add(z),z.unmount=function(){Ct.delete(z),Ct.size<1&&(d=or,S&&S(),S=null,c.value=or,lt=!1,we=!1),ve()}}};function ct(z){return z.reduce((W,ce)=>W.then(()=>T(ce)),Promise.resolve())}return Rt}function aP(t,e){const n=[],s=[],i=[],r=Math.max(e.matched.length,t.matched.length);for(let o=0;o<r;o++){const l=e.matched[o];l&&(t.matched.find(d=>Na(d,l))?s.push(l):n.push(l));const c=t.matched[o];c&&(e.matched.find(d=>Na(d,c))||i.push(c))}return[n,s,i]}function $c(){return vs(pd)}function vm(t){return vs(_m)}const lP=()=>{};var xv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let i=t.charCodeAt(s);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},cP=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const i=t[n++];if(i<128)e[s++]=String.fromCharCode(i);else if(i>191&&i<224){const r=t[n++];e[s++]=String.fromCharCode((i&31)<<6|r&63)}else if(i>239&&i<365){const r=t[n++],o=t[n++],l=t[n++],c=((i&7)<<18|(r&63)<<12|(o&63)<<6|l&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const r=t[n++],o=t[n++];e[s++]=String.fromCharCode((i&15)<<12|(r&63)<<6|o&63)}}return e.join("")},Tw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<t.length;i+=3){const r=t[i],o=i+1<t.length,l=o?t[i+1]:0,c=i+2<t.length,d=c?t[i+2]:0,h=r>>2,p=(r&3)<<4|l>>4;let _=(l&15)<<2|d>>6,E=d&63;c||(E=64,o||(_=64)),s.push(n[h],n[p],n[_],n[E])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ww(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):cP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<t.length;){const r=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,r==null||l==null||d==null||p==null)throw new uP;const _=r<<2|l>>4;if(s.push(_),d!==64){const E=l<<4&240|d>>2;if(s.push(E),p!==64){const C=d<<6&192|p;s.push(C)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class uP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hP=function(t){const e=ww(t);return Tw.encodeByteArray(e,!0)},Ch=function(t){return hP(t).replace(/\./g,"")},Aw=function(t){try{return Tw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP=()=>dP().__FIREBASE_DEFAULTS__,pP=()=>{if(typeof process>"u"||typeof xv>"u")return;const t=xv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},mP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Aw(t[1]);return e&&JSON.parse(e)},md=()=>{try{return lP()||fP()||pP()||mP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Iw=t=>{var e,n;return(n=(e=md())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},gP=t=>{const e=Iw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Sw=()=>{var t;return(t=md())===null||t===void 0?void 0:t.config},Cw=t=>{var e;return(e=md())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(t){return t.endsWith(".cloudworkstations.dev")}async function Rw(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",i=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ch(JSON.stringify(n)),Ch(JSON.stringify(o)),""].join(".")}const ac={};function yP(){const t={prod:[],emulator:[]};for(const e of Object.keys(ac))ac[e]?t.emulator.push(e):t.prod.push(e);return t}function EP(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Dv=!1;function Pw(t,e){if(typeof window>"u"||typeof document>"u"||!Za(window.location.host)||ac[t]===e||ac[t]||Dv)return;ac[t]=e;function n(_){return`__firebase__banner__${_}`}const s="__firebase__banner",r=yP().prod.length>0;function o(){const _=document.getElementById(s);_&&_.remove()}function l(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function c(_,E){_.setAttribute("width","24"),_.setAttribute("id",E),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function d(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{Dv=!0,o()},_}function h(_,E){_.setAttribute("id",E),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function p(){const _=EP(s),E=n("text"),C=document.getElementById(E)||document.createElement("span"),D=n("learnmore"),N=document.getElementById(D)||document.createElement("a"),j=n("preprendIcon"),$=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const U=_.element;l(U),h(N,D);const B=d();c($,j),U.append($,C,N,B),document.body.appendChild(U)}r?(C.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Sn())}function wP(){var t;const e=(t=md())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function TP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function AP(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function IP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function SP(){const t=Sn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function CP(){return!wP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function RP(){try{return typeof indexedDB=="object"}catch{return!1}}function PP(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var r;e(((r=i.error)===null||r===void 0?void 0:r.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP="FirebaseError";class Ui extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=OP,Object.setPrototypeOf(this,Ui.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fc.prototype.create)}}class Fc{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},i=`${this.service}/${e}`,r=this.errors[e],o=r?kP(r,s):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new Ui(i,l,s)}}function kP(t,e){return t.replace(xP,(n,s)=>{const i=e[s];return i!=null?String(i):`<${s}?>`})}const xP=/\{\$([^}]+)}/g;function DP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ki(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const i of n){if(!s.includes(i))return!1;const r=t[i],o=e[i];if(Nv(r)&&Nv(o)){if(!ki(r,o))return!1}else if(r!==o)return!1}for(const i of s)if(!n.includes(i))return!1;return!0}function Nv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function zl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[i,r]=s.split("=");e[decodeURIComponent(i)]=decodeURIComponent(r)}}),e}function Kl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function NP(t,e){const n=new LP(t,e);return n.subscribe.bind(n)}class LP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let i;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");VP(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:s},i.next===void 0&&(i.next=Pf),i.error===void 0&&(i.error=Pf),i.complete===void 0&&(i.complete=Pf);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function VP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Pf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(t){return t&&t._delegate?t._delegate:t}class Po{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new _P;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(FP(e))try{this.getOrInitializeService({instanceIdentifier:go})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:i});s.resolve(r)}catch{}}}}clearInstance(e=go){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=go){return this.instances.has(e)}getOptions(e=go){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[r,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(r);s===l&&o.resolve(i)}return i}onInit(e,n){var s;const i=this.normalizeInstanceIdentifier(n),r=(s=this.onInitCallbacks.get(i))!==null&&s!==void 0?s:new Set;r.add(e),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&e(o,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const i of s)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:$P(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=go){return this.component?this.component.multipleInstances?e:go:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $P(t){return t===go?void 0:t}function FP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new MP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ze||(Ze={}));const jP={debug:Ze.DEBUG,verbose:Ze.VERBOSE,info:Ze.INFO,warn:Ze.WARN,error:Ze.ERROR,silent:Ze.SILENT},BP=Ze.INFO,HP={[Ze.DEBUG]:"log",[Ze.VERBOSE]:"log",[Ze.INFO]:"info",[Ze.WARN]:"warn",[Ze.ERROR]:"error"},qP=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),i=HP[e];if(i)console[i](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ym{constructor(e){this.name=e,this._logLevel=BP,this._logHandler=qP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ze.DEBUG,...e),this._logHandler(this,Ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ze.VERBOSE,...e),this._logHandler(this,Ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ze.INFO,...e),this._logHandler(this,Ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ze.WARN,...e),this._logHandler(this,Ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ze.ERROR,...e),this._logHandler(this,Ze.ERROR,...e)}}const WP=(t,e)=>e.some(n=>t instanceof n);let Lv,Vv;function zP(){return Lv||(Lv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function KP(){return Vv||(Vv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ow=new WeakMap,_p=new WeakMap,kw=new WeakMap,Of=new WeakMap,Em=new WeakMap;function GP(t){const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",o)},r=()=>{n(br(t.result)),i()},o=()=>{s(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Ow.set(n,t)}).catch(()=>{}),Em.set(e,t),e}function QP(t){if(_p.has(t))return;const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",o),t.removeEventListener("abort",o)},r=()=>{n(),i()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",o),t.addEventListener("abort",o)});_p.set(t,e)}let vp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return _p.get(t);if(e==="objectStoreNames")return t.objectStoreNames||kw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return br(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function YP(t){vp=t(vp)}function XP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(kf(this),e,...n);return kw.set(s,e.sort?e.sort():[e]),br(s)}:KP().includes(t)?function(...e){return t.apply(kf(this),e),br(Ow.get(this))}:function(...e){return br(t.apply(kf(this),e))}}function JP(t){return typeof t=="function"?XP(t):(t instanceof IDBTransaction&&QP(t),WP(t,zP())?new Proxy(t,vp):t)}function br(t){if(t instanceof IDBRequest)return GP(t);if(Of.has(t))return Of.get(t);const e=JP(t);return e!==t&&(Of.set(t,e),Em.set(e,t)),e}const kf=t=>Em.get(t);function ZP(t,e,{blocked:n,upgrade:s,blocking:i,terminated:r}={}){const o=indexedDB.open(t,e),l=br(o);return s&&o.addEventListener("upgradeneeded",c=>{s(br(o.result),c.oldVersion,c.newVersion,br(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{r&&c.addEventListener("close",()=>r()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const eO=["get","getKey","getAll","getAllKeys","count"],tO=["put","add","delete","clear"],xf=new Map;function Mv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(xf.get(e))return xf.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,i=tO.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(i||eO.includes(n)))return;const r=async function(o,...l){const c=this.transaction(o,i?"readwrite":"readonly");let d=c.store;return s&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),i&&c.done]))[0]};return xf.set(e,r),r}YP(t=>({...t,get:(e,n,s)=>Mv(e,n)||t.get(e,n,s),has:(e,n)=>!!Mv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(sO(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function sO(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const yp="@firebase/app",$v="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi=new ym("@firebase/app"),iO="@firebase/app-compat",rO="@firebase/analytics-compat",oO="@firebase/analytics",aO="@firebase/app-check-compat",lO="@firebase/app-check",cO="@firebase/auth",uO="@firebase/auth-compat",hO="@firebase/database",dO="@firebase/data-connect",fO="@firebase/database-compat",pO="@firebase/functions",mO="@firebase/functions-compat",gO="@firebase/installations",_O="@firebase/installations-compat",vO="@firebase/messaging",yO="@firebase/messaging-compat",EO="@firebase/performance",bO="@firebase/performance-compat",wO="@firebase/remote-config",TO="@firebase/remote-config-compat",AO="@firebase/storage",IO="@firebase/storage-compat",SO="@firebase/firestore",CO="@firebase/ai",RO="@firebase/firestore-compat",PO="firebase",OO="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ep="[DEFAULT]",kO={[yp]:"fire-core",[iO]:"fire-core-compat",[oO]:"fire-analytics",[rO]:"fire-analytics-compat",[lO]:"fire-app-check",[aO]:"fire-app-check-compat",[cO]:"fire-auth",[uO]:"fire-auth-compat",[hO]:"fire-rtdb",[dO]:"fire-data-connect",[fO]:"fire-rtdb-compat",[pO]:"fire-fn",[mO]:"fire-fn-compat",[gO]:"fire-iid",[_O]:"fire-iid-compat",[vO]:"fire-fcm",[yO]:"fire-fcm-compat",[EO]:"fire-perf",[bO]:"fire-perf-compat",[wO]:"fire-rc",[TO]:"fire-rc-compat",[AO]:"fire-gcs",[IO]:"fire-gcs-compat",[SO]:"fire-fst",[RO]:"fire-fst-compat",[CO]:"fire-vertex","fire-js":"fire-js",[PO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rh=new Map,xO=new Map,bp=new Map;function Fv(t,e){try{t.container.addComponent(e)}catch(n){xi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Va(t){const e=t.name;if(bp.has(e))return xi.debug(`There were multiple attempts to register component ${e}.`),!1;bp.set(e,t);for(const n of Rh.values())Fv(n,t);for(const n of xO.values())Fv(n,t);return!0}function bm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ns(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wr=new Fc("app","Firebase",DO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Po("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el=OO;function xw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Ep,automaticDataCollectionEnabled:!0},e),i=s.name;if(typeof i!="string"||!i)throw wr.create("bad-app-name",{appName:String(i)});if(n||(n=Sw()),!n)throw wr.create("no-options");const r=Rh.get(i);if(r){if(ki(n,r.options)&&ki(s,r.config))return r;throw wr.create("duplicate-app",{appName:i})}const o=new UP(i);for(const c of bp.values())o.addComponent(c);const l=new NO(n,s,o);return Rh.set(i,l),l}function Dw(t=Ep){const e=Rh.get(t);if(!e&&t===Ep&&Sw())return xw();if(!e)throw wr.create("no-app",{appName:t});return e}function Tr(t,e,n){var s;let i=(s=kO[t])!==null&&s!==void 0?s:t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const l=[`Unable to register library "${i}" with version "${e}":`];r&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xi.warn(l.join(" "));return}Va(new Po(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO="firebase-heartbeat-database",VO=1,Ac="firebase-heartbeat-store";let Df=null;function Nw(){return Df||(Df=ZP(LO,VO,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ac)}catch(n){console.warn(n)}}}}).catch(t=>{throw wr.create("idb-open",{originalErrorMessage:t.message})})),Df}async function MO(t){try{const n=(await Nw()).transaction(Ac),s=await n.objectStore(Ac).get(Lw(t));return await n.done,s}catch(e){if(e instanceof Ui)xi.warn(e.message);else{const n=wr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xi.warn(n.message)}}}async function Uv(t,e){try{const s=(await Nw()).transaction(Ac,"readwrite");await s.objectStore(Ac).put(e,Lw(t)),await s.done}catch(n){if(n instanceof Ui)xi.warn(n.message);else{const s=wr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});xi.warn(s.message)}}}function Lw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O=1024,FO=30;class UO{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new BO(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=jv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats.length>FO){const o=HO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){xi.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=jv(),{heartbeatsToSend:s,unsentEntries:i}=jO(this._heartbeatsCache.heartbeats),r=Ch(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return xi.warn(n),""}}}function jv(){return new Date().toISOString().substring(0,10)}function jO(t,e=$O){const n=[];let s=t.slice();for(const i of t){const r=n.find(o=>o.agent===i.agent);if(r){if(r.dates.push(i.date),Bv(n)>e){r.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Bv(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class BO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return RP()?PP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await MO(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Uv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Uv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Bv(t){return Ch(JSON.stringify({version:2,heartbeats:t})).length}function HO(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qO(t){Va(new Po("platform-logger",e=>new nO(e),"PRIVATE")),Va(new Po("heartbeat",e=>new UO(e),"PRIVATE")),Tr(yp,$v,t),Tr(yp,$v,"esm2017"),Tr("fire-js","")}qO("");var Hv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ar,Vw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,I){function T(){}T.prototype=I.prototype,x.D=I.prototype,x.prototype=new T,x.prototype.constructor=x,x.C=function(R,O,A){for(var S=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)S[Le-2]=arguments[Le];return I.prototype[O].apply(R,S)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(x,I,T){T||(T=0);var R=Array(16);if(typeof I=="string")for(var O=0;16>O;++O)R[O]=I.charCodeAt(T++)|I.charCodeAt(T++)<<8|I.charCodeAt(T++)<<16|I.charCodeAt(T++)<<24;else for(O=0;16>O;++O)R[O]=I[T++]|I[T++]<<8|I[T++]<<16|I[T++]<<24;I=x.g[0],T=x.g[1],O=x.g[2];var A=x.g[3],S=I+(A^T&(O^A))+R[0]+3614090360&4294967295;I=T+(S<<7&4294967295|S>>>25),S=A+(O^I&(T^O))+R[1]+3905402710&4294967295,A=I+(S<<12&4294967295|S>>>20),S=O+(T^A&(I^T))+R[2]+606105819&4294967295,O=A+(S<<17&4294967295|S>>>15),S=T+(I^O&(A^I))+R[3]+3250441966&4294967295,T=O+(S<<22&4294967295|S>>>10),S=I+(A^T&(O^A))+R[4]+4118548399&4294967295,I=T+(S<<7&4294967295|S>>>25),S=A+(O^I&(T^O))+R[5]+1200080426&4294967295,A=I+(S<<12&4294967295|S>>>20),S=O+(T^A&(I^T))+R[6]+2821735955&4294967295,O=A+(S<<17&4294967295|S>>>15),S=T+(I^O&(A^I))+R[7]+4249261313&4294967295,T=O+(S<<22&4294967295|S>>>10),S=I+(A^T&(O^A))+R[8]+1770035416&4294967295,I=T+(S<<7&4294967295|S>>>25),S=A+(O^I&(T^O))+R[9]+2336552879&4294967295,A=I+(S<<12&4294967295|S>>>20),S=O+(T^A&(I^T))+R[10]+4294925233&4294967295,O=A+(S<<17&4294967295|S>>>15),S=T+(I^O&(A^I))+R[11]+2304563134&4294967295,T=O+(S<<22&4294967295|S>>>10),S=I+(A^T&(O^A))+R[12]+1804603682&4294967295,I=T+(S<<7&4294967295|S>>>25),S=A+(O^I&(T^O))+R[13]+4254626195&4294967295,A=I+(S<<12&4294967295|S>>>20),S=O+(T^A&(I^T))+R[14]+2792965006&4294967295,O=A+(S<<17&4294967295|S>>>15),S=T+(I^O&(A^I))+R[15]+1236535329&4294967295,T=O+(S<<22&4294967295|S>>>10),S=I+(O^A&(T^O))+R[1]+4129170786&4294967295,I=T+(S<<5&4294967295|S>>>27),S=A+(T^O&(I^T))+R[6]+3225465664&4294967295,A=I+(S<<9&4294967295|S>>>23),S=O+(I^T&(A^I))+R[11]+643717713&4294967295,O=A+(S<<14&4294967295|S>>>18),S=T+(A^I&(O^A))+R[0]+3921069994&4294967295,T=O+(S<<20&4294967295|S>>>12),S=I+(O^A&(T^O))+R[5]+3593408605&4294967295,I=T+(S<<5&4294967295|S>>>27),S=A+(T^O&(I^T))+R[10]+38016083&4294967295,A=I+(S<<9&4294967295|S>>>23),S=O+(I^T&(A^I))+R[15]+3634488961&4294967295,O=A+(S<<14&4294967295|S>>>18),S=T+(A^I&(O^A))+R[4]+3889429448&4294967295,T=O+(S<<20&4294967295|S>>>12),S=I+(O^A&(T^O))+R[9]+568446438&4294967295,I=T+(S<<5&4294967295|S>>>27),S=A+(T^O&(I^T))+R[14]+3275163606&4294967295,A=I+(S<<9&4294967295|S>>>23),S=O+(I^T&(A^I))+R[3]+4107603335&4294967295,O=A+(S<<14&4294967295|S>>>18),S=T+(A^I&(O^A))+R[8]+1163531501&4294967295,T=O+(S<<20&4294967295|S>>>12),S=I+(O^A&(T^O))+R[13]+2850285829&4294967295,I=T+(S<<5&4294967295|S>>>27),S=A+(T^O&(I^T))+R[2]+4243563512&4294967295,A=I+(S<<9&4294967295|S>>>23),S=O+(I^T&(A^I))+R[7]+1735328473&4294967295,O=A+(S<<14&4294967295|S>>>18),S=T+(A^I&(O^A))+R[12]+2368359562&4294967295,T=O+(S<<20&4294967295|S>>>12),S=I+(T^O^A)+R[5]+4294588738&4294967295,I=T+(S<<4&4294967295|S>>>28),S=A+(I^T^O)+R[8]+2272392833&4294967295,A=I+(S<<11&4294967295|S>>>21),S=O+(A^I^T)+R[11]+1839030562&4294967295,O=A+(S<<16&4294967295|S>>>16),S=T+(O^A^I)+R[14]+4259657740&4294967295,T=O+(S<<23&4294967295|S>>>9),S=I+(T^O^A)+R[1]+2763975236&4294967295,I=T+(S<<4&4294967295|S>>>28),S=A+(I^T^O)+R[4]+1272893353&4294967295,A=I+(S<<11&4294967295|S>>>21),S=O+(A^I^T)+R[7]+4139469664&4294967295,O=A+(S<<16&4294967295|S>>>16),S=T+(O^A^I)+R[10]+3200236656&4294967295,T=O+(S<<23&4294967295|S>>>9),S=I+(T^O^A)+R[13]+681279174&4294967295,I=T+(S<<4&4294967295|S>>>28),S=A+(I^T^O)+R[0]+3936430074&4294967295,A=I+(S<<11&4294967295|S>>>21),S=O+(A^I^T)+R[3]+3572445317&4294967295,O=A+(S<<16&4294967295|S>>>16),S=T+(O^A^I)+R[6]+76029189&4294967295,T=O+(S<<23&4294967295|S>>>9),S=I+(T^O^A)+R[9]+3654602809&4294967295,I=T+(S<<4&4294967295|S>>>28),S=A+(I^T^O)+R[12]+3873151461&4294967295,A=I+(S<<11&4294967295|S>>>21),S=O+(A^I^T)+R[15]+530742520&4294967295,O=A+(S<<16&4294967295|S>>>16),S=T+(O^A^I)+R[2]+3299628645&4294967295,T=O+(S<<23&4294967295|S>>>9),S=I+(O^(T|~A))+R[0]+4096336452&4294967295,I=T+(S<<6&4294967295|S>>>26),S=A+(T^(I|~O))+R[7]+1126891415&4294967295,A=I+(S<<10&4294967295|S>>>22),S=O+(I^(A|~T))+R[14]+2878612391&4294967295,O=A+(S<<15&4294967295|S>>>17),S=T+(A^(O|~I))+R[5]+4237533241&4294967295,T=O+(S<<21&4294967295|S>>>11),S=I+(O^(T|~A))+R[12]+1700485571&4294967295,I=T+(S<<6&4294967295|S>>>26),S=A+(T^(I|~O))+R[3]+2399980690&4294967295,A=I+(S<<10&4294967295|S>>>22),S=O+(I^(A|~T))+R[10]+4293915773&4294967295,O=A+(S<<15&4294967295|S>>>17),S=T+(A^(O|~I))+R[1]+2240044497&4294967295,T=O+(S<<21&4294967295|S>>>11),S=I+(O^(T|~A))+R[8]+1873313359&4294967295,I=T+(S<<6&4294967295|S>>>26),S=A+(T^(I|~O))+R[15]+4264355552&4294967295,A=I+(S<<10&4294967295|S>>>22),S=O+(I^(A|~T))+R[6]+2734768916&4294967295,O=A+(S<<15&4294967295|S>>>17),S=T+(A^(O|~I))+R[13]+1309151649&4294967295,T=O+(S<<21&4294967295|S>>>11),S=I+(O^(T|~A))+R[4]+4149444226&4294967295,I=T+(S<<6&4294967295|S>>>26),S=A+(T^(I|~O))+R[11]+3174756917&4294967295,A=I+(S<<10&4294967295|S>>>22),S=O+(I^(A|~T))+R[2]+718787259&4294967295,O=A+(S<<15&4294967295|S>>>17),S=T+(A^(O|~I))+R[9]+3951481745&4294967295,x.g[0]=x.g[0]+I&4294967295,x.g[1]=x.g[1]+(O+(S<<21&4294967295|S>>>11))&4294967295,x.g[2]=x.g[2]+O&4294967295,x.g[3]=x.g[3]+A&4294967295}s.prototype.u=function(x,I){I===void 0&&(I=x.length);for(var T=I-this.blockSize,R=this.B,O=this.h,A=0;A<I;){if(O==0)for(;A<=T;)i(this,x,A),A+=this.blockSize;if(typeof x=="string"){for(;A<I;)if(R[O++]=x.charCodeAt(A++),O==this.blockSize){i(this,R),O=0;break}}else for(;A<I;)if(R[O++]=x[A++],O==this.blockSize){i(this,R),O=0;break}}this.h=O,this.o+=I},s.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var I=1;I<x.length-8;++I)x[I]=0;var T=8*this.o;for(I=x.length-8;I<x.length;++I)x[I]=T&255,T/=256;for(this.u(x),x=Array(16),I=T=0;4>I;++I)for(var R=0;32>R;R+=8)x[T++]=this.g[I]>>>R&255;return x};function r(x,I){var T=l;return Object.prototype.hasOwnProperty.call(T,x)?T[x]:T[x]=I(x)}function o(x,I){this.h=I;for(var T=[],R=!0,O=x.length-1;0<=O;O--){var A=x[O]|0;R&&A==I||(T[O]=A,R=!1)}this.g=T}var l={};function c(x){return-128<=x&&128>x?r(x,function(I){return new o([I|0],0>I?-1:0)}):new o([x|0],0>x?-1:0)}function d(x){if(isNaN(x)||!isFinite(x))return p;if(0>x)return N(d(-x));for(var I=[],T=1,R=0;x>=T;R++)I[R]=x/T|0,T*=4294967296;return new o(I,0)}function h(x,I){if(x.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(x.charAt(0)=="-")return N(h(x.substring(1),I));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=d(Math.pow(I,8)),R=p,O=0;O<x.length;O+=8){var A=Math.min(8,x.length-O),S=parseInt(x.substring(O,O+A),I);8>A?(A=d(Math.pow(I,A)),R=R.j(A).add(d(S))):(R=R.j(T),R=R.add(d(S)))}return R}var p=c(0),_=c(1),E=c(16777216);t=o.prototype,t.m=function(){if(D(this))return-N(this).m();for(var x=0,I=1,T=0;T<this.g.length;T++){var R=this.i(T);x+=(0<=R?R:4294967296+R)*I,I*=4294967296}return x},t.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(C(this))return"0";if(D(this))return"-"+N(this).toString(x);for(var I=d(Math.pow(x,6)),T=this,R="";;){var O=B(T,I).g;T=j(T,O.j(I));var A=((0<T.g.length?T.g[0]:T.h)>>>0).toString(x);if(T=O,C(T))return A+R;for(;6>A.length;)A="0"+A;R=A+R}},t.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function C(x){if(x.h!=0)return!1;for(var I=0;I<x.g.length;I++)if(x.g[I]!=0)return!1;return!0}function D(x){return x.h==-1}t.l=function(x){return x=j(this,x),D(x)?-1:C(x)?0:1};function N(x){for(var I=x.g.length,T=[],R=0;R<I;R++)T[R]=~x.g[R];return new o(T,~x.h).add(_)}t.abs=function(){return D(this)?N(this):this},t.add=function(x){for(var I=Math.max(this.g.length,x.g.length),T=[],R=0,O=0;O<=I;O++){var A=R+(this.i(O)&65535)+(x.i(O)&65535),S=(A>>>16)+(this.i(O)>>>16)+(x.i(O)>>>16);R=S>>>16,A&=65535,S&=65535,T[O]=S<<16|A}return new o(T,T[T.length-1]&-2147483648?-1:0)};function j(x,I){return x.add(N(I))}t.j=function(x){if(C(this)||C(x))return p;if(D(this))return D(x)?N(this).j(N(x)):N(N(this).j(x));if(D(x))return N(this.j(N(x)));if(0>this.l(E)&&0>x.l(E))return d(this.m()*x.m());for(var I=this.g.length+x.g.length,T=[],R=0;R<2*I;R++)T[R]=0;for(R=0;R<this.g.length;R++)for(var O=0;O<x.g.length;O++){var A=this.i(R)>>>16,S=this.i(R)&65535,Le=x.i(O)>>>16,ot=x.i(O)&65535;T[2*R+2*O]+=S*ot,$(T,2*R+2*O),T[2*R+2*O+1]+=A*ot,$(T,2*R+2*O+1),T[2*R+2*O+1]+=S*Le,$(T,2*R+2*O+1),T[2*R+2*O+2]+=A*Le,$(T,2*R+2*O+2)}for(R=0;R<I;R++)T[R]=T[2*R+1]<<16|T[2*R];for(R=I;R<2*I;R++)T[R]=0;return new o(T,0)};function $(x,I){for(;(x[I]&65535)!=x[I];)x[I+1]+=x[I]>>>16,x[I]&=65535,I++}function U(x,I){this.g=x,this.h=I}function B(x,I){if(C(I))throw Error("division by zero");if(C(x))return new U(p,p);if(D(x))return I=B(N(x),I),new U(N(I.g),N(I.h));if(D(I))return I=B(x,N(I)),new U(N(I.g),I.h);if(30<x.g.length){if(D(x)||D(I))throw Error("slowDivide_ only works with positive integers.");for(var T=_,R=I;0>=R.l(x);)T=se(T),R=se(R);var O=re(T,1),A=re(R,1);for(R=re(R,2),T=re(T,2);!C(R);){var S=A.add(R);0>=S.l(x)&&(O=O.add(T),A=S),R=re(R,1),T=re(T,1)}return I=j(x,O.j(I)),new U(O,I)}for(O=p;0<=x.l(I);){for(T=Math.max(1,Math.floor(x.m()/I.m())),R=Math.ceil(Math.log(T)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),A=d(T),S=A.j(I);D(S)||0<S.l(x);)T-=R,A=d(T),S=A.j(I);C(A)&&(A=_),O=O.add(A),x=j(x,S)}return new U(O,x)}t.A=function(x){return B(this,x).h},t.and=function(x){for(var I=Math.max(this.g.length,x.g.length),T=[],R=0;R<I;R++)T[R]=this.i(R)&x.i(R);return new o(T,this.h&x.h)},t.or=function(x){for(var I=Math.max(this.g.length,x.g.length),T=[],R=0;R<I;R++)T[R]=this.i(R)|x.i(R);return new o(T,this.h|x.h)},t.xor=function(x){for(var I=Math.max(this.g.length,x.g.length),T=[],R=0;R<I;R++)T[R]=this.i(R)^x.i(R);return new o(T,this.h^x.h)};function se(x){for(var I=x.g.length+1,T=[],R=0;R<I;R++)T[R]=x.i(R)<<1|x.i(R-1)>>>31;return new o(T,x.h)}function re(x,I){var T=I>>5;I%=32;for(var R=x.g.length-T,O=[],A=0;A<R;A++)O[A]=0<I?x.i(A+T)>>>I|x.i(A+T+1)<<32-I:x.i(A+T);return new o(O,x.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Vw=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,Ar=o}).apply(typeof Hv<"u"?Hv:typeof self<"u"?self:typeof window<"u"?window:{});var Vu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Mw,Gl,$w,th,wp,Fw,Uw,jw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,f,v){return a==Array.prototype||a==Object.prototype||(a[f]=v.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vu=="object"&&Vu];for(var f=0;f<a.length;++f){var v=a[f];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=n(this);function i(a,f){if(f)e:{var v=s;a=a.split(".");for(var w=0;w<a.length-1;w++){var F=a[w];if(!(F in v))break e;v=v[F]}a=a[a.length-1],w=v[a],f=f(w),f!=w&&f!=null&&e(v,a,{configurable:!0,writable:!0,value:f})}}function r(a,f){a instanceof String&&(a+="");var v=0,w=!1,F={next:function(){if(!w&&v<a.length){var H=v++;return{value:f(H,a[H]),done:!1}}return w=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}i("Array.prototype.values",function(a){return a||function(){return r(this,function(f,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(a){var f=typeof a;return f=f!="object"?f:a?Array.isArray(a)?"array":f:"null",f=="array"||f=="object"&&typeof a.length=="number"}function d(a){var f=typeof a;return f=="object"&&a!=null||f=="function"}function h(a,f,v){return a.call.apply(a.bind,arguments)}function p(a,f,v){if(!a)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,w),a.apply(f,F)}}return function(){return a.apply(f,arguments)}}function _(a,f,v){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,_.apply(null,arguments)}function E(a,f){var v=Array.prototype.slice.call(arguments,1);return function(){var w=v.slice();return w.push.apply(w,arguments),a.apply(this,w)}}function C(a,f){function v(){}v.prototype=f.prototype,a.aa=f.prototype,a.prototype=new v,a.prototype.constructor=a,a.Qb=function(w,F,H){for(var ue=Array(arguments.length-2),pt=2;pt<arguments.length;pt++)ue[pt-2]=arguments[pt];return f.prototype[F].apply(w,ue)}}function D(a){const f=a.length;if(0<f){const v=Array(f);for(let w=0;w<f;w++)v[w]=a[w];return v}return[]}function N(a,f){for(let v=1;v<arguments.length;v++){const w=arguments[v];if(c(w)){const F=a.length||0,H=w.length||0;a.length=F+H;for(let ue=0;ue<H;ue++)a[F+ue]=w[ue]}else a.push(w)}}class j{constructor(f,v){this.i=f,this.j=v,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function $(a){return/^[\s\xa0]*$/.test(a)}function U(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function B(a){return B[" "](a),a}B[" "]=function(){};var se=U().indexOf("Gecko")!=-1&&!(U().toLowerCase().indexOf("webkit")!=-1&&U().indexOf("Edge")==-1)&&!(U().indexOf("Trident")!=-1||U().indexOf("MSIE")!=-1)&&U().indexOf("Edge")==-1;function re(a,f,v){for(const w in a)f.call(v,a[w],w,a)}function x(a,f){for(const v in a)f.call(void 0,a[v],v,a)}function I(a){const f={};for(const v in a)f[v]=a[v];return f}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(a,f){let v,w;for(let F=1;F<arguments.length;F++){w=arguments[F];for(v in w)a[v]=w[v];for(let H=0;H<T.length;H++)v=T[H],Object.prototype.hasOwnProperty.call(w,v)&&(a[v]=w[v])}}function O(a){var f=1;a=a.split(":");const v=[];for(;0<f&&a.length;)v.push(a.shift()),f--;return a.length&&v.push(a.join(":")),v}function A(a){l.setTimeout(()=>{throw a},0)}function S(){var a=kt;let f=null;return a.g&&(f=a.g,a.g=a.g.next,a.g||(a.h=null),f.next=null),f}class Le{constructor(){this.h=this.g=null}add(f,v){const w=ot.get();w.set(f,v),this.h?this.h.next=w:this.g=w,this.h=w}}var ot=new j(()=>new Me,a=>a.reset());class Me{constructor(){this.next=this.g=this.h=null}set(f,v){this.h=f,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let we,qe=!1,kt=new Le,X=()=>{const a=l.Promise.resolve(void 0);we=()=>{a.then(zt)}};var zt=()=>{for(var a;a=S();){try{a.h.call(a.g)}catch(v){A(v)}var f=ot;f.j(a),100>f.h&&(f.h++,a.next=f.g,f.g=a)}qe=!1};function at(){this.s=this.s,this.C=this.C}at.prototype.s=!1,at.prototype.ma=function(){this.s||(this.s=!0,this.N())},at.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function lt(a,f){this.type=a,this.g=this.target=f,this.defaultPrevented=!1}lt.prototype.h=function(){this.defaultPrevented=!0};var Ct=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,f=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const v=()=>{};l.addEventListener("test",v,f),l.removeEventListener("test",v,f)}catch{}return a}();function Rt(a,f){if(lt.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var v=this.type=a.type,w=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=f,f=a.relatedTarget){if(se){e:{try{B(f.nodeName);var F=!0;break e}catch{}F=!1}F||(f=null)}}else v=="mouseover"?f=a.fromElement:v=="mouseout"&&(f=a.toElement);this.relatedTarget=f,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:ct[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Rt.aa.h.call(this)}}C(Rt,lt);var ct={2:"touch",3:"pen",4:"mouse"};Rt.prototype.h=function(){Rt.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var z="closure_listenable_"+(1e6*Math.random()|0),W=0;function ce(a,f,v,w,F){this.listener=a,this.proxy=null,this.src=f,this.type=v,this.capture=!!w,this.ha=F,this.key=++W,this.da=this.fa=!1}function ve(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Qe(a){this.src=a,this.g={},this.h=0}Qe.prototype.add=function(a,f,v,w,F){var H=a.toString();a=this.g[H],a||(a=this.g[H]=[],this.h++);var ue=k(a,f,w,F);return-1<ue?(f=a[ue],v||(f.fa=!1)):(f=new ce(f,this.src,H,!!w,F),f.fa=v,a.push(f)),f};function P(a,f){var v=f.type;if(v in a.g){var w=a.g[v],F=Array.prototype.indexOf.call(w,f,void 0),H;(H=0<=F)&&Array.prototype.splice.call(w,F,1),H&&(ve(f),a.g[v].length==0&&(delete a.g[v],a.h--))}}function k(a,f,v,w){for(var F=0;F<a.length;++F){var H=a[F];if(!H.da&&H.listener==f&&H.capture==!!v&&H.ha==w)return F}return-1}var M="closure_lm_"+(1e6*Math.random()|0),K={};function Q(a,f,v,w,F){if(Array.isArray(f)){for(var H=0;H<f.length;H++)Q(a,f[H],v,w,F);return null}return v=Te(v),a&&a[z]?a.K(f,v,d(w)?!!w.capture:!1,F):J(a,f,v,!1,w,F)}function J(a,f,v,w,F,H){if(!f)throw Error("Invalid event type");var ue=d(F)?!!F.capture:!!F,pt=fe(a);if(pt||(a[M]=pt=new Qe(a)),v=pt.add(f,v,w,ue,H),v.proxy)return v;if(w=de(),v.proxy=w,w.src=a,w.listener=v,a.addEventListener)Ct||(F=ue),F===void 0&&(F=!1),a.addEventListener(f.toString(),w,F);else if(a.attachEvent)a.attachEvent(ne(f.toString()),w);else if(a.addListener&&a.removeListener)a.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return v}function de(){function a(v){return f.call(a.src,a.listener,v)}const f=Se;return a}function le(a,f,v,w,F){if(Array.isArray(f))for(var H=0;H<f.length;H++)le(a,f[H],v,w,F);else w=d(w)?!!w.capture:!!w,v=Te(v),a&&a[z]?(a=a.i,f=String(f).toString(),f in a.g&&(H=a.g[f],v=k(H,v,w,F),-1<v&&(ve(H[v]),Array.prototype.splice.call(H,v,1),H.length==0&&(delete a.g[f],a.h--)))):a&&(a=fe(a))&&(f=a.g[f.toString()],a=-1,f&&(a=k(f,v,w,F)),(v=-1<a?f[a]:null)&&oe(v))}function oe(a){if(typeof a!="number"&&a&&!a.da){var f=a.src;if(f&&f[z])P(f.i,a);else{var v=a.type,w=a.proxy;f.removeEventListener?f.removeEventListener(v,w,a.capture):f.detachEvent?f.detachEvent(ne(v),w):f.addListener&&f.removeListener&&f.removeListener(w),(v=fe(f))?(P(v,a),v.h==0&&(v.src=null,f[M]=null)):ve(a)}}}function ne(a){return a in K?K[a]:K[a]="on"+a}function Se(a,f){if(a.da)a=!0;else{f=new Rt(f,this);var v=a.listener,w=a.ha||a.src;a.fa&&oe(a),a=v.call(w,f)}return a}function fe(a){return a=a[M],a instanceof Qe?a:null}var Ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function Te(a){return typeof a=="function"?a:(a[Ee]||(a[Ee]=function(f){return a.handleEvent(f)}),a[Ee])}function Ie(){at.call(this),this.i=new Qe(this),this.M=this,this.F=null}C(Ie,at),Ie.prototype[z]=!0,Ie.prototype.removeEventListener=function(a,f,v,w){le(this,a,f,v,w)};function Ve(a,f){var v,w=a.F;if(w)for(v=[];w;w=w.F)v.push(w);if(a=a.M,w=f.type||f,typeof f=="string")f=new lt(f,a);else if(f instanceof lt)f.target=f.target||a;else{var F=f;f=new lt(w,a),R(f,F)}if(F=!0,v)for(var H=v.length-1;0<=H;H--){var ue=f.g=v[H];F=Ke(ue,w,!0,f)&&F}if(ue=f.g=a,F=Ke(ue,w,!0,f)&&F,F=Ke(ue,w,!1,f)&&F,v)for(H=0;H<v.length;H++)ue=f.g=v[H],F=Ke(ue,w,!1,f)&&F}Ie.prototype.N=function(){if(Ie.aa.N.call(this),this.i){var a=this.i,f;for(f in a.g){for(var v=a.g[f],w=0;w<v.length;w++)ve(v[w]);delete a.g[f],a.h--}}this.F=null},Ie.prototype.K=function(a,f,v,w){return this.i.add(String(a),f,!1,v,w)},Ie.prototype.L=function(a,f,v,w){return this.i.add(String(a),f,!0,v,w)};function Ke(a,f,v,w){if(f=a.i.g[String(f)],!f)return!0;f=f.concat();for(var F=!0,H=0;H<f.length;++H){var ue=f[H];if(ue&&!ue.da&&ue.capture==v){var pt=ue.listener,Zt=ue.ha||ue.src;ue.fa&&P(a.i,ue),F=pt.call(Zt,w)!==!1&&F}}return F&&!w.defaultPrevented}function Vt(a,f,v){if(typeof a=="function")v&&(a=_(a,v));else if(a&&typeof a.handleEvent=="function")a=_(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:l.setTimeout(a,f||0)}function xt(a){a.g=Vt(()=>{a.g=null,a.i&&(a.i=!1,xt(a))},a.l);const f=a.h;a.h=null,a.m.apply(null,f)}class Yt extends at{constructor(f,v){super(),this.m=f,this.l=v,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:xt(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ut(a){at.call(this),this.h=a,this.g={}}C(Ut,at);var $s=[];function li(a){re(a.g,function(f,v){this.g.hasOwnProperty(v)&&oe(f)},a),a.g={}}Ut.prototype.N=function(){Ut.aa.N.call(this),li(this)},Ut.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xt=l.JSON.stringify,Bn=l.JSON.parse,zo=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function fl(){}fl.prototype.h=null;function su(a){return a.h||(a.h=a.i())}function iu(){}var zi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ki(){lt.call(this,"d")}C(Ki,lt);function Ko(){lt.call(this,"c")}C(Ko,lt);var Fs={},ru=null;function Go(){return ru=ru||new Ie}Fs.La="serverreachability";function ou(a){lt.call(this,Fs.La,a)}C(ou,lt);function Wr(a){const f=Go();Ve(f,new ou(f))}Fs.STAT_EVENT="statevent";function ci(a,f){lt.call(this,Fs.STAT_EVENT,a),this.stat=f}C(ci,lt);function jt(a){const f=Go();Ve(f,new ci(f,a))}Fs.Ma="timingevent";function au(a,f){lt.call(this,Fs.Ma,a),this.size=f}C(au,lt);function zr(a,f){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},f)}function Kr(){this.g=!0}Kr.prototype.xa=function(){this.g=!1};function Qd(a,f,v,w,F,H){a.info(function(){if(a.g)if(H)for(var ue="",pt=H.split("&"),Zt=0;Zt<pt.length;Zt++){var nt=pt[Zt].split("=");if(1<nt.length){var rn=nt[0];nt=nt[1];var on=rn.split("_");ue=2<=on.length&&on[1]=="type"?ue+(rn+"="+nt+"&"):ue+(rn+"=redacted&")}}else ue=null;else ue=H;return"XMLHTTP REQ ("+w+") [attempt "+F+"]: "+f+`
`+v+`
`+ue})}function Yd(a,f,v,w,F,H,ue){a.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+F+"]: "+f+`
`+v+`
`+H+" "+ue})}function Us(a,f,v,w){a.info(function(){return"XMLHTTP TEXT ("+f+"): "+Qo(a,v)+(w?" "+w:"")})}function Gi(a,f){a.info(function(){return"TIMEOUT: "+f})}Kr.prototype.info=function(){};function Qo(a,f){if(!a.g)return f;if(!f)return null;try{var v=JSON.parse(f);if(v){for(a=0;a<v.length;a++)if(Array.isArray(v[a])){var w=v[a];if(!(2>w.length)){var F=w[1];if(Array.isArray(F)&&!(1>F.length)){var H=F[0];if(H!="noop"&&H!="stop"&&H!="close")for(var ue=1;ue<F.length;ue++)F[ue]=""}}}}return Xt(v)}catch{return f}}var Yo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Xo={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},pl;function Jo(){}C(Jo,fl),Jo.prototype.g=function(){return new XMLHttpRequest},Jo.prototype.i=function(){return{}},pl=new Jo;function Cn(a,f,v,w){this.j=a,this.i=f,this.l=v,this.R=w||1,this.U=new Ut(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new sn}function sn(){this.i=null,this.g="",this.h=!1}var vn={},pn={};function Jt(a,f,v){a.L=1,a.v=di(Mt(f)),a.m=v,a.P=!0,Gr(a,null)}function Gr(a,f){a.F=Date.now(),Ss(a),a.A=Mt(a.v);var v=a.A,w=a.R;Array.isArray(w)||(w=[String(w)]),ta(v.i,"t",w),a.C=0,v=a.j.J,a.h=new sn,a.g=bu(a.j,v?f:null,!a.m),0<a.O&&(a.M=new Yt(_(a.Y,a,a.g),a.O)),f=a.U,v=a.g,w=a.ca;var F="readystatechange";Array.isArray(F)||(F&&($s[0]=F.toString()),F=$s);for(var H=0;H<F.length;H++){var ue=Q(v,F[H],w||f.handleEvent,!1,f.h||f);if(!ue)break;f.g[ue.key]=ue}f=a.H?I(a.H):{},a.m?(a.u||(a.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,f)):(a.u="GET",a.g.ea(a.A,a.u,null,f)),Wr(),Qd(a.i,a.u,a.A,a.l,a.R,a.m)}Cn.prototype.ca=function(a){a=a.target;const f=this.M;f&&yn(a)==3?f.j():this.Y(a)},Cn.prototype.Y=function(a){try{if(a==this.g)e:{const on=yn(this.g);var f=this.g.Ba();const an=this.g.Z();if(!(3>on)&&(on!=3||this.g&&(this.h.h||this.g.oa()||_u(this.g)))){this.J||on!=4||f==7||(f==8||0>=an?Wr(3):Wr(2)),Qr(this);var v=this.g.Z();this.X=v;t:if(ui(this)){var w=_u(this.g);a="";var F=w.length,H=yn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){js(this),cs(this);var ue="";break t}this.h.i=new l.TextDecoder}for(f=0;f<F;f++)this.h.h=!0,a+=this.h.i.decode(w[f],{stream:!(H&&f==F-1)});w.length=0,this.h.g+=a,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=v==200,Yd(this.i,this.u,this.A,this.l,this.R,on,v),this.o){if(this.T&&!this.K){t:{if(this.g){var pt,Zt=this.g;if((pt=Zt.g?Zt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(pt)){var nt=pt;break t}}nt=null}if(v=nt)Us(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yr(this,v);else{this.o=!1,this.s=3,jt(12),js(this),cs(this);break e}}if(this.P){v=!0;let qn;for(;!this.J&&this.C<ue.length;)if(qn=hi(this,ue),qn==pn){on==4&&(this.s=4,jt(14),v=!1),Us(this.i,this.l,null,"[Incomplete Response]");break}else if(qn==vn){this.s=4,jt(15),Us(this.i,this.l,ue,"[Invalid Chunk]"),v=!1;break}else Us(this.i,this.l,qn,null),Yr(this,qn);if(ui(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),on!=4||ue.length!=0||this.h.h||(this.s=1,jt(16),v=!1),this.o=this.o&&v,!v)Us(this.i,this.l,ue,"[Invalid Chunked Response]"),js(this),cs(this);else if(0<ue.length&&!this.W){this.W=!0;var rn=this.j;rn.g==this&&rn.ba&&!rn.M&&(rn.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),xl(rn),rn.M=!0,jt(11))}}else Us(this.i,this.l,ue,null),Yr(this,ue);on==4&&js(this),this.o&&!this.J&&(on==4?Dl(this.j,this):(this.o=!1,Ss(this)))}else vu(this.g),v==400&&0<ue.indexOf("Unknown SID")?(this.s=3,jt(12)):(this.s=0,jt(13)),js(this),cs(this)}}}catch{}finally{}};function ui(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function hi(a,f){var v=a.C,w=f.indexOf(`
`,v);return w==-1?pn:(v=Number(f.substring(v,w)),isNaN(v)?vn:(w+=1,w+v>f.length?pn:(f=f.slice(w,w+v),a.C=w+v,f)))}Cn.prototype.cancel=function(){this.J=!0,js(this)};function Ss(a){a.S=Date.now()+a.I,ml(a,a.I)}function ml(a,f){if(a.B!=null)throw Error("WatchDog timer not null");a.B=zr(_(a.ba,a),f)}function Qr(a){a.B&&(l.clearTimeout(a.B),a.B=null)}Cn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(Gi(this.i,this.A),this.L!=2&&(Wr(),jt(17)),js(this),this.s=2,cs(this)):ml(this,this.S-a)};function cs(a){a.j.G==0||a.J||Dl(a.j,a)}function js(a){Qr(a);var f=a.M;f&&typeof f.ma=="function"&&f.ma(),a.M=null,li(a.U),a.g&&(f=a.g,a.g=null,f.abort(),f.ma())}function Yr(a,f){try{var v=a.j;if(v.G!=0&&(v.g==a||Zo(v.h,a))){if(!a.K&&Zo(v.h,a)&&v.G==3){try{var w=v.Da.g.parse(f)}catch{w=null}if(Array.isArray(w)&&w.length==3){var F=w;if(F[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<a.F)no(v),Zr(v);else break e;kl(v),jt(18)}}else v.za=F[1],0<v.za-v.T&&37500>F[2]&&v.F&&v.v==0&&!v.C&&(v.C=zr(_(v.Za,v),6e3));if(1>=yl(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Rs(v,11)}else if((a.K||v.g==a)&&no(v),!$(f))for(F=v.Da.g.parse(f),f=0;f<F.length;f++){let nt=F[f];if(v.T=nt[0],nt=nt[1],v.G==2)if(nt[0]=="c"){v.K=nt[1],v.ia=nt[2];const rn=nt[3];rn!=null&&(v.la=rn,v.j.info("VER="+v.la));const on=nt[4];on!=null&&(v.Aa=on,v.j.info("SVER="+v.Aa));const an=nt[5];an!=null&&typeof an=="number"&&0<an&&(w=1.5*an,v.L=w,v.j.info("backChannelRequestTimeoutMs_="+w)),w=v;const qn=a.g;if(qn){const so=qn.g?qn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(so){var H=w.h;H.g||so.indexOf("spdy")==-1&&so.indexOf("quic")==-1&&so.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(ea(H,H.h),H.h=null))}if(w.D){const ca=qn.g?qn.g.getResponseHeader("X-HTTP-Session-Id"):null;ca&&(w.ya=ca,it(w.I,w.D,ca))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-a.F,v.j.info("Handshake RTT: "+v.R+"ms")),w=v;var ue=a;if(w.qa=Nl(w,w.J?w.ia:null,w.W),ue.K){El(w.h,ue);var pt=ue,Zt=w.L;Zt&&(pt.I=Zt),pt.B&&(Qr(pt),Ss(pt)),w.g=ue}else to(w);0<v.i.length&&eo(v)}else nt[0]!="stop"&&nt[0]!="close"||Rs(v,7);else v.G==3&&(nt[0]=="stop"||nt[0]=="close"?nt[0]=="stop"?Rs(v,7):ra(v):nt[0]!="noop"&&v.l&&v.l.ta(nt),v.v=0)}}Wr(4)}catch{}}var gl=class{constructor(a,f){this.g=a,this.map=f}};function _l(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function vl(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function yl(a){return a.h?1:a.g?a.g.size:0}function Zo(a,f){return a.h?a.h==f:a.g?a.g.has(f):!1}function ea(a,f){a.g?a.g.add(f):a.h=f}function El(a,f){a.h&&a.h==f?a.h=null:a.g&&a.g.has(f)&&a.g.delete(f)}_l.prototype.cancel=function(){if(this.i=bl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function bl(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let f=a.i;for(const v of a.g.values())f=f.concat(v.D);return f}return D(a.i)}function lu(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var f=[],v=a.length,w=0;w<v;w++)f.push(a[w]);return f}f=[],v=0;for(w in a)f[v++]=a[w];return f}function cu(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var f=[];a=a.length;for(var v=0;v<a;v++)f.push(v);return f}f=[],v=0;for(const w in a)f[v++]=w;return f}}}function wl(a,f){if(a.forEach&&typeof a.forEach=="function")a.forEach(f,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,f,void 0);else for(var v=cu(a),w=lu(a),F=w.length,H=0;H<F;H++)f.call(void 0,w[H],v&&v[H],a)}var Xn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rn(a,f){if(a){a=a.split("&");for(var v=0;v<a.length;v++){var w=a[v].indexOf("="),F=null;if(0<=w){var H=a[v].substring(0,w);F=a[v].substring(w+1)}else H=a[v];f(H,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Pn(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Pn){this.h=a.h,Qi(this,a.j),this.o=a.o,this.g=a.g,Yi(this,a.s),this.l=a.l;var f=a.i,v=new Hn;v.i=f.i,f.g&&(v.g=new Map(f.g),v.h=f.h),Jn(this,v),this.m=a.m}else a&&(f=String(a).match(Xn))?(this.h=!1,Qi(this,f[1]||"",!0),this.o=us(f[2]||""),this.g=us(f[3]||"",!0),Yi(this,f[4]),this.l=us(f[5]||"",!0),Jn(this,f[6]||"",!0),this.m=us(f[7]||"")):(this.h=!1,this.i=new Hn(null,this.h))}Pn.prototype.toString=function(){var a=[],f=this.j;f&&a.push(fi(f,pi,!0),":");var v=this.g;return(v||f=="file")&&(a.push("//"),(f=this.o)&&a.push(fi(f,pi,!0),"@"),a.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&a.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&a.push("/"),a.push(fi(v,v.charAt(0)=="/"?hu:Tl,!0))),(v=this.i.toString())&&a.push("?",v),(v=this.m)&&a.push("#",fi(v,Xd)),a.join("")};function Mt(a){return new Pn(a)}function Qi(a,f,v){a.j=v?us(f,!0):f,a.j&&(a.j=a.j.replace(/:$/,""))}function Yi(a,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);a.s=f}else a.s=null}function Jn(a,f,v){f instanceof Hn?(a.i=f,du(a.i,a.h)):(v||(f=fi(f,Cs)),a.i=new Hn(f,a.h))}function it(a,f,v){a.i.set(f,v)}function di(a){return it(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function us(a,f){return a?f?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function fi(a,f,v){return typeof a=="string"?(a=encodeURI(a).replace(f,uu),v&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function uu(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var pi=/[#\/\?@]/g,Tl=/[#\?:]/g,hu=/[#\?]/g,Cs=/[#\?@]/g,Xd=/#/g;function Hn(a,f){this.h=this.g=null,this.i=a||null,this.j=!!f}function Zn(a){a.g||(a.g=new Map,a.h=0,a.i&&Rn(a.i,function(f,v){a.add(decodeURIComponent(f.replace(/\+/g," ")),v)}))}t=Hn.prototype,t.add=function(a,f){Zn(this),this.i=null,a=hs(this,a);var v=this.g.get(a);return v||this.g.set(a,v=[]),v.push(f),this.h+=1,this};function Al(a,f){Zn(a),f=hs(a,f),a.g.has(f)&&(a.i=null,a.h-=a.g.get(f).length,a.g.delete(f))}function Xi(a,f){return Zn(a),f=hs(a,f),a.g.has(f)}t.forEach=function(a,f){Zn(this),this.g.forEach(function(v,w){v.forEach(function(F){a.call(f,F,w,this)},this)},this)},t.na=function(){Zn(this);const a=Array.from(this.g.values()),f=Array.from(this.g.keys()),v=[];for(let w=0;w<f.length;w++){const F=a[w];for(let H=0;H<F.length;H++)v.push(f[w])}return v},t.V=function(a){Zn(this);let f=[];if(typeof a=="string")Xi(this,a)&&(f=f.concat(this.g.get(hs(this,a))));else{a=Array.from(this.g.values());for(let v=0;v<a.length;v++)f=f.concat(a[v])}return f},t.set=function(a,f){return Zn(this),this.i=null,a=hs(this,a),Xi(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[f]),this.h+=1,this},t.get=function(a,f){return a?(a=this.V(a),0<a.length?String(a[0]):f):f};function ta(a,f,v){Al(a,f),0<v.length&&(a.i=null,a.g.set(hs(a,f),D(v)),a.h+=v.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],f=Array.from(this.g.keys());for(var v=0;v<f.length;v++){var w=f[v];const H=encodeURIComponent(String(w)),ue=this.V(w);for(w=0;w<ue.length;w++){var F=H;ue[w]!==""&&(F+="="+encodeURIComponent(String(ue[w]))),a.push(F)}}return this.i=a.join("&")};function hs(a,f){return f=String(f),a.j&&(f=f.toLowerCase()),f}function du(a,f){f&&!a.j&&(Zn(a),a.i=null,a.g.forEach(function(v,w){var F=w.toLowerCase();w!=F&&(Al(this,w),ta(this,F,v))},a)),a.j=f}function fu(a,f){const v=new Kr;if(l.Image){const w=new Image;w.onload=E(On,v,"TestLoadImage: loaded",!0,f,w),w.onerror=E(On,v,"TestLoadImage: error",!1,f,w),w.onabort=E(On,v,"TestLoadImage: abort",!1,f,w),w.ontimeout=E(On,v,"TestLoadImage: timeout",!1,f,w),l.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=a}else f(!1)}function pu(a,f){const v=new Kr,w=new AbortController,F=setTimeout(()=>{w.abort(),On(v,"TestPingServer: timeout",!1,f)},1e4);fetch(a,{signal:w.signal}).then(H=>{clearTimeout(F),H.ok?On(v,"TestPingServer: ok",!0,f):On(v,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(F),On(v,"TestPingServer: error",!1,f)})}function On(a,f,v,w,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),w(v)}catch{}}function Jd(){this.g=new zo}function mu(a,f,v){const w=v||"";try{wl(a,function(F,H){let ue=F;d(F)&&(ue=Xt(F)),f.push(w+H+"="+encodeURIComponent(ue))})}catch(F){throw f.push(w+"type="+encodeURIComponent("_badmap")),F}}function Ji(a){this.l=a.Ub||null,this.j=a.eb||!1}C(Ji,fl),Ji.prototype.g=function(){return new mi(this.l,this.j)},Ji.prototype.i=function(a){return function(){return a}}({});function mi(a,f){Ie.call(this),this.D=a,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(mi,Ie),t=mi.prototype,t.open=function(a,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=f,this.readyState=1,Bs(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(f.body=a),(this.D||l).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Xr(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Bs(this)),this.g&&(this.readyState=3,Bs(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;na(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function na(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var f=a.value?a.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!a.done}))&&(this.response=this.responseText+=f)}a.done?Xr(this):Bs(this),this.readyState==3&&na(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Xr(this))},t.Qa=function(a){this.g&&(this.response=a,Xr(this))},t.ga=function(){this.g&&Xr(this)};function Xr(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Bs(a)}t.setRequestHeader=function(a,f){this.u.append(a,f)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],f=this.h.entries();for(var v=f.next();!v.done;)v=v.value,a.push(v[0]+": "+v[1]),v=f.next();return a.join(`\r
`)};function Bs(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(mi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function gu(a){let f="";return re(a,function(v,w){f+=w,f+=":",f+=v,f+=`\r
`}),f}function sa(a,f,v){e:{for(w in v){var w=!1;break e}w=!0}w||(v=gu(v),typeof a=="string"?v!=null&&encodeURIComponent(String(v)):it(a,f,v))}function At(a){Ie.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(At,Ie);var Il=/^https?$/i,Sl=["POST","PUT"];t=At.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,f,v,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);f=f?f.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():pl.g(),this.v=this.o?su(this.o):su(pl),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(f,String(a),!0),this.B=!1}catch(H){Cl(this,H);return}if(a=v||"",v=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var F in w)v.set(F,w[F]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const H of w.keys())v.set(H,w.get(H));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(v.keys()).find(H=>H.toLowerCase()=="content-type"),F=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Sl,f,void 0))||w||F||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,ue]of v)this.g.setRequestHeader(H,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Rl(this),this.u=!0,this.g.send(a),this.u=!1}catch(H){Cl(this,H)}};function Cl(a,f){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=f,a.m=5,Zi(a),Jr(a)}function Zi(a){a.A||(a.A=!0,Ve(a,"complete"),Ve(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Ve(this,"complete"),Ve(this,"abort"),Jr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Jr(this,!0)),At.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ia(this):this.bb())},t.bb=function(){ia(this)};function ia(a){if(a.h&&typeof o<"u"&&(!a.v[1]||yn(a)!=4||a.Z()!=2)){if(a.u&&yn(a)==4)Vt(a.Ea,0,a);else if(Ve(a,"readystatechange"),yn(a)==4){a.h=!1;try{const ue=a.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var v;if(!(v=f)){var w;if(w=ue===0){var F=String(a.D).match(Xn)[1]||null;!F&&l.self&&l.self.location&&(F=l.self.location.protocol.slice(0,-1)),w=!Il.test(F?F.toLowerCase():"")}v=w}if(v)Ve(a,"complete"),Ve(a,"success");else{a.m=6;try{var H=2<yn(a)?a.g.statusText:""}catch{H=""}a.l=H+" ["+a.Z()+"]",Zi(a)}}finally{Jr(a)}}}}function Jr(a,f){if(a.g){Rl(a);const v=a.g,w=a.v[0]?()=>{}:null;a.g=null,a.v=null,f||Ve(a,"ready");try{v.onreadystatechange=w}catch{}}}function Rl(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function yn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<yn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var f=this.g.responseText;return a&&f.indexOf(a)==0&&(f=f.substring(a.length)),Bn(f)}};function _u(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function vu(a){const f={};a=(a.g&&2<=yn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<a.length;w++){if($(a[w]))continue;var v=O(a[w]);const F=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const H=f[F]||[];f[F]=H,H.push(v)}x(f,function(w){return w.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function er(a,f,v){return v&&v.internalChannelParams&&v.internalChannelParams[a]||f}function Pl(a){this.Aa=0,this.i=[],this.j=new Kr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=er("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=er("baseRetryDelayMs",5e3,a),this.cb=er("retryDelaySeedMs",1e4,a),this.Wa=er("forwardChannelMaxRetries",2,a),this.wa=er("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new _l(a&&a.concurrentRequestLimit),this.Da=new Jd,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Pl.prototype,t.la=8,t.G=1,t.connect=function(a,f,v,w){jt(0),this.W=a,this.H=f||{},v&&w!==void 0&&(this.H.OSID=v,this.H.OAID=w),this.F=this.X,this.I=Nl(this,null,this.W),eo(this)};function ra(a){if(oa(a),a.G==3){var f=a.U++,v=Mt(a.I);if(it(v,"SID",a.K),it(v,"RID",f),it(v,"TYPE","terminate"),tr(a,v),f=new Cn(a,a.j,f),f.L=2,f.v=di(Mt(v)),v=!1,l.navigator&&l.navigator.sendBeacon)try{v=l.navigator.sendBeacon(f.v.toString(),"")}catch{}!v&&l.Image&&(new Image().src=f.v,v=!0),v||(f.g=bu(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Ss(f)}Eu(a)}function Zr(a){a.g&&(xl(a),a.g.cancel(),a.g=null)}function oa(a){Zr(a),a.u&&(l.clearTimeout(a.u),a.u=null),no(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function eo(a){if(!vl(a.h)&&!a.s){a.s=!0;var f=a.Ga;we||X(),qe||(we(),qe=!0),kt.add(f,a),a.B=0}}function Zd(a,f){return yl(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=f.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=zr(_(a.Ga,a,f),Hs(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const F=new Cn(this,this.j,a);let H=this.o;if(this.S&&(H?(H=I(H),R(H,this.S)):H=this.S),this.m!==null||this.O||(F.H=H,H=null),this.P)e:{for(var f=0,v=0;v<this.i.length;v++){t:{var w=this.i[v];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(f+=w,4096<f){f=v;break e}if(f===4096||v===this.i.length-1){f=v+1;break e}}f=1e3}else f=1e3;f=Ol(this,F,f),v=Mt(this.I),it(v,"RID",a),it(v,"CVER",22),this.D&&it(v,"X-HTTP-Session-Id",this.D),tr(this,v),H&&(this.O?f="headers="+encodeURIComponent(String(gu(H)))+"&"+f:this.m&&sa(v,this.m,H)),ea(this.h,F),this.Ua&&it(v,"TYPE","init"),this.P?(it(v,"$req",f),it(v,"SID","null"),F.T=!0,Jt(F,v,null)):Jt(F,v,f),this.G=2}}else this.G==3&&(a?yu(this,a):this.i.length==0||vl(this.h)||yu(this))};function yu(a,f){var v;f?v=f.l:v=a.U++;const w=Mt(a.I);it(w,"SID",a.K),it(w,"RID",v),it(w,"AID",a.T),tr(a,w),a.m&&a.o&&sa(w,a.m,a.o),v=new Cn(a,a.j,v,a.B+1),a.m===null&&(v.H=a.o),f&&(a.i=f.D.concat(a.i)),f=Ol(a,v,1e3),v.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),ea(a.h,v),Jt(v,w,f)}function tr(a,f){a.H&&re(a.H,function(v,w){it(f,w,v)}),a.l&&wl({},function(v,w){it(f,w,v)})}function Ol(a,f,v){v=Math.min(a.i.length,v);var w=a.l?_(a.l.Na,a.l,a):null;e:{var F=a.i;let H=-1;for(;;){const ue=["count="+v];H==-1?0<v?(H=F[0].g,ue.push("ofs="+H)):H=0:ue.push("ofs="+H);let pt=!0;for(let Zt=0;Zt<v;Zt++){let nt=F[Zt].g;const rn=F[Zt].map;if(nt-=H,0>nt)H=Math.max(0,F[Zt].g-100),pt=!1;else try{mu(rn,ue,"req"+nt+"_")}catch{w&&w(rn)}}if(pt){w=ue.join("&");break e}}}return a=a.i.splice(0,v),f.D=a,w}function to(a){if(!a.g&&!a.u){a.Y=1;var f=a.Fa;we||X(),qe||(we(),qe=!0),kt.add(f,a),a.v=0}}function kl(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=zr(_(a.Fa,a),Hs(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,aa(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=zr(_(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,jt(10),Zr(this),aa(this))};function xl(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function aa(a){a.g=new Cn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var f=Mt(a.qa);it(f,"RID","rpc"),it(f,"SID",a.K),it(f,"AID",a.T),it(f,"CI",a.F?"0":"1"),!a.F&&a.ja&&it(f,"TO",a.ja),it(f,"TYPE","xmlhttp"),tr(a,f),a.m&&a.o&&sa(f,a.m,a.o),a.L&&(a.g.I=a.L);var v=a.g;a=a.ia,v.L=1,v.v=di(Mt(f)),v.m=null,v.P=!0,Gr(v,a)}t.Za=function(){this.C!=null&&(this.C=null,Zr(this),kl(this),jt(19))};function no(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Dl(a,f){var v=null;if(a.g==f){no(a),xl(a),a.g=null;var w=2}else if(Zo(a.h,f))v=f.D,El(a.h,f),w=1;else return;if(a.G!=0){if(f.o)if(w==1){v=f.m?f.m.length:0,f=Date.now()-f.F;var F=a.B;w=Go(),Ve(w,new au(w,v)),eo(a)}else to(a);else if(F=f.s,F==3||F==0&&0<f.X||!(w==1&&Zd(a,f)||w==2&&kl(a)))switch(v&&0<v.length&&(f=a.h,f.i=f.i.concat(v)),F){case 1:Rs(a,5);break;case 4:Rs(a,10);break;case 3:Rs(a,6);break;default:Rs(a,2)}}}function Hs(a,f){let v=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(v*=2),v*f}function Rs(a,f){if(a.j.info("Error code "+f),f==2){var v=_(a.fb,a),w=a.Xa;const F=!w;w=new Pn(w||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Qi(w,"https"),di(w),F?fu(w.toString(),v):pu(w.toString(),v)}else jt(2);a.G=0,a.l&&a.l.sa(f),Eu(a),oa(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),jt(2)):(this.j.info("Failed to ping google.com"),jt(1))};function Eu(a){if(a.G=0,a.ka=[],a.l){const f=bl(a.h);(f.length!=0||a.i.length!=0)&&(N(a.ka,f),N(a.ka,a.i),a.h.i.length=0,D(a.i),a.i.length=0),a.l.ra()}}function Nl(a,f,v){var w=v instanceof Pn?Mt(v):new Pn(v);if(w.g!="")f&&(w.g=f+"."+w.g),Yi(w,w.s);else{var F=l.location;w=F.protocol,f=f?f+"."+F.hostname:F.hostname,F=+F.port;var H=new Pn(null);w&&Qi(H,w),f&&(H.g=f),F&&Yi(H,F),v&&(H.l=v),w=H}return v=a.D,f=a.ya,v&&f&&it(w,v,f),it(w,"VER",a.la),tr(a,w),w}function bu(a,f,v){if(f&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=a.Ca&&!a.pa?new At(new Ji({eb:v})):new At(a.pa),f.Ha(a.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function wu(){}t=wu.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function la(){}la.prototype.g=function(a,f){return new kn(a,f)};function kn(a,f){Ie.call(this),this.g=new Pl(f),this.l=a,this.h=f&&f.messageUrlParams||null,a=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(a?a["X-WebChannel-Content-Type"]=f.messageContentType:a={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(a?a["X-WebChannel-Client-Profile"]=f.va:a={"X-WebChannel-Client-Profile":f.va}),this.g.S=a,(a=f&&f.Sb)&&!$(a)&&(this.g.m=a),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!$(f)&&(this.g.D=f,a=this.h,a!==null&&f in a&&(a=this.h,f in a&&delete a[f])),this.j=new nr(this)}C(kn,Ie),kn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},kn.prototype.close=function(){ra(this.g)},kn.prototype.o=function(a){var f=this.g;if(typeof a=="string"){var v={};v.__data__=a,a=v}else this.u&&(v={},v.__data__=Xt(a),a=v);f.i.push(new gl(f.Ya++,a)),f.G==3&&eo(f)},kn.prototype.N=function(){this.g.l=null,delete this.j,ra(this.g),delete this.g,kn.aa.N.call(this)};function Ll(a){Ki.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var f=a.__sm__;if(f){e:{for(const v in f){a=v;break e}a=void 0}(this.i=a)&&(a=this.i,f=f!==null&&a in f?f[a]:void 0),this.data=f}else this.data=a}C(Ll,Ki);function Vl(){Ko.call(this),this.status=1}C(Vl,Ko);function nr(a){this.g=a}C(nr,wu),nr.prototype.ua=function(){Ve(this.g,"a")},nr.prototype.ta=function(a){Ve(this.g,new Ll(a))},nr.prototype.sa=function(a){Ve(this.g,new Vl)},nr.prototype.ra=function(){Ve(this.g,"b")},la.prototype.createWebChannel=la.prototype.g,kn.prototype.send=kn.prototype.o,kn.prototype.open=kn.prototype.m,kn.prototype.close=kn.prototype.close,jw=function(){return new la},Uw=function(){return Go()},Fw=Fs,wp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Yo.NO_ERROR=0,Yo.TIMEOUT=8,Yo.HTTP_ERROR=6,th=Yo,Xo.COMPLETE="complete",$w=Xo,iu.EventType=zi,zi.OPEN="a",zi.CLOSE="b",zi.ERROR="c",zi.MESSAGE="d",Ie.prototype.listen=Ie.prototype.K,Gl=iu,At.prototype.listenOnce=At.prototype.L,At.prototype.getLastError=At.prototype.Ka,At.prototype.getLastErrorCode=At.prototype.Ba,At.prototype.getStatus=At.prototype.Z,At.prototype.getResponseJson=At.prototype.Oa,At.prototype.getResponseText=At.prototype.oa,At.prototype.send=At.prototype.ea,At.prototype.setWithCredentials=At.prototype.Ha,Mw=At}).apply(typeof Vu<"u"?Vu:typeof self<"u"?self:typeof window<"u"?window:{});const qv="@firebase/firestore",Wv="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bn.UNAUTHENTICATED=new bn(null),bn.GOOGLE_CREDENTIALS=new bn("google-credentials-uid"),bn.FIRST_PARTY=new bn("first-party-uid"),bn.MOCK_USER=new bn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tl="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo=new ym("@firebase/firestore");function va(){return Oo.logLevel}function _e(t,...e){if(Oo.logLevel<=Ze.DEBUG){const n=e.map(wm);Oo.debug(`Firestore (${tl}): ${t}`,...n)}}function Di(t,...e){if(Oo.logLevel<=Ze.ERROR){const n=e.map(wm);Oo.error(`Firestore (${tl}): ${t}`,...n)}}function Ma(t,...e){if(Oo.logLevel<=Ze.WARN){const n=e.map(wm);Oo.warn(`Firestore (${tl}): ${t}`,...n)}}function wm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,Bw(t,s,n)}function Bw(t,e,n){let s=`FIRESTORE (${tl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Di(s),new Error(s)}function ft(t,e,n,s){let i="Unexpected state";typeof n=="string"?i=n:s=n,t||Bw(e,i,s)}function He(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends Ui{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class WO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(bn.UNAUTHENTICATED))}shutdown(){}}class zO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class KO{constructor(e){this.t=e,this.currentUser=bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ft(this.o===void 0,42304);let s=this.i;const i=c=>this.i!==s?(s=this.i,n(c)):Promise.resolve();let r=new Ci;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Ci,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=r;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{_e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(_e("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Ci)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(_e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ft(typeof s.accessToken=="string",31837,{l:s}),new Hw(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ft(e===null||typeof e=="string",2055,{h:e}),new bn(e)}}class GO{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=bn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class QO{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new GO(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(bn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YO{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ns(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ft(this.o===void 0,3512);const s=r=>{r.error!=null&&_e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.m;return this.m=r.token,_e("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable(()=>s(r))};const i=r=>{_e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(r=>i(r)),setTimeout(()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?i(r):_e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new zv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ft(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new zv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const i=XO(40);for(let r=0;r<i.length;++r)s.length<20&&i[r]<n&&(s+=e.charAt(i[r]%62))}return s}}function Ge(t,e){return t<e?-1:t>e?1:0}function Tp(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=t.codePointAt(n),i=e.codePointAt(n);if(s!==i){if(s<128&&i<128)return Ge(s,i);{const r=qw(),o=JO(r.encode(Kv(t,n)),r.encode(Kv(e,n)));return o!==0?o:Ge(s,i)}}n+=s>65535?2:1}return Ge(t.length,e.length)}function Kv(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function JO(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Ge(t[n],e[n]);return Ge(t.length,e.length)}function $a(t,e,n){return t.length===e.length&&t.every((s,i)=>n(s,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv=-62135596800,Qv=1e6;class tn{static now(){return tn.fromMillis(Date.now())}static fromDate(e){return tn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Qv);return new tn(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ge(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ge(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Gv)throw new ge(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Qv}_compareTo(e){return this.seconds===e.seconds?Ge(this.nanoseconds,e.nanoseconds):Ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Gv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{static fromTimestamp(e){return new Fe(e)}static min(){return new Fe(new tn(0,0))}static max(){return new Fe(new tn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv="__name__";class Gs{constructor(e,n,s){n===void 0?n=0:n>e.length&&De(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&De(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Gs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Gs?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let i=0;i<s;i++){const r=Gs.compareSegments(e.get(i),n.get(i));if(r!==0)return r}return Ge(e.length,n.length)}static compareSegments(e,n){const s=Gs.isNumericId(e),i=Gs.isNumericId(n);return s&&!i?-1:!s&&i?1:s&&i?Gs.extractNumericId(e).compare(Gs.extractNumericId(n)):Tp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ar.fromString(e.substring(4,e.length-2))}}class Pt extends Gs{construct(e,n,s){return new Pt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ge(Z.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(i=>i.length>0))}return new Pt(n)}static emptyPath(){return new Pt([])}}const ZO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gn extends Gs{construct(e,n,s){return new gn(e,n,s)}static isValidIdentifier(e){return ZO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Yv}static keyField(){return new gn([Yv])}static fromServerFormat(e){const n=[];let s="",i=0;const r=()=>{if(s.length===0)throw new ge(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new ge(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ge(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=c,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(s+=l,i++):(r(),i++)}if(r(),o)throw new ge(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gn(n)}static emptyPath(){return new gn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(Pt.fromString(e))}static fromName(e){return new Ce(Pt.fromString(e).popFirst(5))}static empty(){return new Ce(Pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Pt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new Pt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic=-1;function ek(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,i=Fe.fromTimestamp(s===1e9?new tn(n+1,0):new tn(n,s));return new Rr(i,Ce.empty(),e)}function tk(t){return new Rr(t.readTime,t.key,Ic)}class Rr{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Rr(Fe.min(),Ce.empty(),Ic)}static max(){return new Rr(Fe.max(),Ce.empty(),Ic)}}function nk(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ce.comparator(t.documentKey,e.documentKey),n!==0?n:Ge(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ik{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nl(t){if(t.code!==Z.FAILED_PRECONDITION||t.message!==sk)throw t;_e("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&De(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ee((s,i)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(s,i)},this.catchCallback=r=>{this.wrapFailure(n,r).next(s,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ee?n:ee.resolve(n)}catch(n){return ee.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ee.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ee.reject(n)}static resolve(e){return new ee((n,s)=>{n(e)})}static reject(e){return new ee((n,s)=>{s(e)})}static waitFor(e){return new ee((n,s)=>{let i=0,r=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++r,o&&r===i&&n()},c=>s(c))}),o=!0,r===i&&n()})}static or(e){let n=ee.resolve(!1);for(const s of e)n=n.next(i=>i?ee.resolve(i):s());return n}static forEach(e,n){const s=[];return e.forEach((i,r)=>{s.push(n.call(this,i,r))}),this.waitFor(s)}static mapArray(e,n){return new ee((s,i)=>{const r=e.length,o=new Array(r);let l=0;for(let c=0;c<r;c++){const d=c;n(e[d]).next(h=>{o[d]=h,++l,l===r&&s(o)},h=>i(h))}})}static doWhile(e,n){return new ee((s,i)=>{const r=()=>{e()===!0?n().next(()=>{r()},i):s()};r()})}}function rk(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function sl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>n.writeSequenceNumber(s))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}gd.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm=-1;function _d(t){return t==null}function Ph(t){return t===0&&1/t==-1/0}function ok(t){return typeof t=="number"&&Number.isInteger(t)&&!Ph(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw="";function ak(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Xv(e)),e=lk(t.get(n),e);return Xv(e)}function lk(t,e){let n=e;const s=t.length;for(let i=0;i<s;i++){const r=t.charAt(i);switch(r){case"\0":n+="";break;case zw:n+="";break;default:n+=r}}return n}function Xv(t){return t+zw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Fr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Kw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,n){this.comparator=e,this.root=n||mn.EMPTY}insert(e,n){return new Lt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,mn.BLACK,null,null))}remove(e){return new Lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(e,s.key);if(i===0)return n+s.left.size;i<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Mu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Mu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Mu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Mu(this.root,e,this.comparator,!0)}}class Mu{constructor(e,n,s,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=n?s(e.key,n):1,n&&i&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mn{constructor(e,n,s,i,r){this.key=e,this.value=n,this.color=s??mn.RED,this.left=i??mn.EMPTY,this.right=r??mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,i,r){return new mn(e??this.key,n??this.value,s??this.color,i??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let i=this;const r=s(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,n,s),null):r===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return mn.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw De(43730,{key:this.key,value:this.value});if(this.right.isRed())throw De(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw De(27949);return e+(this.isRed()?0:1)}}mn.EMPTY=null,mn.RED=!0,mn.BLACK=!1;mn.EMPTY=new class{constructor(){this.size=0}get key(){throw De(57766)}get value(){throw De(16141)}get color(){throw De(16727)}get left(){throw De(29726)}get right(){throw De(36894)}copy(e,n,s,i,r){return this}insert(e,n,s){return new mn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.comparator=e,this.data=new Lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Zv(this.data.getIterator())}getIteratorFrom(e){return new Zv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof nn)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(this.comparator(i,r)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new nn(this.comparator);return n.data=e,n}}class Zv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e){this.fields=e,e.sort(gn.comparator)}static empty(){return new is([])}unionWith(e){let n=new nn(gn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new is(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return $a(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new Gw("Invalid base64 string: "+r):r}}(e);return new _n(n)}static fromUint8Array(e){const n=function(i){let r="";for(let o=0;o<i.length;++o)r+=String.fromCharCode(i[o]);return r}(e);return new _n(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_n.EMPTY_BYTE_STRING=new _n("");const ck=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pr(t){if(ft(!!t,39018),typeof t=="string"){let e=0;const n=ck.exec(t);if(ft(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ht(t.seconds),nanos:Ht(t.nanos)}}function Ht(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Or(t){return typeof t=="string"?_n.fromBase64String(t):_n.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw="server_timestamp",Yw="__type__",Xw="__previous_value__",Jw="__local_write_time__";function Am(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[Yw])===null||n===void 0?void 0:n.stringValue)===Qw}function vd(t){const e=t.mapValue.fields[Xw];return Am(e)?vd(e):e}function Sc(t){const e=Pr(t.mapValue.fields[Jw].timestampValue);return new tn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e,n,s,i,r,o,l,c,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=i,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}}const Oh="(default)";class Cc{constructor(e,n){this.projectId=e,this.database=n||Oh}static empty(){return new Cc("","")}get isDefaultDatabase(){return this.database===Oh}isEqual(e){return e instanceof Cc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zw="__type__",hk="__max__",$u={mapValue:{}},eT="__vector__",kh="value";function kr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Am(t)?4:fk(t)?9007199254740991:dk(t)?10:11:De(28295,{value:t})}function si(t,e){if(t===e)return!0;const n=kr(t);if(n!==kr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Sc(t).isEqual(Sc(e));case 3:return function(i,r){if(typeof i.timestampValue=="string"&&typeof r.timestampValue=="string"&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const o=Pr(i.timestampValue),l=Pr(r.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,r){return Or(i.bytesValue).isEqual(Or(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,r){return Ht(i.geoPointValue.latitude)===Ht(r.geoPointValue.latitude)&&Ht(i.geoPointValue.longitude)===Ht(r.geoPointValue.longitude)}(t,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Ht(i.integerValue)===Ht(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const o=Ht(i.doubleValue),l=Ht(r.doubleValue);return o===l?Ph(o)===Ph(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return $a(t.arrayValue.values||[],e.arrayValue.values||[],si);case 10:case 11:return function(i,r){const o=i.mapValue.fields||{},l=r.mapValue.fields||{};if(Jv(o)!==Jv(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!si(o[c],l[c])))return!1;return!0}(t,e);default:return De(52216,{left:t})}}function Rc(t,e){return(t.values||[]).find(n=>si(n,e))!==void 0}function Fa(t,e){if(t===e)return 0;const n=kr(t),s=kr(e);if(n!==s)return Ge(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ge(t.booleanValue,e.booleanValue);case 2:return function(r,o){const l=Ht(r.integerValue||r.doubleValue),c=Ht(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return ey(t.timestampValue,e.timestampValue);case 4:return ey(Sc(t),Sc(e));case 5:return Tp(t.stringValue,e.stringValue);case 6:return function(r,o){const l=Or(r),c=Or(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(r,o){const l=r.split("/"),c=o.split("/");for(let d=0;d<l.length&&d<c.length;d++){const h=Ge(l[d],c[d]);if(h!==0)return h}return Ge(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,o){const l=Ge(Ht(r.latitude),Ht(o.latitude));return l!==0?l:Ge(Ht(r.longitude),Ht(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ty(t.arrayValue,e.arrayValue);case 10:return function(r,o){var l,c,d,h;const p=r.fields||{},_=o.fields||{},E=(l=p[kh])===null||l===void 0?void 0:l.arrayValue,C=(c=_[kh])===null||c===void 0?void 0:c.arrayValue,D=Ge(((d=E==null?void 0:E.values)===null||d===void 0?void 0:d.length)||0,((h=C==null?void 0:C.values)===null||h===void 0?void 0:h.length)||0);return D!==0?D:ty(E,C)}(t.mapValue,e.mapValue);case 11:return function(r,o){if(r===$u.mapValue&&o===$u.mapValue)return 0;if(r===$u.mapValue)return 1;if(o===$u.mapValue)return-1;const l=r.fields||{},c=Object.keys(l),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){const _=Tp(c[p],h[p]);if(_!==0)return _;const E=Fa(l[c[p]],d[h[p]]);if(E!==0)return E}return Ge(c.length,h.length)}(t.mapValue,e.mapValue);default:throw De(23264,{Pe:n})}}function ey(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ge(t,e);const n=Pr(t),s=Pr(e),i=Ge(n.seconds,s.seconds);return i!==0?i:Ge(n.nanos,s.nanos)}function ty(t,e){const n=t.values||[],s=e.values||[];for(let i=0;i<n.length&&i<s.length;++i){const r=Fa(n[i],s[i]);if(r)return r}return Ge(n.length,s.length)}function Ua(t){return Ap(t)}function Ap(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=Pr(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Or(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Ce.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",i=!0;for(const r of n.values||[])i?i=!1:s+=",",s+=Ap(r);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let i="{",r=!0;for(const o of s)r?r=!1:i+=",",i+=`${o}:${Ap(n.fields[o])}`;return i+"}"}(t.mapValue):De(61005,{value:t})}function nh(t){switch(kr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=vd(t);return e?16+nh(e):16;case 5:return 2*t.stringValue.length;case 6:return Or(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((i,r)=>i+nh(r),0)}(t.arrayValue);case 10:case 11:return function(s){let i=0;return Fr(s.fields,(r,o)=>{i+=r.length+nh(o)}),i}(t.mapValue);default:throw De(13486,{value:t})}}function ny(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ip(t){return!!t&&"integerValue"in t}function Im(t){return!!t&&"arrayValue"in t}function sy(t){return!!t&&"nullValue"in t}function iy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function sh(t){return!!t&&"mapValue"in t}function dk(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[Zw])===null||n===void 0?void 0:n.stringValue)===eT}function lc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Fr(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=lc(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=lc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function fk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===hk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.value=e}static empty(){return new Kn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!sh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=lc(n)}setAll(e){let n=gn.emptyPath(),s={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,s,i),s={},i=[],n=l.popLast()}o?s[l.lastSegment()]=lc(o):i.push(l.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,s,i)}delete(e){const n=this.field(e.popLast());sh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return si(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let i=n.mapValue.fields[e.get(s)];sh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,s){Fr(n,(i,r)=>e[i]=r);for(const i of s)delete e[i]}clone(){return new Kn(lc(this.value))}}function tT(t){const e=[];return Fr(t.fields,(n,s)=>{const i=new gn([n]);if(sh(s)){const r=tT(s.mapValue).fields;if(r.length===0)e.push(i);else for(const o of r)e.push(i.child(o))}else e.push(i)}),new is(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e,n,s,i,r,o,l){this.key=e,this.documentType=n,this.version=s,this.readTime=i,this.createTime=r,this.data=o,this.documentState=l}static newInvalidDocument(e){return new An(e,0,Fe.min(),Fe.min(),Fe.min(),Kn.empty(),0)}static newFoundDocument(e,n,s,i){return new An(e,1,n,Fe.min(),s,i,0)}static newNoDocument(e,n){return new An(e,2,n,Fe.min(),Fe.min(),Kn.empty(),0)}static newUnknownDocument(e,n){return new An(e,3,n,Fe.min(),Fe.min(),Kn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof An&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new An(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,n){this.position=e,this.inclusive=n}}function ry(t,e,n){let s=0;for(let i=0;i<t.position.length;i++){const r=e[i],o=t.position[i];if(r.field.isKeyField()?s=Ce.comparator(Ce.fromName(o.referenceValue),n.key):s=Fa(o,n.data.field(r.field)),r.dir==="desc"&&(s*=-1),s!==0)break}return s}function oy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!si(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,n="asc"){this.field=e,this.dir=n}}function pk(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{}class Qt extends nT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new gk(e,n,s):n==="array-contains"?new yk(e,s):n==="in"?new Ek(e,s):n==="not-in"?new bk(e,s):n==="array-contains-any"?new wk(e,s):new Qt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new _k(e,s):new vk(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Fa(n,this.value)):n!==null&&kr(this.value)===kr(n)&&this.matchesComparison(Fa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vs extends nT{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new Vs(e,n)}matches(e){return sT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function sT(t){return t.op==="and"}function iT(t){return mk(t)&&sT(t)}function mk(t){for(const e of t.filters)if(e instanceof Vs)return!1;return!0}function Sp(t){if(t instanceof Qt)return t.field.canonicalString()+t.op.toString()+Ua(t.value);if(iT(t))return t.filters.map(e=>Sp(e)).join(",");{const e=t.filters.map(n=>Sp(n)).join(",");return`${t.op}(${e})`}}function rT(t,e){return t instanceof Qt?function(s,i){return i instanceof Qt&&s.op===i.op&&s.field.isEqual(i.field)&&si(s.value,i.value)}(t,e):t instanceof Vs?function(s,i){return i instanceof Vs&&s.op===i.op&&s.filters.length===i.filters.length?s.filters.reduce((r,o,l)=>r&&rT(o,i.filters[l]),!0):!1}(t,e):void De(19439)}function oT(t){return t instanceof Qt?function(n){return`${n.field.canonicalString()} ${n.op} ${Ua(n.value)}`}(t):t instanceof Vs?function(n){return n.op.toString()+" {"+n.getFilters().map(oT).join(" ,")+"}"}(t):"Filter"}class gk extends Qt{constructor(e,n,s){super(e,n,s),this.key=Ce.fromName(s.referenceValue)}matches(e){const n=Ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class _k extends Qt{constructor(e,n){super(e,"in",n),this.keys=aT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class vk extends Qt{constructor(e,n){super(e,"not-in",n),this.keys=aT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function aT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>Ce.fromName(s.referenceValue))}class yk extends Qt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Im(n)&&Rc(n.arrayValue,this.value)}}class Ek extends Qt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Rc(this.value.arrayValue,n)}}class bk extends Qt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Rc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Rc(this.value.arrayValue,n)}}class wk extends Qt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Im(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Rc(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e,n=null,s=[],i=[],r=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=i,this.limit=r,this.startAt=o,this.endAt=l,this.Ie=null}}function ay(t,e=null,n=[],s=[],i=null,r=null,o=null){return new Tk(t,e,n,s,i,r,o)}function Sm(t){const e=He(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>Sp(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(r){return r.field.canonicalString()+r.dir}(s)).join(","),_d(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Ua(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Ua(s)).join(",")),e.Ie=n}return e.Ie}function Cm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!pk(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!rT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!oy(t.startAt,e.startAt)&&oy(t.endAt,e.endAt)}function Cp(t){return Ce.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,n=null,s=[],i=[],r=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=i,this.limit=r,this.limitType=o,this.startAt=l,this.endAt=c,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function Ak(t,e,n,s,i,r,o,l){return new il(t,e,n,s,i,r,o,l)}function yd(t){return new il(t)}function ly(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function lT(t){return t.collectionGroup!==null}function cc(t){const e=He(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const r of e.explicitOrderBy)e.Ee.push(r),n.add(r.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new nn(gn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||e.Ee.push(new Pc(r,s))}),n.has(gn.keyField().canonicalString())||e.Ee.push(new Pc(gn.keyField(),s))}return e.Ee}function Xs(t){const e=He(t);return e.de||(e.de=Ik(e,cc(t))),e.de}function Ik(t,e){if(t.limitType==="F")return ay(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const r=i.dir==="desc"?"asc":"desc";return new Pc(i.field,r)});const n=t.endAt?new xh(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new xh(t.startAt.position,t.startAt.inclusive):null;return ay(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function Rp(t,e){const n=t.filters.concat([e]);return new il(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Dh(t,e,n){return new il(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ed(t,e){return Cm(Xs(t),Xs(e))&&t.limitType===e.limitType}function cT(t){return`${Sm(Xs(t))}|lt:${t.limitType}`}function ya(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(i=>oT(i)).join(", ")}]`),_d(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(i=>Ua(i)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(i=>Ua(i)).join(",")),`Target(${s})`}(Xs(t))}; limitType=${t.limitType})`}function bd(t,e){return e.isFoundDocument()&&function(s,i){const r=i.key.path;return s.collectionGroup!==null?i.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(r):Ce.isDocumentKey(s.path)?s.path.isEqual(r):s.path.isImmediateParentOf(r)}(t,e)&&function(s,i){for(const r of cc(s))if(!r.field.isKeyField()&&i.data.field(r.field)===null)return!1;return!0}(t,e)&&function(s,i){for(const r of s.filters)if(!r.matches(i))return!1;return!0}(t,e)&&function(s,i){return!(s.startAt&&!function(o,l,c){const d=ry(o,l,c);return o.inclusive?d<=0:d<0}(s.startAt,cc(s),i)||s.endAt&&!function(o,l,c){const d=ry(o,l,c);return o.inclusive?d>=0:d>0}(s.endAt,cc(s),i))}(t,e)}function Sk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function uT(t){return(e,n)=>{let s=!1;for(const i of cc(t)){const r=Ck(i,e,n);if(r!==0)return r;s=s||i.field.isKeyField()}return 0}}function Ck(t,e,n){const s=t.field.isKeyField()?Ce.comparator(e.key,n.key):function(r,o,l){const c=o.data.field(r),d=l.data.field(r);return c!==null&&d!==null?Fa(c,d):De(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return De(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[i,r]of s)if(this.equalsFn(i,e))return r}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),i=this.inner[s];if(i===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return void(i[r]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return s.length===1?delete this.inner[n]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Fr(this.inner,(n,s)=>{for(const[i,r]of s)e(i,r)})}isEmpty(){return Kw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk=new Lt(Ce.comparator);function Ni(){return Rk}const hT=new Lt(Ce.comparator);function Ql(...t){let e=hT;for(const n of t)e=e.insert(n.key,n);return e}function dT(t){let e=hT;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function yo(){return uc()}function fT(){return uc()}function uc(){return new Fo(t=>t.toString(),(t,e)=>t.isEqual(e))}const Pk=new Lt(Ce.comparator),Ok=new nn(Ce.comparator);function et(...t){let e=Ok;for(const n of t)e=e.add(n);return e}const kk=new nn(Ge);function xk(){return kk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ph(e)?"-0":e}}function pT(t){return{integerValue:""+t}}function Dk(t,e){return ok(e)?pT(e):Rm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(){this._=void 0}}function Nk(t,e,n){return t instanceof Oc?function(i,r){const o={fields:{[Yw]:{stringValue:Qw},[Jw]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&Am(r)&&(r=vd(r)),r&&(o.fields[Xw]=r),{mapValue:o}}(n,e):t instanceof ja?gT(t,e):t instanceof Ba?_T(t,e):function(i,r){const o=mT(i,r),l=cy(o)+cy(i.Re);return Ip(o)&&Ip(i.Re)?pT(l):Rm(i.serializer,l)}(t,e)}function Lk(t,e,n){return t instanceof ja?gT(t,e):t instanceof Ba?_T(t,e):n}function mT(t,e){return t instanceof Nh?function(s){return Ip(s)||function(r){return!!r&&"doubleValue"in r}(s)}(e)?e:{integerValue:0}:null}class Oc extends wd{}class ja extends wd{constructor(e){super(),this.elements=e}}function gT(t,e){const n=vT(e);for(const s of t.elements)n.some(i=>si(i,s))||n.push(s);return{arrayValue:{values:n}}}class Ba extends wd{constructor(e){super(),this.elements=e}}function _T(t,e){let n=vT(e);for(const s of t.elements)n=n.filter(i=>!si(i,s));return{arrayValue:{values:n}}}class Nh extends wd{constructor(e,n){super(),this.serializer=e,this.Re=n}}function cy(t){return Ht(t.integerValue||t.doubleValue)}function vT(t){return Im(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e,n){this.field=e,this.transform=n}}function Vk(t,e){return t.field.isEqual(e.field)&&function(s,i){return s instanceof ja&&i instanceof ja||s instanceof Ba&&i instanceof Ba?$a(s.elements,i.elements,si):s instanceof Nh&&i instanceof Nh?si(s.Re,i.Re):s instanceof Oc&&i instanceof Oc}(t.transform,e.transform)}class Mk{constructor(e,n){this.version=e,this.transformResults=n}}class ys{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ys}static exists(e){return new ys(void 0,e)}static updateTime(e){return new ys(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ih(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Td{}function yT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Om(t.key,ys.none()):new jc(t.key,t.data,ys.none());{const n=t.data,s=Kn.empty();let i=new nn(gn.comparator);for(let r of e.fields)if(!i.has(r)){let o=n.field(r);o===null&&r.length>1&&(r=r.popLast(),o=n.field(r)),o===null?s.delete(r):s.set(r,o),i=i.add(r)}return new Ur(t.key,s,new is(i.toArray()),ys.none())}}function $k(t,e,n){t instanceof jc?function(i,r,o){const l=i.value.clone(),c=hy(i.fieldTransforms,r,o.transformResults);l.setAll(c),r.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Ur?function(i,r,o){if(!ih(i.precondition,r))return void r.convertToUnknownDocument(o.version);const l=hy(i.fieldTransforms,r,o.transformResults),c=r.data;c.setAll(ET(i)),c.setAll(l),r.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function hc(t,e,n,s){return t instanceof jc?function(r,o,l,c){if(!ih(r.precondition,o))return l;const d=r.value.clone(),h=dy(r.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,s):t instanceof Ur?function(r,o,l,c){if(!ih(r.precondition,o))return l;const d=dy(r.fieldTransforms,c,o),h=o.data;return h.setAll(ET(r)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(p=>p.field))}(t,e,n,s):function(r,o,l){return ih(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function Fk(t,e){let n=null;for(const s of t.fieldTransforms){const i=e.data.field(s.field),r=mT(s.transform,i||null);r!=null&&(n===null&&(n=Kn.empty()),n.set(s.field,r))}return n||null}function uy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,i){return s===void 0&&i===void 0||!(!s||!i)&&$a(s,i,(r,o)=>Vk(r,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class jc extends Td{constructor(e,n,s,i=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ur extends Td{constructor(e,n,s,i,r=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function ET(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function hy(t,e,n){const s=new Map;ft(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let i=0;i<n.length;i++){const r=t[i],o=r.transform,l=e.data.field(r.field);s.set(r.field,Lk(o,l,n[i]))}return s}function dy(t,e,n){const s=new Map;for(const i of t){const r=i.transform,o=n.data.field(i.field);s.set(i.field,Nk(r,o,e))}return s}class Om extends Td{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Uk extends Td{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e,n,s,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const r=this.mutations[i];r.key.isEqual(e.key)&&$k(r,e,s[i])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=hc(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=hc(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=fT();return this.mutations.forEach(i=>{const r=e.get(i.key),o=r.overlayedDocument;let l=this.applyToLocalView(o,r.mutatedFields);l=n.has(i.key)?null:l;const c=yT(o,l);c!==null&&s.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Fe.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),et())}isEqual(e){return this.batchId===e.batchId&&$a(this.mutations,e.mutations,(n,s)=>uy(n,s))&&$a(this.baseMutations,e.baseMutations,(n,s)=>uy(n,s))}}class km{constructor(e,n,s,i){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=i}static from(e,n,s){ft(e.mutations.length===s.length,58842,{fe:e.mutations.length,ge:s.length});let i=function(){return Pk}();const r=e.mutations;for(let o=0;o<r.length;o++)i=i.insert(r[o].key,s[o].version);return new km(e,n,s,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kt,st;function qk(t){switch(t){case Z.OK:return De(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return De(15467,{code:t})}}function bT(t){if(t===void 0)return Di("GRPC error has no .code"),Z.UNKNOWN;switch(t){case Kt.OK:return Z.OK;case Kt.CANCELLED:return Z.CANCELLED;case Kt.UNKNOWN:return Z.UNKNOWN;case Kt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Kt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Kt.INTERNAL:return Z.INTERNAL;case Kt.UNAVAILABLE:return Z.UNAVAILABLE;case Kt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Kt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Kt.NOT_FOUND:return Z.NOT_FOUND;case Kt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Kt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Kt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Kt.ABORTED:return Z.ABORTED;case Kt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Kt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Kt.DATA_LOSS:return Z.DATA_LOSS;default:return De(39323,{code:t})}}(st=Kt||(Kt={}))[st.OK=0]="OK",st[st.CANCELLED=1]="CANCELLED",st[st.UNKNOWN=2]="UNKNOWN",st[st.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",st[st.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",st[st.NOT_FOUND=5]="NOT_FOUND",st[st.ALREADY_EXISTS=6]="ALREADY_EXISTS",st[st.PERMISSION_DENIED=7]="PERMISSION_DENIED",st[st.UNAUTHENTICATED=16]="UNAUTHENTICATED",st[st.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",st[st.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",st[st.ABORTED=10]="ABORTED",st[st.OUT_OF_RANGE=11]="OUT_OF_RANGE",st[st.UNIMPLEMENTED=12]="UNIMPLEMENTED",st[st.INTERNAL=13]="INTERNAL",st[st.UNAVAILABLE=14]="UNAVAILABLE",st[st.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk=new Ar([4294967295,4294967295],0);function fy(t){const e=qw().encode(t),n=new Vw;return n.update(e),new Uint8Array(n.digest())}function py(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),i=e.getUint32(8,!0),r=e.getUint32(12,!0);return[new Ar([n,s],0),new Ar([i,r],0)]}class xm{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Yl(`Invalid padding: ${n}`);if(s<0)throw new Yl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Yl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Yl(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Ar.fromNumber(this.pe)}we(e,n,s){let i=e.add(n.multiply(Ar.fromNumber(s)));return i.compare(Wk)===1&&(i=new Ar([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=fy(e),[s,i]=py(n);for(let r=0;r<this.hashCount;r++){const o=this.we(s,i,r);if(!this.be(o))return!1}return!0}static create(e,n,s){const i=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),o=new xm(r,i,n);return s.forEach(l=>o.insert(l)),o}insert(e){if(this.pe===0)return;const n=fy(e),[s,i]=py(n);for(let r=0;r<this.hashCount;r++){const o=this.we(s,i,r);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Yl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,n,s,i,r){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const i=new Map;return i.set(e,Bc.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Ad(Fe.min(),i,new Lt(Ge),Ni(),et())}}class Bc{constructor(e,n,s,i,r){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Bc(s,n,et(),et(),et())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,n,s,i){this.De=e,this.removedTargetIds=n,this.key=s,this.ve=i}}class wT{constructor(e,n){this.targetId=e,this.Ce=n}}class TT{constructor(e,n,s=_n.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=i}}class my{constructor(){this.Fe=0,this.Me=gy(),this.xe=_n.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=et(),n=et(),s=et();return this.Me.forEach((i,r)=>{switch(r){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:s=s.add(i);break;default:De(38017,{changeType:r})}}),new Bc(this.xe,this.Oe,e,n,s)}Qe(){this.Ne=!1,this.Me=gy()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,ft(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class zk{constructor(e){this.ze=e,this.je=new Map,this.He=Ni(),this.Je=Fu(),this.Ye=Fu(),this.Ze=new Lt(Ge)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const s=this.rt(n);switch(e.state){case 0:this.it(n)&&s.ke(e.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(e.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(n);break;case 3:this.it(n)&&(s.Ge(),s.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),s.ke(e.resumeToken));break;default:De(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((s,i)=>{this.it(i)&&n(i)})}ot(e){const n=e.targetId,s=e.Ce.count,i=this._t(n);if(i){const r=i.target;if(Cp(r))if(s===0){const o=new Ce(r.path);this.tt(n,o,An.newNoDocument(o,Fe.min()))}else ft(s===1,20013,{expectedCount:s});else{const o=this.ut(n);if(o!==s){const l=this.ct(e),c=l?this.lt(l,e,o):1;if(c!==0){this.st(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:r=0}=n;let o,l;try{o=Or(s).toUint8Array()}catch(c){if(c instanceof Gw)return Ma("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new xm(o,i,r)}catch(c){return Ma(c instanceof Yl?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.pe===0?null:l}lt(e,n,s){return n.Ce.count===s-this.Tt(e,n.targetId)?0:2}Tt(e,n){const s=this.ze.getRemoteKeysForTarget(n);let i=0;return s.forEach(r=>{const o=this.ze.Pt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;e.mightContain(l)||(this.tt(n,r,null),i++)}),i}It(e){const n=new Map;this.je.forEach((r,o)=>{const l=this._t(o);if(l){if(r.current&&Cp(l.target)){const c=new Ce(l.target.path);this.Et(c).has(o)||this.dt(o,c)||this.tt(o,c,An.newNoDocument(c,e))}r.Le&&(n.set(o,r.qe()),r.Qe())}});let s=et();this.Ye.forEach((r,o)=>{let l=!0;o.forEachWhile(c=>{const d=this._t(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(s=s.add(r))}),this.He.forEach((r,o)=>o.setReadTime(e));const i=new Ad(e,n,this.Ze,this.He,s);return this.He=Ni(),this.Je=Fu(),this.Ye=Fu(),this.Ze=new Lt(Ge),i}et(e,n){if(!this.it(e))return;const s=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,s),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,s){if(!this.it(e))return;const i=this.rt(e);this.dt(e,n)?i.$e(n,1):i.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),s&&(this.He=this.He.insert(n,s))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new my,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new nn(Ge),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new nn(Ge),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||_e("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new my),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Fu(){return new Lt(Ce.comparator)}function gy(){return new Lt(Ce.comparator)}const Kk={asc:"ASCENDING",desc:"DESCENDING"},Gk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Qk={and:"AND",or:"OR"};class Yk{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Pp(t,e){return t.useProto3Json||_d(e)?e:{value:e}}function Lh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function AT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Xk(t,e){return Lh(t,e.toTimestamp())}function Js(t){return ft(!!t,49232),Fe.fromTimestamp(function(n){const s=Pr(n);return new tn(s.seconds,s.nanos)}(t))}function Dm(t,e){return Op(t,e).canonicalString()}function Op(t,e){const n=function(i){return new Pt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function IT(t){const e=Pt.fromString(t);return ft(OT(e),10190,{key:e.toString()}),e}function kp(t,e){return Dm(t.databaseId,e.path)}function Nf(t,e){const n=IT(e);if(n.get(1)!==t.databaseId.projectId)throw new ge(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ge(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ce(CT(n))}function ST(t,e){return Dm(t.databaseId,e)}function Jk(t){const e=IT(t);return e.length===4?Pt.emptyPath():CT(e)}function xp(t){return new Pt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function CT(t){return ft(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function _y(t,e,n){return{name:kp(t,e),fields:n.value.mapValue.fields}}function Zk(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:De(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],r=function(d,h){return d.useProto3Json?(ft(h===void 0||typeof h=="string",58123),_n.fromBase64String(h||"")):(ft(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),_n.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const h=d.code===void 0?Z.UNKNOWN:bT(d.code);return new ge(h,d.message||"")}(o);n=new TT(s,i,r,l||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const i=Nf(t,s.document.name),r=Js(s.document.updateTime),o=s.document.createTime?Js(s.document.createTime):Fe.min(),l=new Kn({mapValue:{fields:s.document.fields}}),c=An.newFoundDocument(i,r,o,l),d=s.targetIds||[],h=s.removedTargetIds||[];n=new rh(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const i=Nf(t,s.document),r=s.readTime?Js(s.readTime):Fe.min(),o=An.newNoDocument(i,r),l=s.removedTargetIds||[];n=new rh([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const i=Nf(t,s.document),r=s.removedTargetIds||[];n=new rh([],r,i,null)}else{if(!("filter"in e))return De(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:i=0,unchangedNames:r}=s,o=new Hk(i,r),l=s.targetId;n=new wT(l,o)}}return n}function ex(t,e){let n;if(e instanceof jc)n={update:_y(t,e.key,e.value)};else if(e instanceof Om)n={delete:kp(t,e.key)};else if(e instanceof Ur)n={update:_y(t,e.key,e.data),updateMask:cx(e.fieldMask)};else{if(!(e instanceof Uk))return De(16599,{ft:e.type});n={verify:kp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(r,o){const l=o.transform;if(l instanceof Oc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ja)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ba)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Nh)return{fieldPath:o.field.canonicalString(),increment:l.Re};throw De(20930,{transform:o.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(i,r){return r.updateTime!==void 0?{updateTime:Xk(i,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:De(27497)}(t,e.precondition)),n}function tx(t,e){return t&&t.length>0?(ft(e!==void 0,14353),t.map(n=>function(i,r){let o=i.updateTime?Js(i.updateTime):Js(r);return o.isEqual(Fe.min())&&(o=Js(r)),new Mk(o,i.transformResults||[])}(n,e))):[]}function nx(t,e){return{documents:[ST(t,e.path)]}}function sx(t,e){const n={structuredQuery:{}},s=e.path;let i;e.collectionGroup!==null?(i=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=ST(t,i);const r=function(d){if(d.length!==0)return PT(Vs.create(d,"and"))}(e.filters);r&&(n.structuredQuery.where=r);const o=function(d){if(d.length!==0)return d.map(h=>function(_){return{field:Ea(_.field),direction:ox(_.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Pp(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{gt:n,parent:i}}function ix(t){let e=Jk(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let i=null;if(s>0){ft(s===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let r=[];n.where&&(r=function(p){const _=RT(p);return _ instanceof Vs&&iT(_)?_.getFilters():[_]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(_=>function(C){return new Pc(ba(C.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(_))}(n.orderBy));let l=null;n.limit&&(l=function(p){let _;return _=typeof p=="object"?p.value:p,_d(_)?null:_}(n.limit));let c=null;n.startAt&&(c=function(p){const _=!!p.before,E=p.values||[];return new xh(E,_)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const _=!p.before,E=p.values||[];return new xh(E,_)}(n.endAt)),Ak(e,i,o,r,l,"F",c,d)}function rx(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function RT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=ba(n.unaryFilter.field);return Qt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const i=ba(n.unaryFilter.field);return Qt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ba(n.unaryFilter.field);return Qt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ba(n.unaryFilter.field);return Qt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return De(61313);default:return De(60726)}}(t):t.fieldFilter!==void 0?function(n){return Qt.create(ba(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return De(58110);default:return De(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Vs.create(n.compositeFilter.filters.map(s=>RT(s)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return De(1026)}}(n.compositeFilter.op))}(t):De(30097,{filter:t})}function ox(t){return Kk[t]}function ax(t){return Gk[t]}function lx(t){return Qk[t]}function Ea(t){return{fieldPath:t.canonicalString()}}function ba(t){return gn.fromServerFormat(t.fieldPath)}function PT(t){return t instanceof Qt?function(n){if(n.op==="=="){if(iy(n.value))return{unaryFilter:{field:Ea(n.field),op:"IS_NAN"}};if(sy(n.value))return{unaryFilter:{field:Ea(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(iy(n.value))return{unaryFilter:{field:Ea(n.field),op:"IS_NOT_NAN"}};if(sy(n.value))return{unaryFilter:{field:Ea(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ea(n.field),op:ax(n.op),value:n.value}}}(t):t instanceof Vs?function(n){const s=n.getFilters().map(i=>PT(i));return s.length===1?s[0]:{compositeFilter:{op:lx(n.op),filters:s}}}(t):De(54877,{filter:t})}function cx(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function OT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,n,s,i,r=Fe.min(),o=Fe.min(),l=_n.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new vr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e){this.wt=e}}function hx(t){const e=ix({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Dh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(){this.Cn=new fx}addToCollectionParentIndex(e,n){return this.Cn.add(n),ee.resolve()}getCollectionParents(e,n){return ee.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ee.resolve()}deleteFieldIndex(e,n){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,n){return ee.resolve()}getDocumentsMatchingTarget(e,n){return ee.resolve(null)}getIndexType(e,n){return ee.resolve(0)}getFieldIndexes(e,n){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,n){return ee.resolve(Rr.min())}getMinOffsetFromCollectionGroup(e,n){return ee.resolve(Rr.min())}updateCollectionGroup(e,n,s){return ee.resolve()}updateIndexEntries(e,n){return ee.resolve()}}class fx{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),i=this.index[n]||new nn(Pt.comparator),r=!i.has(s);return this.index[n]=i.add(s),r}has(e){const n=e.lastSegment(),s=e.popLast(),i=this.index[n];return i&&i.has(s)}getEntries(e){return(this.index[e]||new nn(Pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},kT=41943040;class Wn{static withCacheSize(e){return new Wn(e,Wn.DEFAULT_COLLECTION_PERCENTILE,Wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wn.DEFAULT_COLLECTION_PERCENTILE=10,Wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wn.DEFAULT=new Wn(kT,Wn.DEFAULT_COLLECTION_PERCENTILE,Wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wn.DISABLED=new Wn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Ha(0)}static lr(){return new Ha(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy="LruGarbageCollector",px=1048576;function Ey([t,e],[n,s]){const i=Ge(t,n);return i===0?Ge(e,s):i}class mx{constructor(e){this.Er=e,this.buffer=new nn(Ey),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Ey(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class gx{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){_e(yy,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){sl(n)?_e(yy,"Ignoring IndexedDB error during garbage collection: ",n):await nl(n)}await this.mr(3e5)})}}class _x{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return ee.resolve(gd.le);const s=new mx(n);return this.gr.forEachTarget(e,i=>s.Rr(i.sequenceNumber)).next(()=>this.gr.yr(e,i=>s.Rr(i))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.gr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(_e("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(vy)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(_e("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vy):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let s,i,r,o,l,c,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(_e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(s=p,l=Date.now(),this.removeTargets(e,s,n))).next(p=>(r=p,c=Date.now(),this.removeOrphanedDocuments(e,s))).next(p=>(d=Date.now(),va()<=Ze.DEBUG&&_e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(l-o)+`ms
	Removed ${r} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:r,documentsRemoved:p})))}}function vx(t,e){return new _x(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(){this.changes=new Fo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,An.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ee.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e,n,s,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=i}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(s=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(s!==null&&hc(s.mutation,i,is.empty(),tn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,et()).next(()=>s))}getLocalViewOfDocuments(e,n,s=et()){const i=yo();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,s).next(r=>{let o=Ql();return r.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=yo();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,et()))}populateOverlays(e,n,s){const i=[];return s.forEach(r=>{n.has(r)||i.push(r)}),this.documentOverlayCache.getOverlays(e,i).next(r=>{r.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,s,i){let r=Ni();const o=uc(),l=function(){return uc()}();return n.forEach((c,d)=>{const h=s.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof Ur)?r=r.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),hc(h.mutation,d,h.mutation.getFieldMask(),tn.now())):o.set(d.key,is.empty())}),this.recalculateAndSaveOverlays(e,r).next(c=>(c.forEach((d,h)=>o.set(d,h)),n.forEach((d,h)=>{var p;return l.set(d,new Ex(h,(p=o.get(d))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,n){const s=uc();let i=new Lt((o,l)=>o-l),r=et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let h=s.get(c)||is.empty();h=l.applyToLocalView(d,h),s.set(c,h);const p=(i.get(l.batchId)||et()).add(c);i=i.insert(l.batchId,p)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,h=c.value,p=fT();h.forEach(_=>{if(!r.has(_)){const E=yT(n.get(_),s.get(_));E!==null&&p.set(_,E),r=r.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return ee.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,i){return function(o){return Ce.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):lT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,i):this.getDocumentsMatchingCollectionQuery(e,n,s,i)}getNextDocuments(e,n,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,i).next(r=>{const o=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,i-r.size):ee.resolve(yo());let l=Ic,c=r;return o.next(d=>ee.forEach(d,(h,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),r.get(h)?ee.resolve():this.remoteDocumentCache.getEntry(e,h).next(_=>{c=c.insert(h,_)}))).next(()=>this.populateOverlays(e,d,r)).next(()=>this.computeViews(e,c,d,et())).next(h=>({batchId:l,changes:dT(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ce(n)).next(s=>{let i=Ql();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,s,i){const r=n.collectionGroup;let o=Ql();return this.indexManager.getCollectionParents(e,r).next(l=>ee.forEach(l,c=>{const d=function(p,_){return new il(_,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(r));return this.getDocumentsMatchingCollectionQuery(e,d,s,i).next(h=>{h.forEach((p,_)=>{o=o.insert(p,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,r,i))).next(o=>{r.forEach((c,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,An.newInvalidDocument(h)))});let l=Ql();return o.forEach((c,d)=>{const h=r.get(c);h!==void 0&&hc(h.mutation,d,is.empty(),tn.now()),bd(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return ee.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Js(i.createTime)}}(n)),ee.resolve()}getNamedQuery(e,n){return ee.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(i){return{name:i.name,query:hx(i.bundledQuery),readTime:Js(i.readTime)}}(n)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(){this.overlays=new Lt(Ce.comparator),this.Qr=new Map}getOverlay(e,n){return ee.resolve(this.overlays.get(n))}getOverlays(e,n){const s=yo();return ee.forEach(n,i=>this.getOverlay(e,i).next(r=>{r!==null&&s.set(i,r)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((i,r)=>{this.St(e,n,r)}),ee.resolve()}removeOverlaysForBatchId(e,n,s){const i=this.Qr.get(s);return i!==void 0&&(i.forEach(r=>this.overlays=this.overlays.remove(r)),this.Qr.delete(s)),ee.resolve()}getOverlaysForCollection(e,n,s){const i=yo(),r=n.length+1,o=new Ce(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===r&&c.largestBatchId>s&&i.set(c.getKey(),c)}return ee.resolve(i)}getOverlaysForCollectionGroup(e,n,s,i){let r=new Lt((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>s){let h=r.get(d.largestBatchId);h===null&&(h=yo(),r=r.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=yo(),c=r.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=i)););return ee.resolve(l)}St(e,n,s){const i=this.overlays.get(s.key);if(i!==null){const o=this.Qr.get(i.largestBatchId).delete(s.key);this.Qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new Bk(n,s));let r=this.Qr.get(n);r===void 0&&(r=et(),this.Qr.set(n,r)),this.Qr.set(n,r.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(){this.sessionToken=_n.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(){this.$r=new nn(hn.Ur),this.Kr=new nn(hn.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const s=new hn(e,n);this.$r=this.$r.add(s),this.Kr=this.Kr.add(s)}Gr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.zr(new hn(e,n))}jr(e,n){e.forEach(s=>this.removeReference(s,n))}Hr(e){const n=new Ce(new Pt([])),s=new hn(n,e),i=new hn(n,e+1),r=[];return this.Kr.forEachInRange([s,i],o=>{this.zr(o),r.push(o.key)}),r}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new Ce(new Pt([])),s=new hn(n,e),i=new hn(n,e+1);let r=et();return this.Kr.forEachInRange([s,i],o=>{r=r.add(o.key)}),r}containsKey(e){const n=new hn(e,0),s=this.$r.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class hn{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return Ce.comparator(e.key,n.key)||Ge(e.Zr,n.Zr)}static Wr(e,n){return Ge(e.Zr,n.Zr)||Ce.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new nn(hn.Ur)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,i){const r=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new jk(r,n,s,i);this.mutationQueue.push(o);for(const l of i)this.Xr=this.Xr.add(new hn(l.key,r)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return ee.resolve(o)}lookupMutationBatch(e,n){return ee.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,i=this.ti(s),r=i<0?0:i;return ee.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?Tm:this.nr-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new hn(n,0),i=new hn(n,Number.POSITIVE_INFINITY),r=[];return this.Xr.forEachInRange([s,i],o=>{const l=this.ei(o.Zr);r.push(l)}),ee.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new nn(Ge);return n.forEach(i=>{const r=new hn(i,0),o=new hn(i,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([r,o],l=>{s=s.add(l.Zr)})}),ee.resolve(this.ni(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,i=s.length+1;let r=s;Ce.isDocumentKey(r)||(r=r.child(""));const o=new hn(new Ce(r),0);let l=new nn(Ge);return this.Xr.forEachWhile(c=>{const d=c.key.path;return!!s.isPrefixOf(d)&&(d.length===i&&(l=l.add(c.Zr)),!0)},o),ee.resolve(this.ni(l))}ni(e){const n=[];return e.forEach(s=>{const i=this.ei(s);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ft(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Xr;return ee.forEach(n.mutations,i=>{const r=new hn(i.key,n.batchId);return s=s.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Xr=s})}sr(e){}containsKey(e,n){const s=new hn(n,0),i=this.Xr.firstAfterOrEqual(s);return ee.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e){this.ii=e,this.docs=function(){return new Lt(Ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,i=this.docs.get(s),r=i?i.size:0,o=this.ii(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ee.resolve(s?s.document.mutableCopy():An.newInvalidDocument(n))}getEntries(e,n){let s=Ni();return n.forEach(i=>{const r=this.docs.get(i);s=s.insert(i,r?r.document.mutableCopy():An.newInvalidDocument(i))}),ee.resolve(s)}getDocumentsMatchingQuery(e,n,s,i){let r=Ni();const o=n.path,l=new Ce(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||nk(tk(h),s)<=0||(i.has(h.key)||bd(n,h))&&(r=r.insert(h.key,h.mutableCopy()))}return ee.resolve(r)}getAllFromCollectionGroup(e,n,s,i){De(9500)}si(e,n){return ee.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new Cx(this)}getSize(e){return ee.resolve(this.size)}}class Cx extends yx{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((s,i)=>{i.isValidDocument()?n.push(this.Br.addEntry(e,i)):this.Br.removeEntry(s)}),ee.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e){this.persistence=e,this.oi=new Fo(n=>Sm(n),Cm),this.lastRemoteSnapshotVersion=Fe.min(),this.highestTargetId=0,this._i=0,this.ai=new Nm,this.targetCount=0,this.ui=Ha.cr()}forEachTarget(e,n){return this.oi.forEach((s,i)=>n(i)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this._i&&(this._i=n),ee.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new Ha(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,ee.resolve()}updateTargetData(e,n){return this.Tr(n),ee.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,n,s){let i=0;const r=[];return this.oi.forEach((o,l)=>{l.sequenceNumber<=n&&s.get(l.targetId)===null&&(this.oi.delete(o),r.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),ee.waitFor(r).next(()=>i)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,n){const s=this.oi.get(n)||null;return ee.resolve(s)}addMatchingKeys(e,n,s){return this.ai.Gr(n,s),ee.resolve()}removeMatchingKeys(e,n,s){this.ai.jr(n,s);const i=this.persistence.referenceDelegate,r=[];return i&&n.forEach(o=>{r.push(i.markPotentiallyOrphaned(e,o))}),ee.waitFor(r)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),ee.resolve()}getMatchingKeysForTargetId(e,n){const s=this.ai.Yr(n);return ee.resolve(s)}containsKey(e,n){return ee.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e,n){this.ci={},this.overlays={},this.li=new gd(0),this.hi=!1,this.hi=!0,this.Pi=new Ax,this.referenceDelegate=e(this),this.Ti=new Rx(this),this.indexManager=new dx,this.remoteDocumentCache=function(i){return new Sx(i)}(s=>this.referenceDelegate.Ii(s)),this.serializer=new ux(n),this.Ei=new wx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Tx,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ci[e.toKey()];return s||(s=new Ix(n,this.referenceDelegate),this.ci[e.toKey()]=s),s}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,s){_e("MemoryPersistence","Starting transaction:",e);const i=new Px(this.li.next());return this.referenceDelegate.di(),s(i).next(r=>this.referenceDelegate.Ai(i).next(()=>r)).toPromise().then(r=>(i.raiseOnCommittedEvent(),r))}Ri(e,n){return ee.or(Object.values(this.ci).map(s=>()=>s.containsKey(e,n)))}}class Px extends ik{constructor(e){super(),this.currentSequenceNumber=e}}class Lm{constructor(e){this.persistence=e,this.Vi=new Nm,this.mi=null}static fi(e){return new Lm(e)}get gi(){if(this.mi)return this.mi;throw De(60996)}addReference(e,n,s){return this.Vi.addReference(s,n),this.gi.delete(s.toString()),ee.resolve()}removeReference(e,n,s){return this.Vi.removeReference(s,n),this.gi.add(s.toString()),ee.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),ee.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(i=>this.gi.add(i.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(r=>this.gi.add(r.toString()))}).next(()=>s.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.gi,s=>{const i=Ce.fromPath(s);return this.pi(e,i).next(r=>{r||n.removeEntry(i,Fe.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(s=>{s?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return ee.or([()=>ee.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class Vh{constructor(e,n){this.persistence=e,this.yi=new Fo(s=>ak(s.path),(s,i)=>s.isEqual(i)),this.garbageCollector=vx(this,n)}static fi(e,n){return new Vh(e,n)}di(){}Ai(e){return ee.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(i=>s+i))}br(e){let n=0;return this.yr(e,s=>{n++}).next(()=>n)}yr(e,n){return ee.forEach(this.yi,(s,i)=>this.Dr(e,s,i).next(r=>r?ee.resolve():n(i)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const i=this.persistence.getRemoteDocumentCache(),r=i.newChangeBuffer();return i.si(e,o=>this.Dr(e,o,n).next(l=>{l||(s++,r.removeEntry(o,Fe.min()))})).next(()=>r.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),ee.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),ee.resolve()}removeReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),ee.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=nh(e.data.value)),n}Dr(e,n,s){return ee.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.yi.get(n);return ee.resolve(i!==void 0&&i>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,n,s,i){this.targetId=e,this.fromCache=n,this.ds=s,this.As=i}static Rs(e,n){let s=et(),i=et();for(const r of n.docChanges)switch(r.type){case 0:s=s.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new Vm(e,n.fromCache,s,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return CP()?8:rk(Sn())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,s,i){const r={result:null};return this.ws(e,n).next(o=>{r.result=o}).next(()=>{if(!r.result)return this.bs(e,n,i,s).next(o=>{r.result=o})}).next(()=>{if(r.result)return;const o=new Ox;return this.Ss(e,n,o).next(l=>{if(r.result=l,this.fs)return this.Ds(e,n,o,l.size)})}).next(()=>r.result)}Ds(e,n,s,i){return s.documentReadCount<this.gs?(va()<=Ze.DEBUG&&_e("QueryEngine","SDK will not create cache indexes for query:",ya(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),ee.resolve()):(va()<=Ze.DEBUG&&_e("QueryEngine","Query:",ya(n),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.ps*i?(va()<=Ze.DEBUG&&_e("QueryEngine","The SDK decides to create cache indexes for query:",ya(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xs(n))):ee.resolve())}ws(e,n){if(ly(n))return ee.resolve(null);let s=Xs(n);return this.indexManager.getIndexType(e,s).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Dh(n,null,"F"),s=Xs(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(r=>{const o=et(...r);return this.ys.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,s).next(c=>{const d=this.vs(n,l);return this.Cs(n,d,o,c.readTime)?this.ws(e,Dh(n,null,"F")):this.Fs(e,d,n,c)}))})))}bs(e,n,s,i){return ly(n)||i.isEqual(Fe.min())?ee.resolve(null):this.ys.getDocuments(e,s).next(r=>{const o=this.vs(n,r);return this.Cs(n,o,s,i)?ee.resolve(null):(va()<=Ze.DEBUG&&_e("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ya(n)),this.Fs(e,o,n,ek(i,Ic)).next(l=>l))})}vs(e,n){let s=new nn(uT(e));return n.forEach((i,r)=>{bd(e,r)&&(s=s.add(r))}),s}Cs(e,n,s,i){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const r=e.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Ss(e,n,s){return va()<=Ze.DEBUG&&_e("QueryEngine","Using full collection scan to execute query:",ya(n)),this.ys.getDocumentsMatchingQuery(e,n,Rr.min(),s)}Fs(e,n,s,i){return this.ys.getDocumentsMatchingQuery(e,s,i).next(r=>(n.forEach(o=>{r=r.insert(o.key,o)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm="LocalStore",xx=3e8;class Dx{constructor(e,n,s,i){this.persistence=e,this.Ms=n,this.serializer=i,this.xs=new Lt(Ge),this.Os=new Fo(r=>Sm(r),Cm),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(s)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bx(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function Nx(t,e,n,s){return new Dx(t,e,n,s)}async function DT(t,e){const n=He(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let i;return n.mutationQueue.getAllMutationBatches(s).next(r=>(i=r,n.Ls(e),n.mutationQueue.getAllMutationBatches(s))).next(r=>{const o=[],l=[];let c=et();for(const d of i){o.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}for(const d of r){l.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(s,c).next(d=>({ks:d,removedBatchIds:o,addedBatchIds:l}))})})}function Lx(t,e){const n=He(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const i=e.batch.keys(),r=n.Bs.newChangeBuffer({trackRemovals:!0});return function(l,c,d,h){const p=d.batch,_=p.keys();let E=ee.resolve();return _.forEach(C=>{E=E.next(()=>h.getEntry(c,C)).next(D=>{const N=d.docVersions.get(C);ft(N!==null,48541),D.version.compareTo(N)<0&&(p.applyToRemoteDocument(D,d),D.isValidDocument()&&(D.setReadTime(d.commitVersion),h.addEntry(D)))})}),E.next(()=>l.mutationQueue.removeMutationBatch(c,p))}(n,s,e,r).next(()=>r.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(l){let c=et();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(s,i))})}function NT(t){const e=He(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function Vx(t,e){const n=He(t),s=e.snapshotVersion;let i=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const o=n.Bs.newChangeBuffer({trackRemovals:!0});i=n.xs;const l=[];e.targetChanges.forEach((h,p)=>{const _=i.get(p);if(!_)return;l.push(n.Ti.removeMatchingKeys(r,h.removedDocuments,p).next(()=>n.Ti.addMatchingKeys(r,h.addedDocuments,p)));let E=_.withSequenceNumber(r.currentSequenceNumber);e.targetMismatches.get(p)!==null?E=E.withResumeToken(_n.EMPTY_BYTE_STRING,Fe.min()).withLastLimboFreeSnapshotVersion(Fe.min()):h.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(h.resumeToken,s)),i=i.insert(p,E),function(D,N,j){return D.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=xx?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(_,E,h)&&l.push(n.Ti.updateTargetData(r,E))});let c=Ni(),d=et();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(r,h))}),l.push(Mx(r,o,e.documentUpdates).next(h=>{c=h.qs,d=h.Qs})),!s.isEqual(Fe.min())){const h=n.Ti.getLastRemoteSnapshotVersion(r).next(p=>n.Ti.setTargetsMetadata(r,r.currentSequenceNumber,s));l.push(h)}return ee.waitFor(l).next(()=>o.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,c,d)).next(()=>c)}).then(r=>(n.xs=i,r))}function Mx(t,e,n){let s=et(),i=et();return n.forEach(r=>s=s.add(r)),e.getEntries(t,s).next(r=>{let o=Ni();return n.forEach((l,c)=>{const d=r.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(Fe.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):_e(Mm,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{qs:o,Qs:i}})}function $x(t,e){const n=He(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Tm),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function Fx(t,e){const n=He(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let i;return n.Ti.getTargetData(s,e).next(r=>r?(i=r,ee.resolve(i)):n.Ti.allocateTargetId(s).next(o=>(i=new vr(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Ti.addTargetData(s,i).next(()=>i))))}).then(s=>{const i=n.xs.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.xs=n.xs.insert(s.targetId,s),n.Os.set(e,s.targetId)),s})}async function Dp(t,e,n){const s=He(t),i=s.xs.get(e),r=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",r,o=>s.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!sl(o))throw o;_e(Mm,`Failed to update sequence numbers for target ${e}: ${o}`)}s.xs=s.xs.remove(e),s.Os.delete(i.target)}function by(t,e,n){const s=He(t);let i=Fe.min(),r=et();return s.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,h){const p=He(c),_=p.Os.get(h);return _!==void 0?ee.resolve(p.xs.get(_)):p.Ti.getTargetData(d,h)}(s,o,Xs(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,s.Ti.getMatchingKeysForTargetId(o,l.targetId).next(c=>{r=c})}).next(()=>s.Ms.getDocumentsMatchingQuery(o,e,n?i:Fe.min(),n?r:et())).next(l=>(Ux(s,Sk(e),l),{documents:l,$s:r})))}function Ux(t,e,n){let s=t.Ns.get(e)||Fe.min();n.forEach((i,r)=>{r.readTime.compareTo(s)>0&&(s=r.readTime)}),t.Ns.set(e,s)}class wy{constructor(){this.activeTargetIds=xk()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jx{constructor(){this.xo=new wy,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,s){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new wy,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty="ConnectivityMonitor";class Ay{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){_e(Ty,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){_e(Ty,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uu=null;function Np(){return Uu===null?Uu=function(){return 268435456+Math.round(2147483648*Math.random())}():Uu++,"0x"+Uu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lf="RestConnection",Hx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class qx{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${s}/databases/${i}`,this.Go=this.databaseId.database===Oh?`project_id=${s}`:`project_id=${s}&database_id=${i}`}zo(e,n,s,i,r){const o=Np(),l=this.jo(e,n.toUriEncodedString());_e(Lf,`Sending RPC '${e}' ${o}:`,l,s);const c={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(c,i,r);const{host:d}=new URL(l),h=Za(d);return this.Jo(e,l,c,s,h).then(p=>(_e(Lf,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Ma(Lf,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",s),p})}Yo(e,n,s,i,r,o){return this.zo(e,n,s,i,r)}Ho(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+tl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,r)=>e[r]=i),s&&s.headers.forEach((i,r)=>e[r]=i)}jo(e,n){const s=Hx[e];return`${this.Ko}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const En="WebChannelConnection";class zx extends qx{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,i,r){const o=Np();return new Promise((l,c)=>{const d=new Mw;d.setWithCredentials(!0),d.listenOnce($w.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case th.NO_ERROR:const p=d.getResponseJson();_e(En,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case th.TIMEOUT:_e(En,`RPC '${e}' ${o} timed out`),c(new ge(Z.DEADLINE_EXCEEDED,"Request time out"));break;case th.HTTP_ERROR:const _=d.getStatus();if(_e(En,`RPC '${e}' ${o} failed with status:`,_,"response text:",d.getResponseText()),_>0){let E=d.getResponseJson();Array.isArray(E)&&(E=E[0]);const C=E==null?void 0:E.error;if(C&&C.status&&C.message){const D=function(j){const $=j.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf($)>=0?$:Z.UNKNOWN}(C.status);c(new ge(D,C.message))}else c(new ge(Z.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new ge(Z.UNAVAILABLE,"Connection failed."));break;default:De(9055,{h_:e,streamId:o,P_:d.getLastErrorCode(),T_:d.getLastError()})}}finally{_e(En,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(i);_e(En,`RPC '${e}' ${o} sending request:`,i),d.send(n,"POST",h,s,15)})}I_(e,n,s){const i=Np(),r=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=jw(),l=Uw(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Ho(c.initMessageHeaders,n,s),c.encodeInitMessageHeaders=!0;const h=r.join("");_e(En,`Creating RPC '${e}' stream ${i}: ${h}`,c);const p=o.createWebChannel(h,c);this.E_(p);let _=!1,E=!1;const C=new Wx({Zo:N=>{E?_e(En,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(_||(_e(En,`Opening RPC '${e}' stream ${i} transport.`),p.open(),_=!0),_e(En,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},Xo:()=>p.close()}),D=(N,j,$)=>{N.listen(j,U=>{try{$(U)}catch(B){setTimeout(()=>{throw B},0)}})};return D(p,Gl.EventType.OPEN,()=>{E||(_e(En,`RPC '${e}' stream ${i} transport opened.`),C.__())}),D(p,Gl.EventType.CLOSE,()=>{E||(E=!0,_e(En,`RPC '${e}' stream ${i} transport closed`),C.u_(),this.d_(p))}),D(p,Gl.EventType.ERROR,N=>{E||(E=!0,Ma(En,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),C.u_(new ge(Z.UNAVAILABLE,"The operation could not be completed")))}),D(p,Gl.EventType.MESSAGE,N=>{var j;if(!E){const $=N.data[0];ft(!!$,16349);const U=$,B=(U==null?void 0:U.error)||((j=U[0])===null||j===void 0?void 0:j.error);if(B){_e(En,`RPC '${e}' stream ${i} received error:`,B);const se=B.status;let re=function(T){const R=Kt[T];if(R!==void 0)return bT(R)}(se),x=B.message;re===void 0&&(re=Z.INTERNAL,x="Unknown error status: "+se+" with message "+B.message),E=!0,C.u_(new ge(re,x)),p.close()}else _e(En,`RPC '${e}' stream ${i} received:`,$),C.c_($)}}),D(l,Fw.STAT_EVENT,N=>{N.stat===wp.PROXY?_e(En,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===wp.NOPROXY&&_e(En,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.a_()},0),C}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function Vf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Id(t){return new Yk(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e,n,s=1e3,i=1.5,r=6e4){this.xi=e,this.timerId=n,this.A_=s,this.R_=i,this.V_=r,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),s=Math.max(0,Date.now()-this.g_),i=Math.max(0,n-s);i>0&&_e("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy="PersistentStream";class VT{constructor(e,n,s,i,r,o,l,c){this.xi=e,this.S_=s,this.D_=i,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new LT(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===Z.RESOURCE_EXHAUSTED?(Di(n.toString()),Di("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,i])=>{this.v_===n&&this.z_(s,i)},s=>{e(()=>{const i=new ge(Z.UNKNOWN,"Fetching auth token failed: "+s.message);return this.j_(i)})})}z_(e,n){const s=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{s(()=>this.listener.e_())}),this.stream.n_(()=>{s(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(i=>{s(()=>this.j_(i))}),this.stream.onMessage(i=>{s(()=>++this.M_==1?this.J_(i):this.onNext(i))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return _e(Iy,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(_e(Iy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Kx extends VT{constructor(e,n,s,i,r,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,i,o),this.serializer=r}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=Zk(this.serializer,e),s=function(r){if(!("targetChange"in r))return Fe.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?Fe.min():o.readTime?Js(o.readTime):Fe.min()}(e);return this.listener.Y_(n,s)}Z_(e){const n={};n.database=xp(this.serializer),n.addTarget=function(r,o){let l;const c=o.target;if(l=Cp(c)?{documents:nx(r,c)}:{query:sx(r,c).gt},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=AT(r,o.resumeToken);const d=Pp(r,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(Fe.min())>0){l.readTime=Lh(r,o.snapshotVersion.toTimestamp());const d=Pp(r,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const s=rx(this.serializer,e);s&&(n.labels=s),this.Q_(n)}X_(e){const n={};n.database=xp(this.serializer),n.removeTarget=e,this.Q_(n)}}class Gx extends VT{constructor(e,n,s,i,r,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,i,o),this.serializer=r}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return ft(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ft(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){ft(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=tx(e.writeResults,e.commitTime),s=Js(e.commitTime);return this.listener.ra(s,n)}ia(){const e={};e.database=xp(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>ex(this.serializer,s))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{}class Yx extends Qx{constructor(e,n,s,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=i,this.sa=!1}oa(){if(this.sa)throw new ge(Z.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,s,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.zo(e,Op(n,s),i,r,o)).catch(r=>{throw r.name==="FirebaseError"?(r.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new ge(Z.UNKNOWN,r.toString())})}Yo(e,n,s,i,r){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Yo(e,Op(n,s),i,o,l,r)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ge(Z.UNKNOWN,o.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class Xx{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Di(n),this.ua=!1):_e("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko="RemoteStore";class Jx{constructor(e,n,s,i,r){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=r,this.Ra.No(o=>{s.enqueueAndForget(async()=>{Uo(this)&&(_e(ko,"Restarting streams for network reachability change."),await async function(c){const d=He(c);d.da.add(4),await Hc(d),d.Va.set("Unknown"),d.da.delete(4),await Sd(d)}(this))})}),this.Va=new Xx(s,i)}}async function Sd(t){if(Uo(t))for(const e of t.Aa)await e(!0)}async function Hc(t){for(const e of t.Aa)await e(!1)}function MT(t,e){const n=He(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),jm(n)?Um(n):rl(n).N_()&&Fm(n,e))}function $m(t,e){const n=He(t),s=rl(n);n.Ea.delete(e),s.N_()&&$T(n,e),n.Ea.size===0&&(s.N_()?s.k_():Uo(n)&&n.Va.set("Unknown"))}function Fm(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Fe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}rl(t).Z_(e)}function $T(t,e){t.ma.Ke(e),rl(t).X_(e)}function Um(t){t.ma=new zk({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),rl(t).start(),t.Va.ca()}function jm(t){return Uo(t)&&!rl(t).O_()&&t.Ea.size>0}function Uo(t){return He(t).da.size===0}function FT(t){t.ma=void 0}async function Zx(t){t.Va.set("Online")}async function eD(t){t.Ea.forEach((e,n)=>{Fm(t,e)})}async function tD(t,e){FT(t),jm(t)?(t.Va.Pa(e),Um(t)):t.Va.set("Unknown")}async function nD(t,e,n){if(t.Va.set("Online"),e instanceof TT&&e.state===2&&e.cause)try{await async function(i,r){const o=r.cause;for(const l of r.targetIds)i.Ea.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.Ea.delete(l),i.ma.removeTarget(l))}(t,e)}catch(s){_e(ko,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Mh(t,s)}else if(e instanceof rh?t.ma.Xe(e):e instanceof wT?t.ma.ot(e):t.ma.nt(e),!n.isEqual(Fe.min()))try{const s=await NT(t.localStore);n.compareTo(s)>=0&&await function(r,o){const l=r.ma.It(o);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const h=r.Ea.get(d);h&&r.Ea.set(d,h.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,d)=>{const h=r.Ea.get(c);if(!h)return;r.Ea.set(c,h.withResumeToken(_n.EMPTY_BYTE_STRING,h.snapshotVersion)),$T(r,c);const p=new vr(h.target,c,d,h.sequenceNumber);Fm(r,p)}),r.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(s){_e(ko,"Failed to raise snapshot:",s),await Mh(t,s)}}async function Mh(t,e,n){if(!sl(e))throw e;t.da.add(1),await Hc(t),t.Va.set("Offline"),n||(n=()=>NT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{_e(ko,"Retrying IndexedDB access"),await n(),t.da.delete(1),await Sd(t)})}function UT(t,e){return e().catch(n=>Mh(t,n,e))}async function Cd(t){const e=He(t),n=xr(e);let s=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:Tm;for(;sD(e);)try{const i=await $x(e.localStore,s);if(i===null){e.Ia.length===0&&n.k_();break}s=i.batchId,iD(e,i)}catch(i){await Mh(e,i)}jT(e)&&BT(e)}function sD(t){return Uo(t)&&t.Ia.length<10}function iD(t,e){t.Ia.push(e);const n=xr(t);n.N_()&&n.ea&&n.ta(e.mutations)}function jT(t){return Uo(t)&&!xr(t).O_()&&t.Ia.length>0}function BT(t){xr(t).start()}async function rD(t){xr(t).ia()}async function oD(t){const e=xr(t);for(const n of t.Ia)e.ta(n.mutations)}async function aD(t,e,n){const s=t.Ia.shift(),i=km.from(s,e,n);await UT(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Cd(t)}async function lD(t,e){e&&xr(t).ea&&await async function(s,i){if(function(o){return qk(o)&&o!==Z.ABORTED}(i.code)){const r=s.Ia.shift();xr(s).L_(),await UT(s,()=>s.remoteSyncer.rejectFailedWrite(r.batchId,i)),await Cd(s)}}(t,e),jT(t)&&BT(t)}async function Sy(t,e){const n=He(t);n.asyncQueue.verifyOperationInProgress(),_e(ko,"RemoteStore received new credentials");const s=Uo(n);n.da.add(3),await Hc(n),s&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await Sd(n)}async function cD(t,e){const n=He(t);e?(n.da.delete(2),await Sd(n)):e||(n.da.add(2),await Hc(n),n.Va.set("Unknown"))}function rl(t){return t.fa||(t.fa=function(n,s,i){const r=He(n);return r.oa(),new Kx(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(t.datastore,t.asyncQueue,{e_:Zx.bind(null,t),n_:eD.bind(null,t),i_:tD.bind(null,t),Y_:nD.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),jm(t)?Um(t):t.Va.set("Unknown")):(await t.fa.stop(),FT(t))})),t.fa}function xr(t){return t.ga||(t.ga=function(n,s,i){const r=He(n);return r.oa(),new Gx(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:rD.bind(null,t),i_:lD.bind(null,t),na:oD.bind(null,t),ra:aD.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await Cd(t)):(await t.ga.stop(),t.Ia.length>0&&(_e(ko,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e,n,s,i,r){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=i,this.removalCallback=r,this.deferred=new Ci,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,i,r){const o=Date.now()+s,l=new Bm(e,n,o,i,r);return l.start(s),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hm(t,e){if(Di("AsyncQueue",`${e}: ${t}`),sl(t))return new ge(Z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{static emptySet(e){return new Oa(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Ce.comparator(n.key,s.key):(n,s)=>Ce.comparator(n.key,s.key),this.keyedMap=Ql(),this.sortedSet=new Lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Oa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(!i.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Oa;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(){this.pa=new Lt(Ce.comparator)}track(e){const n=e.doc.key,s=this.pa.get(n);s?e.type!==0&&s.type===3?this.pa=this.pa.insert(n,e):e.type===3&&s.type!==1?this.pa=this.pa.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.pa=this.pa.remove(n):e.type===1&&s.type===2?this.pa=this.pa.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):De(63341,{Vt:e,ya:s}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,s)=>{e.push(s)}),e}}class qa{constructor(e,n,s,i,r,o,l,c,d){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,s,i,r){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new qa(e,n,Oa.emptySet(n),o,s,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ed(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==s[i].type||!n[i].doc.isEqual(s[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class hD{constructor(){this.queries=Ry(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const i=He(n),r=i.queries;i.queries=Ry(),r.forEach((o,l)=>{for(const c of l.Sa)c.onError(s)})})(this,new ge(Z.ABORTED,"Firestore shutting down"))}}function Ry(){return new Fo(t=>cT(t),Ed)}async function qm(t,e){const n=He(t);let s=3;const i=e.query;let r=n.queries.get(i);r?!r.Da()&&e.va()&&(s=2):(r=new uD,s=e.va()?0:1);try{switch(s){case 0:r.ba=await n.onListen(i,!0);break;case 1:r.ba=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=Hm(o,`Initialization of query '${ya(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,r),r.Sa.push(e),e.Fa(n.onlineState),r.ba&&e.Ma(r.ba)&&zm(n)}async function Wm(t,e){const n=He(t),s=e.query;let i=3;const r=n.queries.get(s);if(r){const o=r.Sa.indexOf(e);o>=0&&(r.Sa.splice(o,1),r.Sa.length===0?i=e.va()?0:1:!r.Da()&&e.va()&&(i=2))}switch(i){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function dD(t,e){const n=He(t);let s=!1;for(const i of e){const r=i.query,o=n.queries.get(r);if(o){for(const l of o.Sa)l.Ma(i)&&(s=!0);o.ba=i}}s&&zm(n)}function fD(t,e,n){const s=He(t),i=s.queries.get(e);if(i)for(const r of i.Sa)r.onError(n);s.queries.delete(e)}function zm(t){t.Ca.forEach(e=>{e.next()})}var Lp,Py;(Py=Lp||(Lp={})).xa="default",Py.Cache="cache";class Km{constructor(e,n,s){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=s||{}}Ma(e){if(!this.options.includeMetadataChanges){const s=[];for(const i of e.docChanges)i.type!==3&&s.push(i);e=new qa(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const s=n!=="Offline";return(!this.options.Qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=qa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==Lp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e){this.key=e}}class qT{constructor(e){this.key=e}}class pD{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=et(),this.mutatedKeys=et(),this.Za=uT(e),this.Xa=new Oa(this.Za)}get eu(){return this.Ha}tu(e,n){const s=n?n.nu:new Cy,i=n?n.Xa:this.Xa;let r=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{const _=i.get(h),E=bd(this.query,p)?p:null,C=!!_&&this.mutatedKeys.has(_.key),D=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let N=!1;_&&E?_.data.isEqual(E.data)?C!==D&&(s.track({type:3,doc:E}),N=!0):this.ru(_,E)||(s.track({type:2,doc:E}),N=!0,(c&&this.Za(E,c)>0||d&&this.Za(E,d)<0)&&(l=!0)):!_&&E?(s.track({type:0,doc:E}),N=!0):_&&!E&&(s.track({type:1,doc:_}),N=!0,(c||d)&&(l=!0)),N&&(E?(o=o.add(E),r=D?r.add(h):r.delete(h)):(o=o.delete(h),r=r.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),r=r.delete(h.key),s.track({type:1,doc:h})}return{Xa:o,nu:s,Cs:l,mutatedKeys:r}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,i){const r=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const o=e.nu.wa();o.sort((h,p)=>function(E,C){const D=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De(20277,{Vt:N})}};return D(E)-D(C)}(h.type,p.type)||this.Za(h.doc,p.doc)),this.iu(s),i=i!=null&&i;const l=n&&!i?this.su():[],c=this.Ya.size===0&&this.current&&!i?1:0,d=c!==this.Ja;return this.Ja=c,o.length!==0||d?{snapshot:new qa(this.query,e.Xa,r,o,e.mutatedKeys,c===0,d,!1,!!s&&s.resumeToken.approximateByteSize()>0),ou:l}:{ou:l}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new Cy,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=et(),this.Xa.forEach(s=>{this._u(s.key)&&(this.Ya=this.Ya.add(s.key))});const n=[];return e.forEach(s=>{this.Ya.has(s)||n.push(new qT(s))}),this.Ya.forEach(s=>{e.has(s)||n.push(new HT(s))}),n}au(e){this.Ha=e.$s,this.Ya=et();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return qa.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const Gm="SyncEngine";class mD{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class gD{constructor(e){this.key=e,this.cu=!1}}class _D{constructor(e,n,s,i,r,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.lu={},this.hu=new Fo(l=>cT(l),Ed),this.Pu=new Map,this.Tu=new Set,this.Iu=new Lt(Ce.comparator),this.Eu=new Map,this.du=new Nm,this.Au={},this.Ru=new Map,this.Vu=Ha.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function vD(t,e,n=!0){const s=YT(t);let i;const r=s.hu.get(e);return r?(s.sharedClientState.addLocalQueryTarget(r.targetId),i=r.view.uu()):i=await WT(s,e,n,!0),i}async function yD(t,e){const n=YT(t);await WT(n,e,!0,!1)}async function WT(t,e,n,s){const i=await Fx(t.localStore,Xs(e)),r=i.targetId,o=t.sharedClientState.addLocalQueryTarget(r,n);let l;return s&&(l=await ED(t,e,r,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&MT(t.remoteStore,i),l}async function ED(t,e,n,s,i){t.fu=(p,_,E)=>async function(D,N,j,$){let U=N.view.tu(j);U.Cs&&(U=await by(D.localStore,N.query,!1).then(({documents:x})=>N.view.tu(x,U)));const B=$&&$.targetChanges.get(N.targetId),se=$&&$.targetMismatches.get(N.targetId)!=null,re=N.view.applyChanges(U,D.isPrimaryClient,B,se);return ky(D,N.targetId,re.ou),re.snapshot}(t,p,_,E);const r=await by(t.localStore,e,!0),o=new pD(e,r.$s),l=o.tu(r.documents),c=Bc.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",i),d=o.applyChanges(l,t.isPrimaryClient,c);ky(t,n,d.ou);const h=new mD(e,n,o);return t.hu.set(e,h),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),d.snapshot}async function bD(t,e,n){const s=He(t),i=s.hu.get(e),r=s.Pu.get(i.targetId);if(r.length>1)return s.Pu.set(i.targetId,r.filter(o=>!Ed(o,e))),void s.hu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(i.targetId),s.sharedClientState.isActiveQueryTarget(i.targetId)||await Dp(s.localStore,i.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(i.targetId),n&&$m(s.remoteStore,i.targetId),Vp(s,i.targetId)}).catch(nl)):(Vp(s,i.targetId),await Dp(s.localStore,i.targetId,!0))}async function wD(t,e){const n=He(t),s=n.hu.get(e),i=n.Pu.get(s.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),$m(n.remoteStore,s.targetId))}async function TD(t,e,n){const s=OD(t);try{const i=await function(o,l){const c=He(o),d=tn.now(),h=l.reduce((E,C)=>E.add(C.key),et());let p,_;return c.persistence.runTransaction("Locally write mutations","readwrite",E=>{let C=Ni(),D=et();return c.Bs.getEntries(E,h).next(N=>{C=N,C.forEach((j,$)=>{$.isValidDocument()||(D=D.add(j))})}).next(()=>c.localDocuments.getOverlayedDocuments(E,C)).next(N=>{p=N;const j=[];for(const $ of l){const U=Fk($,p.get($.key).overlayedDocument);U!=null&&j.push(new Ur($.key,U,tT(U.value.mapValue),ys.exists(!0)))}return c.mutationQueue.addMutationBatch(E,d,j,l)}).next(N=>{_=N;const j=N.applyToLocalDocumentSet(p,D);return c.documentOverlayCache.saveOverlays(E,N.batchId,j)})}).then(()=>({batchId:_.batchId,changes:dT(p)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(i.batchId),function(o,l,c){let d=o.Au[o.currentUser.toKey()];d||(d=new Lt(Ge)),d=d.insert(l,c),o.Au[o.currentUser.toKey()]=d}(s,i.batchId,n),await qc(s,i.changes),await Cd(s.remoteStore)}catch(i){const r=Hm(i,"Failed to persist write");n.reject(r)}}async function zT(t,e){const n=He(t);try{const s=await Vx(n.localStore,e);e.targetChanges.forEach((i,r)=>{const o=n.Eu.get(r);o&&(ft(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.cu=!0:i.modifiedDocuments.size>0?ft(o.cu,14607):i.removedDocuments.size>0&&(ft(o.cu,42227),o.cu=!1))}),await qc(n,s,e)}catch(s){await nl(s)}}function Oy(t,e,n){const s=He(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const i=[];s.hu.forEach((r,o)=>{const l=o.view.Fa(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const c=He(o);c.onlineState=l;let d=!1;c.queries.forEach((h,p)=>{for(const _ of p.Sa)_.Fa(l)&&(d=!0)}),d&&zm(c)}(s.eventManager,e),i.length&&s.lu.Y_(i),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function AD(t,e,n){const s=He(t);s.sharedClientState.updateQueryState(e,"rejected",n);const i=s.Eu.get(e),r=i&&i.key;if(r){let o=new Lt(Ce.comparator);o=o.insert(r,An.newNoDocument(r,Fe.min()));const l=et().add(r),c=new Ad(Fe.min(),new Map,new Lt(Ge),o,l);await zT(s,c),s.Iu=s.Iu.remove(r),s.Eu.delete(e),Qm(s)}else await Dp(s.localStore,e,!1).then(()=>Vp(s,e,n)).catch(nl)}async function ID(t,e){const n=He(t),s=e.batch.batchId;try{const i=await Lx(n.localStore,e);GT(n,s,null),KT(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await qc(n,i)}catch(i){await nl(i)}}async function SD(t,e,n){const s=He(t);try{const i=await function(o,l){const c=He(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,l).next(p=>(ft(p!==null,37113),h=p.keys(),c.mutationQueue.removeMutationBatch(d,p))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})}(s.localStore,e);GT(s,e,n),KT(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await qc(s,i)}catch(i){await nl(i)}}function KT(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function GT(t,e,n){const s=He(t);let i=s.Au[s.currentUser.toKey()];if(i){const r=i.get(e);r&&(n?r.reject(n):r.resolve(),i=i.remove(e)),s.Au[s.currentUser.toKey()]=i}}function Vp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Pu.get(e))t.hu.delete(s),n&&t.lu.gu(s,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(s=>{t.du.containsKey(s)||QT(t,s)})}function QT(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&($m(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),Qm(t))}function ky(t,e,n){for(const s of n)s instanceof HT?(t.du.addReference(s.key,e),CD(t,s)):s instanceof qT?(_e(Gm,"Document no longer in limbo: "+s.key),t.du.removeReference(s.key,e),t.du.containsKey(s.key)||QT(t,s.key)):De(19791,{pu:s})}function CD(t,e){const n=e.key,s=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(s)||(_e(Gm,"New document in limbo: "+n),t.Tu.add(s),Qm(t))}function Qm(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new Ce(Pt.fromString(e)),s=t.Vu.next();t.Eu.set(s,new gD(n)),t.Iu=t.Iu.insert(n,s),MT(t.remoteStore,new vr(Xs(yd(n.path)),s,"TargetPurposeLimboResolution",gd.le))}}async function qc(t,e,n){const s=He(t),i=[],r=[],o=[];s.hu.isEmpty()||(s.hu.forEach((l,c)=>{o.push(s.fu(c,e,n).then(d=>{var h;if((d||n)&&s.isPrimaryClient){const p=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;s.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(d){i.push(d);const p=Vm.Rs(c.targetId,d);r.push(p)}}))}),await Promise.all(o),s.lu.Y_(i),await async function(c,d){const h=He(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>ee.forEach(d,_=>ee.forEach(_.ds,E=>h.persistence.referenceDelegate.addReference(p,_.targetId,E)).next(()=>ee.forEach(_.As,E=>h.persistence.referenceDelegate.removeReference(p,_.targetId,E)))))}catch(p){if(!sl(p))throw p;_e(Mm,"Failed to update sequence numbers: "+p)}for(const p of d){const _=p.targetId;if(!p.fromCache){const E=h.xs.get(_),C=E.snapshotVersion,D=E.withLastLimboFreeSnapshotVersion(C);h.xs=h.xs.insert(_,D)}}}(s.localStore,r))}async function RD(t,e){const n=He(t);if(!n.currentUser.isEqual(e)){_e(Gm,"User change. New user:",e.toKey());const s=await DT(n.localStore,e);n.currentUser=e,function(r,o){r.Ru.forEach(l=>{l.forEach(c=>{c.reject(new ge(Z.CANCELLED,o))})}),r.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await qc(n,s.ks)}}function PD(t,e){const n=He(t),s=n.Eu.get(e);if(s&&s.cu)return et().add(s.key);{let i=et();const r=n.Pu.get(e);if(!r)return i;for(const o of r){const l=n.hu.get(o);i=i.unionWith(l.view.eu)}return i}}function YT(t){const e=He(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=zT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=PD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=AD.bind(null,e),e.lu.Y_=dD.bind(null,e.eventManager),e.lu.gu=fD.bind(null,e.eventManager),e}function OD(t){const e=He(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ID.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=SD.bind(null,e),e}class $h{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Id(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return Nx(this.persistence,new kx,e.initialUser,this.serializer)}Su(e){return new xT(Lm.fi,this.serializer)}bu(e){return new jx}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$h.provider={build:()=>new $h};class kD extends $h{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){ft(this.persistence.referenceDelegate instanceof Vh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new gx(s,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?Wn.withCacheSize(this.cacheSizeBytes):Wn.DEFAULT;return new xT(s=>Vh.fi(s,n),this.serializer)}}class Mp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Oy(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=RD.bind(null,this.syncEngine),await cD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new hD}()}createDatastore(e){const n=Id(e.databaseInfo.databaseId),s=function(r){return new zx(r)}(e.databaseInfo);return function(r,o,l,c){return new Yx(r,o,l,c)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,i,r,o,l){return new Jx(s,i,r,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Oy(this.syncEngine,n,0),function(){return Ay.C()?new Ay:new Bx}())}createSyncEngine(e,n){return function(i,r,o,l,c,d,h){const p=new _D(i,r,o,l,c,d);return h&&(p.mu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const r=He(i);_e(ko,"RemoteStore shutting down."),r.da.add(5),await Hc(r),r.Ra.shutdown(),r.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Mp.provider={build:()=>new Mp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Di("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr="FirestoreClient";class xD{constructor(e,n,s,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=i,this.user=bn.UNAUTHENTICATED,this.clientId=Ww.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(s,async o=>{_e(Dr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(_e(Dr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ci;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Hm(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Mf(t,e){t.asyncQueue.verifyOperationInProgress(),_e(Dr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async i=>{s.isEqual(i)||(await DT(e.localStore,i),s=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function xy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await DD(t);_e(Dr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>Sy(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>Sy(e.remoteStore,i)),t._onlineComponents=e}async function DD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){_e(Dr,"Using user provided OfflineComponentProvider");try{await Mf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Z.FAILED_PRECONDITION||i.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ma("Error using user provided cache. Falling back to memory cache: "+n),await Mf(t,new $h)}}else _e(Dr,"Using default OfflineComponentProvider"),await Mf(t,new kD(void 0));return t._offlineComponents}async function XT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(_e(Dr,"Using user provided OnlineComponentProvider"),await xy(t,t._uninitializedComponentsProvider._online)):(_e(Dr,"Using default OnlineComponentProvider"),await xy(t,new Mp))),t._onlineComponents}function ND(t){return XT(t).then(e=>e.syncEngine)}async function Fh(t){const e=await XT(t),n=e.eventManager;return n.onListen=vD.bind(null,e.syncEngine),n.onUnlisten=bD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=yD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=wD.bind(null,e.syncEngine),n}function LD(t,e,n={}){const s=new Ci;return t.asyncQueue.enqueueAndForget(async()=>function(r,o,l,c,d){const h=new Ym({next:_=>{h.xu(),o.enqueueAndForget(()=>Wm(r,p));const E=_.docs.has(l);!E&&_.fromCache?d.reject(new ge(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&_.fromCache&&c&&c.source==="server"?d.reject(new ge(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(_)},error:_=>d.reject(_)}),p=new Km(yd(l.path),h,{includeMetadataChanges:!0,Qa:!0});return qm(r,p)}(await Fh(t),t.asyncQueue,e,n,s)),s.promise}function VD(t,e,n={}){const s=new Ci;return t.asyncQueue.enqueueAndForget(async()=>function(r,o,l,c,d){const h=new Ym({next:_=>{h.xu(),o.enqueueAndForget(()=>Wm(r,p)),_.fromCache&&c.source==="server"?d.reject(new ge(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(_)},error:_=>d.reject(_)}),p=new Km(l,h,{includeMetadataChanges:!0,Qa:!0});return qm(r,p)}(await Fh(t),t.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(t,e,n){if(!n)throw new ge(Z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function MD(t,e,n,s){if(e===!0&&s===!0)throw new ge(Z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ny(t){if(!Ce.isDocumentKey(t))throw new ge(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Ly(t){if(Ce.isDocumentKey(t))throw new ge(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Rd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":De(12329,{type:typeof t})}function Qn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ge(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Rd(t);throw new ge(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function $D(t,e){if(e<=0)throw new ge(Z.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA="firestore.googleapis.com",Vy=!0;class My{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ge(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=eA,this.ssl=Vy}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Vy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=kT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<px)throw new ge(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}MD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JT((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ge(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ge(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ge(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,i){return s.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pd{constructor(e,n,s,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new My({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new My(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new WO;switch(s.type){case"firstParty":return new QO(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ge(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=Dy.get(n);s&&(_e("ComponentProvider","Removing Datastore"),Dy.delete(n),s.terminate())}(this),Promise.resolve()}}function FD(t,e,n,s={}){var i;t=Qn(t,Pd);const r=Za(e),o=t._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;r&&(Rw(`https://${c}`),Pw("Firestore",!0)),o.host!==eA&&o.host!==c&&Ma("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},o),{host:c,ssl:r,emulatorOptions:s});if(!ki(d,l)&&(t._setSettings(d),s.mockUserToken)){let h,p;if(typeof s.mockUserToken=="string")h=s.mockUserToken,p=bn.MOCK_USER;else{h=vP(s.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const _=s.mockUserToken.sub||s.mockUserToken.user_id;if(!_)throw new ge(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new bn(_)}t._authCredentials=new zO(new Hw(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ji(this.firestore,e,this._query)}}class In{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ir(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new In(this.firestore,e,this._key)}}class Ir extends ji{constructor(e,n,s){super(e,n,yd(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new In(this.firestore,null,new Ce(e))}withConverter(e){return new Ir(this.firestore,e,this._path)}}function ri(t,e,...n){if(t=Ft(t),ZT("collection","path",e),t instanceof Pd){const s=Pt.fromString(e,...n);return Ly(s),new Ir(t,null,s)}{if(!(t instanceof In||t instanceof Ir))throw new ge(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Pt.fromString(e,...n));return Ly(s),new Ir(t.firestore,null,s)}}function Yn(t,e,...n){if(t=Ft(t),arguments.length===1&&(e=Ww.newId()),ZT("doc","path",e),t instanceof Pd){const s=Pt.fromString(e,...n);return Ny(s),new In(t,null,new Ce(s))}{if(!(t instanceof In||t instanceof Ir))throw new ge(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Pt.fromString(e,...n));return Ny(s),new In(t.firestore,t instanceof Ir?t.converter:null,new Ce(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y="AsyncQueue";class Fy{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new LT(this,"async_queue_retry"),this.rc=()=>{const s=Vf();s&&_e($y,"Visibility state changed to "+s.visibilityState),this.x_.b_()},this.sc=e;const n=Vf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=Vf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new Ci;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!sl(e))throw e;_e($y,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(s=>{throw this.Xu=s,this.ec=!1,Di("INTERNAL UNHANDLED ERROR: ",Uy(s)),s}).then(s=>(this.ec=!1,s))));return this.sc=n,n}enqueueAfterDelay(e,n,s){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const i=Bm.createAndSchedule(this,e,n,s,r=>this.uc(r));return this.Zu.push(i),i}oc(){this.Xu&&De(47125,{cc:Uy(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function Uy(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jy(t){return function(n,s){if(typeof n!="object"||n===null)return!1;const i=n;for(const r of s)if(r in i&&typeof i[r]=="function")return!0;return!1}(t,["next","error","complete"])}class Li extends Pd{constructor(e,n,s,i){super(e,n,s,i),this.type="firestore",this._queue=new Fy,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Fy(e),this._firestoreClient=void 0,await e}}}function UD(t,e){const n=typeof t=="object"?t:Dw(),s=typeof t=="string"?t:Oh,i=bm(n,"firestore").getImmediate({identifier:s});if(!i._initialized){const r=gP("firestore");r&&FD(i,...r)}return i}function Od(t){if(t._terminated)throw new ge(Z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||jD(t),t._firestoreClient}function jD(t){var e,n,s;const i=t._freezeSettings(),r=function(l,c,d,h){return new uk(l,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,JT(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=i.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new xD(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wa(_n.fromBase64String(e))}catch(n){throw new ge(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Wa(_n.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ge(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ge(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ge(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ge(this._lat,e._lat)||Ge(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,i){if(s.length!==i.length)return!1;for(let r=0;r<s.length;++r)if(s[r]!==i[r])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD=/^__.*__$/;class HD{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Ur(e,this.data,this.fieldMask,n,this.fieldTransforms):new jc(e,this.data,n,this.fieldTransforms)}}class tA{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Ur(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function nA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De(40011,{Ic:t})}}class xd{constructor(e,n,s,i,r,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=i,r===void 0&&this.Ec(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new xd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.dc({path:s,Rc:!1});return i.Vc(e),i}mc(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.dc({path:s,Rc:!1});return i.Ec(),i}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Uh(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(nA(this.Ic)&&BD.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class qD{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Id(e)}bc(e,n,s,i=!1){return new xd({Ic:e,methodName:n,wc:s,path:gn.emptyPath(),Rc:!1,yc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Dd(t){const e=t._freezeSettings(),n=Id(t._databaseId);return new qD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function sA(t,e,n,s,i,r={}){const o=t.bc(r.merge||r.mergeFields?2:0,e,n,i);ng("Data must be an object, but it was:",o,s);const l=rA(s,o);let c,d;if(r.merge)c=new is(o.fieldMask),d=o.fieldTransforms;else if(r.mergeFields){const h=[];for(const p of r.mergeFields){const _=$p(e,p,n);if(!o.contains(_))throw new ge(Z.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);aA(h,_)||h.push(_)}c=new is(h),d=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,d=o.fieldTransforms;return new HD(new Kn(l),c,d)}class Nd extends ol{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Nd}}function iA(t,e,n){return new xd({Ic:3,wc:e.settings.wc,methodName:t._methodName,Rc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Zm extends ol{_toFieldTransform(e){return new Pm(e.path,new Oc)}isEqual(e){return e instanceof Zm}}class eg extends ol{constructor(e,n){super(e),this.Sc=n}_toFieldTransform(e){const n=iA(this,e,!0),s=this.Sc.map(r=>jo(r,n)),i=new ja(s);return new Pm(e.path,i)}isEqual(e){return e instanceof eg&&ki(this.Sc,e.Sc)}}class tg extends ol{constructor(e,n){super(e),this.Sc=n}_toFieldTransform(e){const n=iA(this,e,!0),s=this.Sc.map(r=>jo(r,n)),i=new Ba(s);return new Pm(e.path,i)}isEqual(e){return e instanceof tg&&ki(this.Sc,e.Sc)}}function WD(t,e,n,s){const i=t.bc(1,e,n);ng("Data must be an object, but it was:",i,s);const r=[],o=Kn.empty();Fr(s,(c,d)=>{const h=sg(e,c,n);d=Ft(d);const p=i.mc(h);if(d instanceof Nd)r.push(h);else{const _=jo(d,p);_!=null&&(r.push(h),o.set(h,_))}});const l=new is(r);return new tA(o,l,i.fieldTransforms)}function zD(t,e,n,s,i,r){const o=t.bc(1,e,n),l=[$p(e,s,n)],c=[i];if(r.length%2!=0)throw new ge(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<r.length;_+=2)l.push($p(e,r[_])),c.push(r[_+1]);const d=[],h=Kn.empty();for(let _=l.length-1;_>=0;--_)if(!aA(d,l[_])){const E=l[_];let C=c[_];C=Ft(C);const D=o.mc(E);if(C instanceof Nd)d.push(E);else{const N=jo(C,D);N!=null&&(d.push(E),h.set(E,N))}}const p=new is(d);return new tA(h,p,o.fieldTransforms)}function KD(t,e,n,s=!1){return jo(n,t.bc(s?4:3,e))}function jo(t,e){if(oA(t=Ft(t)))return ng("Unsupported field value:",e,t),rA(t,e);if(t instanceof ol)return function(s,i){if(!nA(i.Ic))throw i.gc(`${s._methodName}() can only be used with update() and set()`);if(!i.path)throw i.gc(`${s._methodName}() is not currently supported inside arrays`);const r=s._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(s,i){const r=[];let o=0;for(const l of s){let c=jo(l,i.fc(o));c==null&&(c={nullValue:"NULL_VALUE"}),r.push(c),o++}return{arrayValue:{values:r}}}(t,e)}return function(s,i){if((s=Ft(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return Dk(i.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const r=tn.fromDate(s);return{timestampValue:Lh(i.serializer,r)}}if(s instanceof tn){const r=new tn(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Lh(i.serializer,r)}}if(s instanceof Xm)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Wa)return{bytesValue:AT(i.serializer,s._byteString)};if(s instanceof In){const r=i.databaseId,o=s.firestore._databaseId;if(!o.isEqual(r))throw i.gc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Dm(s.firestore._databaseId||i.databaseId,s._key.path)}}if(s instanceof Jm)return function(o,l){return{mapValue:{fields:{[Zw]:{stringValue:eT},[kh]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw l.gc("VectorValues must only contain numeric values.");return Rm(l.serializer,d)})}}}}}}(s,i);throw i.gc(`Unsupported field value: ${Rd(s)}`)}(t,e)}function rA(t,e){const n={};return Kw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fr(t,(s,i)=>{const r=jo(i,e.Ac(s));r!=null&&(n[s]=r)}),{mapValue:{fields:n}}}function oA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof tn||t instanceof Xm||t instanceof Wa||t instanceof In||t instanceof ol||t instanceof Jm)}function ng(t,e,n){if(!oA(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const s=Rd(n);throw s==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+s)}}function $p(t,e,n){if((e=Ft(e))instanceof kd)return e._internalPath;if(typeof e=="string")return sg(t,e);throw Uh("Field path arguments must be of type string or ",t,!1,void 0,n)}const GD=new RegExp("[~\\*/\\[\\]]");function sg(t,e,n){if(e.search(GD)>=0)throw Uh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new kd(...e.split("."))._internalPath}catch{throw Uh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Uh(t,e,n,s,i){const r=s&&!s.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(r||o)&&(c+=" (found",r&&(c+=` in field ${s}`),o&&(c+=` in document ${i}`),c+=")"),new ge(Z.INVALID_ARGUMENT,l+t+c)}function aA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,n,s,i,r){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new In(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ld("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class QD extends lA{data(){return super.data()}}function Ld(t,e){return typeof e=="string"?sg(t,e):e instanceof kd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ge(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ig{}class rg extends ig{}function jr(t,e,...n){let s=[];e instanceof ig&&s.push(e),s=s.concat(n),function(r){const o=r.filter(c=>c instanceof og).length,l=r.filter(c=>c instanceof Vd).length;if(o>1||o>0&&l>0)throw new ge(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const i of s)t=i._apply(t);return t}class Vd extends rg{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Vd(e,n,s)}_apply(e){const n=this._parse(e);return hA(e._query,n),new ji(e.firestore,e.converter,Rp(e._query,n))}_parse(e){const n=Dd(e.firestore);return function(r,o,l,c,d,h,p){let _;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ge(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Hy(p,h);const C=[];for(const D of p)C.push(By(c,r,D));_={arrayValue:{values:C}}}else _=By(c,r,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Hy(p,h),_=KD(l,o,p,h==="in"||h==="not-in");return Qt.create(d,h,_)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Vi(t,e,n){const s=e,i=Ld("where",t);return Vd._create(i,s,n)}class og extends ig{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new og(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:Vs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,r){let o=i;const l=r.getFlattenedFilters();for(const c of l)hA(o,c),o=Rp(o,c)}(e._query,n),new ji(e.firestore,e.converter,Rp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ag extends rg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new ag(e,n)}_apply(e){const n=function(i,r,o){if(i.startAt!==null)throw new ge(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ge(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Pc(r,o)}(e._query,this._field,this._direction);return new ji(e.firestore,e.converter,function(i,r){const o=i.explicitOrderBy.concat([r]);return new il(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function al(t,e="asc"){const n=e,s=Ld("orderBy",t);return ag._create(s,n)}class lg extends rg{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new lg(e,n,s)}_apply(e){return new ji(e.firestore,e.converter,Dh(e._query,this._limit,this._limitType))}}function uA(t){return $D("limit",t),lg._create("limit",t,"F")}function By(t,e,n){if(typeof(n=Ft(n))=="string"){if(n==="")throw new ge(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lT(e)&&n.indexOf("/")!==-1)throw new ge(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(Pt.fromString(n));if(!Ce.isDocumentKey(s))throw new ge(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return ny(t,new Ce(s))}if(n instanceof In)return ny(t,n._key);throw new ge(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rd(n)}.`)}function Hy(t,e){if(!Array.isArray(t)||t.length===0)throw new ge(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function hA(t,e){const n=function(i,r){for(const o of i)for(const l of o.getFlattenedFilters())if(r.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ge(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class YD{convertValue(e,n="none"){switch(kr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Or(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw De(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Fr(e,(i,r)=>{s[i]=this.convertValue(r,n)}),s}convertVectorValue(e){var n,s,i;const r=(i=(s=(n=e.fields)===null||n===void 0?void 0:n[kh].arrayValue)===null||s===void 0?void 0:s.values)===null||i===void 0?void 0:i.map(o=>Ht(o.doubleValue));return new Jm(r)}convertGeoPoint(e){return new Xm(Ht(e.latitude),Ht(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=vd(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Sc(e));default:return null}}convertTimestamp(e){const n=Pr(e);return new tn(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Pt.fromString(e);ft(OT(s),9688,{name:e});const i=new Cc(s.get(1),s.get(3)),r=new Ce(s.popFirst(5));return i.isEqual(n)||Di(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fA extends lA{constructor(e,n,s,i,r,o){super(e,n,s,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new oh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Ld("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class oh extends fA{data(e={}){return super.data(e)}}class pA{constructor(e,n,s,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Xl(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new oh(this._firestore,this._userDataWriter,s.key,s,new Xl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ge(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const c=new oh(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Xl(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>r||l.type!==3).map(l=>{const c=new oh(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Xl(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,h=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:XD(l.type),doc:c,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function XD(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xo(t){t=Qn(t,In);const e=Qn(t.firestore,Li);return LD(Od(e),t._key).then(n=>mA(e,t,n))}class cg extends YD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new In(this.firestore,null,n)}}function Bi(t){t=Qn(t,ji);const e=Qn(t.firestore,Li),n=Od(e),s=new cg(e);return cA(t._query),VD(n,t._query).then(i=>new pA(e,s,t,i))}function Wc(t,e,n){t=Qn(t,In);const s=Qn(t.firestore,Li),i=dA(t.converter,e,n);return Md(s,[sA(Dd(s),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,ys.none())])}function Fp(t,e,n,...s){t=Qn(t,In);const i=Qn(t.firestore,Li),r=Dd(i);let o;return o=typeof(e=Ft(e))=="string"||e instanceof kd?zD(r,"updateDoc",t._key,e,n,s):WD(r,"updateDoc",t._key,e),Md(i,[o.toMutation(t._key,ys.exists(!0))])}function JD(t){return Md(Qn(t.firestore,Li),[new Om(t._key,ys.none())])}function ZD(t,e){const n=Qn(t.firestore,Li),s=Yn(t),i=dA(t.converter,e);return Md(n,[sA(Dd(t.firestore),"addDoc",s._key,i,t.converter!==null,{}).toMutation(s._key,ys.exists(!1))]).then(()=>s)}function eN(t,...e){var n,s,i;t=Ft(t);let r={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||jy(e[o])||(r=e[o],o++);const l={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(jy(e[o])){const p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(s=p.error)===null||s===void 0?void 0:s.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,d,h;if(t instanceof In)d=Qn(t.firestore,Li),h=yd(t._key.path),c={next:p=>{e[o]&&e[o](mA(d,t,p))},error:e[o+1],complete:e[o+2]};else{const p=Qn(t,ji);d=Qn(p.firestore,Li),h=p._query;const _=new cg(d);c={next:E=>{e[o]&&e[o](new pA(d,_,p,E))},error:e[o+1],complete:e[o+2]},cA(t._query)}return function(_,E,C,D){const N=new Ym(D),j=new Km(E,N,C);return _.asyncQueue.enqueueAndForget(async()=>qm(await Fh(_),j)),()=>{N.xu(),_.asyncQueue.enqueueAndForget(async()=>Wm(await Fh(_),j))}}(Od(d),h,l,c)}function Md(t,e){return function(s,i){const r=new Ci;return s.asyncQueue.enqueueAndForget(async()=>TD(await ND(s),i,r)),r.promise}(Od(t),e)}function mA(t,e,n){const s=n.docs.get(e._key),i=new cg(t);return new fA(t,i,e._key,s,new Xl(n.hasPendingWrites,n.fromCache),e.converter)}function tN(){return new Zm("serverTimestamp")}function nN(...t){return new eg("arrayUnion",t)}function sN(...t){return new tg("arrayRemove",t)}(function(e,n=!0){(function(i){tl=i})(el),Va(new Po("firestore",(s,{instanceIdentifier:i,options:r})=>{const o=s.getProvider("app").getImmediate(),l=new Li(new KO(s.getProvider("auth-internal")),new YO(o,s.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ge(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cc(d.options.projectId,h)}(o,i),o);return r=Object.assign({useFetchStreams:n},r),l._setSettings(r),l},"PUBLIC").setMultipleInstances(!0)),Tr(qv,Wv,e),Tr(qv,Wv,"esm2017")})();var iN="firebase",rN="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tr(iN,rN,"app");function ug(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(n[s[i]]=t[s[i]]);return n}function gA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const oN=gA,_A=new Fc("auth","Firebase",gA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jh=new ym("@firebase/auth");function aN(t,...e){jh.logLevel<=Ze.WARN&&jh.warn(`Auth (${el}): ${t}`,...e)}function ah(t,...e){jh.logLevel<=Ze.ERROR&&jh.error(`Auth (${el}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ws(t,...e){throw dg(t,...e)}function xs(t,...e){return dg(t,...e)}function hg(t,e,n){const s=Object.assign(Object.assign({},oN()),{[e]:n});return new Fc("auth","Firebase",s).create(e,{appName:t.name})}function Ri(t){return hg(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function lN(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&ws(t,"argument-error"),hg(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function dg(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return _A.create(t,...e)}function ke(t,e,...n){if(!t)throw dg(e,...n)}function Ii(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ah(e),new Error(e)}function Mi(t,e){t||Ii(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function cN(){return qy()==="http:"||qy()==="https:"}function qy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cN()||AP()||"connection"in navigator)?navigator.onLine:!0}function hN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Mi(n>e,"Short delay should be less than long delay!"),this.isMobile=bP()||IP()}get(){return uN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fg(t,e){Mi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ii("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ii("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ii("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],pN=new zc(3e4,6e4);function Hi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function oi(t,e,n,s,i={}){return yA(t,i,async()=>{let r={},o={};s&&(e==="GET"?o=s:r={body:JSON.stringify(s)});const l=Uc(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:c},r);return TP()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Za(t.emulatorConfig.host)&&(d.credentials="include"),vA.fetch()(await EA(t,t.config.apiHost,n,l),d)})}async function yA(t,e,n){t._canInitEmulator=!1;const s=Object.assign(Object.assign({},dN),e);try{const i=new gN(t),r=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw ju(t,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const l=r.ok?o.errorMessage:o.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw ju(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw ju(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw ju(t,"user-disabled",o);const h=s[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw hg(t,h,d);ws(t,h)}}catch(i){if(i instanceof Ui)throw i;ws(t,"network-request-failed",{message:String(i)})}}async function Kc(t,e,n,s,i={}){const r=await oi(t,e,n,s,i);return"mfaPendingCredential"in r&&ws(t,"multi-factor-auth-required",{_serverResponse:r}),r}async function EA(t,e,n,s){const i=`${e}${n}?${s}`,r=t,o=r.config.emulator?fg(t.config,i):`${t.config.apiScheme}://${i}`;return fN.includes(n)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(o).toString():o}function mN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class gN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(xs(this.auth,"network-request-failed")),pN.get())})}}function ju(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const i=xs(t,e,s);return i.customData._tokenResponse=n,i}function Wy(t){return t!==void 0&&t.enterprise!==void 0}class _N{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return mN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function vN(t,e){return oi(t,"GET","/v2/recaptchaConfig",Hi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yN(t,e){return oi(t,"POST","/v1/accounts:delete",e)}async function Bh(t,e){return oi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function EN(t,e=!1){const n=Ft(t),s=await n.getIdToken(e),i=pg(s);ke(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const r=typeof i.firebase=="object"?i.firebase:void 0,o=r==null?void 0:r.sign_in_provider;return{claims:i,token:s,authTime:dc($f(i.auth_time)),issuedAtTime:dc($f(i.iat)),expirationTime:dc($f(i.exp)),signInProvider:o||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function $f(t){return Number(t)*1e3}function pg(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return ah("JWT malformed, contained fewer than 3 sections"),null;try{const i=Aw(n);return i?JSON.parse(i):(ah("Failed to decode base64 JWT payload"),null)}catch(i){return ah("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function zy(t){const e=pg(t);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function za(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Ui&&bN(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function bN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=dc(this.lastLoginAt),this.creationTime=dc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hh(t){var e;const n=t.auth,s=await t.getIdToken(),i=await za(t,Bh(n,{idToken:s}));ke(i==null?void 0:i.users.length,n,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const o=!((e=r.providerUserInfo)===null||e===void 0)&&e.length?bA(r.providerUserInfo):[],l=AN(t.providerData,o),c=t.isAnonymous,d=!(t.email&&r.passwordHash)&&!(l!=null&&l.length),h=c?d:!1,p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:l,metadata:new jp(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function TN(t){const e=Ft(t);await Hh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function AN(t,e){return[...t.filter(s=>!e.some(i=>i.providerId===s.providerId)),...e]}function bA(t){return t.map(e=>{var{providerId:n}=e,s=ug(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IN(t,e){const n=await yA(t,{},async()=>{const s=Uc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:r}=t.config,o=await EA(t,i,"/v1/token",`key=${r}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:s};return t.emulatorConfig&&Za(t.emulatorConfig.host)&&(c.credentials="include"),vA.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function SN(t,e){return oi(t,"POST","/v2/accounts:revokeToken",Hi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):zy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ke(e.length!==0,"internal-error");const n=zy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:i,expiresIn:r}=await IN(e,n);this.updateTokensAndExpiration(s,i,Number(r))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:i,expirationTime:r}=n,o=new ka;return s&&(ke(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),i&&(ke(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),r&&(ke(typeof r=="number","internal-error",{appName:e}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ka,this.toJSON())}_performRefresh(){return Ii("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(t,e){ke(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Os{constructor(e){var{uid:n,auth:s,stsTokenManager:i}=e,r=ug(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new wN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new jp(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await za(this,this.stsTokenManager.getToken(this.auth,e));return ke(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return EN(this,e)}reload(){return TN(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Os(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Hh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ns(this.auth.app))return Promise.reject(Ri(this.auth));const e=await this.getIdToken();return await za(this,yN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,i,r,o,l,c,d,h;const p=(s=n.displayName)!==null&&s!==void 0?s:void 0,_=(i=n.email)!==null&&i!==void 0?i:void 0,E=(r=n.phoneNumber)!==null&&r!==void 0?r:void 0,C=(o=n.photoURL)!==null&&o!==void 0?o:void 0,D=(l=n.tenantId)!==null&&l!==void 0?l:void 0,N=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,j=(d=n.createdAt)!==null&&d!==void 0?d:void 0,$=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:U,emailVerified:B,isAnonymous:se,providerData:re,stsTokenManager:x}=n;ke(U&&x,e,"internal-error");const I=ka.fromJSON(this.name,x);ke(typeof U=="string",e,"internal-error"),ar(p,e.name),ar(_,e.name),ke(typeof B=="boolean",e,"internal-error"),ke(typeof se=="boolean",e,"internal-error"),ar(E,e.name),ar(C,e.name),ar(D,e.name),ar(N,e.name),ar(j,e.name),ar($,e.name);const T=new Os({uid:U,auth:e,email:_,emailVerified:B,displayName:p,isAnonymous:se,photoURL:C,phoneNumber:E,tenantId:D,stsTokenManager:I,createdAt:j,lastLoginAt:$});return re&&Array.isArray(re)&&(T.providerData=re.map(R=>Object.assign({},R))),N&&(T._redirectEventId=N),T}static async _fromIdTokenResponse(e,n,s=!1){const i=new ka;i.updateFromServerResponse(n);const r=new Os({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:s});return await Hh(r),r}static async _fromGetAccountInfoResponse(e,n,s){const i=n.users[0];ke(i.localId!==void 0,"internal-error");const r=i.providerUserInfo!==void 0?bA(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(r!=null&&r.length),l=new ka;l.updateFromIdToken(s);const c=new Os({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:r,metadata:new jp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(r!=null&&r.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky=new Map;function Si(t){Mi(t instanceof Function,"Expected a class definition");let e=Ky.get(t);return e?(Mi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Ky.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}wA.type="NONE";const Gy=wA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lh(t,e,n){return`firebase:${t}:${e}:${n}`}class xa{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:i,name:r}=this.auth;this.fullUserKey=lh(this.userKey,i.apiKey,r),this.fullPersistenceKey=lh("persistence",i.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Bh(this.auth,{idToken:e}).catch(()=>{});return n?Os._fromGetAccountInfoResponse(this.auth,n,e):null}return Os._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new xa(Si(Gy),e,s);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let r=i[0]||Si(Gy);const o=lh(s,e.config.apiKey,e.name);let l=null;for(const d of n)try{const h=await d._get(o);if(h){let p;if(typeof h=="string"){const _=await Bh(e,{idToken:h}).catch(()=>{});if(!_)break;p=await Os._fromGetAccountInfoResponse(e,_,h)}else p=Os._fromJSON(e,h);d!==r&&(l=p),r=d;break}}catch{}const c=i.filter(d=>d._shouldAllowMigration);return!r._shouldAllowMigration||!c.length?new xa(r,e,s):(r=c[0],l&&await r._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==r)try{await d._remove(o)}catch{}})),new xa(r,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(SA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(TA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(RA(e))return"Blackberry";if(PA(e))return"Webos";if(AA(e))return"Safari";if((e.includes("chrome/")||IA(e))&&!e.includes("edge/"))return"Chrome";if(CA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function TA(t=Sn()){return/firefox\//i.test(t)}function AA(t=Sn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function IA(t=Sn()){return/crios\//i.test(t)}function SA(t=Sn()){return/iemobile/i.test(t)}function CA(t=Sn()){return/android/i.test(t)}function RA(t=Sn()){return/blackberry/i.test(t)}function PA(t=Sn()){return/webos/i.test(t)}function mg(t=Sn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function CN(t=Sn()){var e;return mg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function RN(){return SP()&&document.documentMode===10}function OA(t=Sn()){return mg(t)||CA(t)||PA(t)||RA(t)||/windows phone/i.test(t)||SA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(t,e=[]){let n;switch(t){case"Browser":n=Qy(Sn());break;case"Worker":n=`${Qy(Sn())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${el}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=r=>new Promise((o,l)=>{try{const c=e(r);o(c)}catch(c){l(c)}});s.onAbort=n,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ON(t,e={}){return oi(t,"GET","/v2/passwordPolicy",Hi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN=6;class xN{constructor(e){var n,s,i,r;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:kN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(r=e.forceUpgradeOnSignin)!==null&&r!==void 0?r:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,i,r,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(s=c.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(r=c.containsUppercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let i=0;i<e.length;i++)s=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,i,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e,n,s,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yy(this),this.idTokenSubscription=new Yy(this),this.beforeStateQueue=new PN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_A,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Si(n)),this._initializationPromise=this.queue(async()=>{var s,i,r;if(!this._deleted&&(this.persistenceManager=await xa.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Bh(this,{idToken:e}),s=await Os._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ns(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let i=s,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(i=c.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Hh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=hN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ns(this.app))return Promise.reject(Ri(this));const n=e?Ft(e):null;return n&&ke(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ns(this.app)?Promise.reject(Ri(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ns(this.app)?Promise.reject(Ri(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Si(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ON(this),n=new xN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Fc("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await SN(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Si(e)||this._popupRedirectResolver;ke(n,this,"argument-error"),this.redirectPersistenceManager=await xa.create(this,[Si(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,i){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ke(l,this,"internal-error"),l.then(()=>{o||r(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,s,i);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(ns(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&aN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function qi(t){return Ft(t)}class Yy{constructor(e){this.auth=e,this.observer=null,this.addObserver=NP(n=>this.observer=n)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $d={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function NN(t){$d=t}function xA(t){return $d.loadJS(t)}function LN(){return $d.recaptchaEnterpriseScript}function VN(){return $d.gapiScript}function MN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class $N{constructor(){this.enterprise=new FN}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class FN{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const UN="recaptcha-enterprise",DA="NO_RECAPTCHA";class jN{constructor(e){this.type=UN,this.auth=qi(e)}async verify(e="verify",n=!1){async function s(r){if(!n){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(o,l)=>{vN(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new _N(c);return r.tenantId==null?r._agentRecaptchaConfig=d:r._tenantRecaptchaConfigs[r.tenantId]=d,o(d.siteKey)}}).catch(c=>{l(c)})})}function i(r,o,l){const c=window.grecaptcha;Wy(c)?c.enterprise.ready(()=>{c.enterprise.execute(r,{action:e}).then(d=>{o(d)}).catch(()=>{o(DA)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new $N().execute("siteKey",{action:"verify"}):new Promise((r,o)=>{s(this.auth).then(l=>{if(!n&&Wy(window.grecaptcha))i(l,r,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=LN();c.length!==0&&(c+=l),xA(c).then(()=>{i(l,r,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function Xy(t,e,n,s=!1,i=!1){const r=new jN(t);let o;if(i)o=DA;else try{o=await r.verify(n)}catch{o=await r.verify(n,!0)}const l=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return s?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function qh(t,e,n,s,i){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Xy(t,e,n,n==="getOobCode");return s(t,o)}else return s(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Xy(t,e,n,n==="getOobCode");return s(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(t,e){const n=bm(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),r=n.getOptions();if(ki(r,e??{}))return i;ws(i,"already-initialized")}return n.initialize({options:e})}function HN(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(Si);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function qN(t,e,n){const s=qi(t);ke(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const i=!1,r=NA(e),{host:o,port:l}=WN(e),c=l===null?"":`:${l}`,d={url:`${r}//${o}${c}/`},h=Object.freeze({host:o,port:l,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!s._canInitEmulator){ke(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),ke(ki(d,s.config.emulator)&&ki(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=d,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,Za(o)?(Rw(`${r}//${o}${c}`),Pw("Auth",!0)):zN()}function NA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function WN(t){const e=NA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const r=i[1];return{host:r,port:Jy(s.substr(r.length+1))}}else{const[r,o]=s.split(":");return{host:r,port:Jy(o)}}}function Jy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function zN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ii("not implemented")}_getIdTokenResponse(e){return Ii("not implemented")}_linkToIdToken(e,n){return Ii("not implemented")}_getReauthenticationResolver(e){return Ii("not implemented")}}async function KN(t,e){return oi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GN(t,e){return Kc(t,"POST","/v1/accounts:signInWithPassword",Hi(t,e))}async function QN(t,e){return oi(t,"POST","/v1/accounts:sendOobCode",Hi(t,e))}async function YN(t,e){return QN(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XN(t,e){return Kc(t,"POST","/v1/accounts:signInWithEmailLink",Hi(t,e))}async function JN(t,e){return Kc(t,"POST","/v1/accounts:signInWithEmailLink",Hi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc extends gg{constructor(e,n,s,i=null){super("password",s),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new kc(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new kc(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qh(e,n,"signInWithPassword",GN);case"emailLink":return XN(e,{email:this._email,oobCode:this._password});default:ws(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qh(e,s,"signUpPassword",KN);case"emailLink":return JN(e,{idToken:n,email:this._email,oobCode:this._password});default:ws(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Da(t,e){return Kc(t,"POST","/v1/accounts:signInWithIdp",Hi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN="http://localhost";class Do extends gg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Do(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ws("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:i}=n,r=ug(n,["providerId","signInMethod"]);if(!s||!i)return null;const o=new Do(s,i);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Da(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Da(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Da(e,n)}buildRequest(){const e={requestUri:ZN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Uc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eL(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function tL(t){const e=zl(Kl(t)).link,n=e?zl(Kl(e)).deep_link_id:null,s=zl(Kl(t)).deep_link_id;return(s?zl(Kl(s)).link:null)||s||n||e||t}class _g{constructor(e){var n,s,i,r,o,l;const c=zl(Kl(e)),d=(n=c.apiKey)!==null&&n!==void 0?n:null,h=(s=c.oobCode)!==null&&s!==void 0?s:null,p=eL((i=c.mode)!==null&&i!==void 0?i:null);ke(d&&h&&p,"argument-error"),this.apiKey=d,this.operation=p,this.code=h,this.continueUrl=(r=c.continueUrl)!==null&&r!==void 0?r:null,this.languageCode=(o=c.lang)!==null&&o!==void 0?o:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=tL(e);try{return new _g(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(){this.providerId=Bo.PROVIDER_ID}static credential(e,n){return kc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=_g.parseLink(n);return ke(s,"argument-error"),kc._fromEmailAndCode(e,s.code,s.tenantId)}}Bo.PROVIDER_ID="password";Bo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Bo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc extends vg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends Gc{constructor(){super("facebook.com")}static credential(e){return Do._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pr.credential(e.oauthAccessToken)}catch{return null}}}pr.FACEBOOK_SIGN_IN_METHOD="facebook.com";pr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends Gc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Do._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Ai.credential(n,s)}catch{return null}}}Ai.GOOGLE_SIGN_IN_METHOD="google.com";Ai.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends Gc{constructor(){super("github.com")}static credential(e){return Do._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mr.credential(e.oauthAccessToken)}catch{return null}}}mr.GITHUB_SIGN_IN_METHOD="github.com";mr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr extends Gc{constructor(){super("twitter.com")}static credential(e,n){return Do._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return gr.credentialFromTaggedObject(e)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return gr.credential(n,s)}catch{return null}}}gr.TWITTER_SIGN_IN_METHOD="twitter.com";gr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nL(t,e){return Kc(t,"POST","/v1/accounts:signUp",Hi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,i=!1){const r=await Os._fromIdTokenResponse(e,s,i),o=Zy(s);return new No({user:r,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const i=Zy(s);return new No({user:e,providerId:i,_tokenResponse:s,operationType:n})}}function Zy(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh extends Ui{constructor(e,n,s,i){var r;super(n.code,n.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,Wh.prototype),this.customData={appName:e.name,tenantId:(r=e.tenantId)!==null&&r!==void 0?r:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,i){return new Wh(e,n,s,i)}}function LA(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?Wh._fromErrorAndOperation(t,r,e,s):r})}async function sL(t,e,n=!1){const s=await za(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return No._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VA(t,e,n=!1){const{auth:s}=t;if(ns(s.app))return Promise.reject(Ri(s));const i="reauthenticate";try{const r=await za(t,LA(s,i,e,t),n);ke(r.idToken,s,"internal-error");const o=pg(r.idToken);ke(o,s,"internal-error");const{sub:l}=o;return ke(t.uid===l,s,"user-mismatch"),No._forOperation(t,i,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&ws(s,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MA(t,e,n=!1){if(ns(t.app))return Promise.reject(Ri(t));const s="signIn",i=await LA(t,s,e),r=await No._fromIdTokenResponse(t,s,i);return n||await t._updateCurrentUser(r.user),r}async function iL(t,e){return MA(qi(t),e)}async function rL(t,e){return VA(Ft(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $A(t){const e=qi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function oL(t,e,n){const s=qi(t);await qh(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",YN)}async function aL(t,e,n){if(ns(t.app))return Promise.reject(Ri(t));const s=qi(t),o=await qh(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nL).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&$A(t),c}),l=await No._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(l.user),l}function lL(t,e,n){return ns(t.app)?Promise.reject(Ri(t)):iL(Ft(t),Bo.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&$A(t),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cL(t,e){return oi(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uL(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const s=Ft(t),r={idToken:await s.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await za(s,cL(s.auth,r));s.displayName=o.displayName||null,s.photoURL=o.photoUrl||null;const l=s.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=s.displayName,l.photoURL=s.photoURL),await s._updateTokensIfNecessary(o)}function hL(t,e,n,s){return Ft(t).onIdTokenChanged(e,n,s)}function dL(t,e,n){return Ft(t).beforeAuthStateChanged(e,n)}function fL(t,e,n,s){return Ft(t).onAuthStateChanged(e,n,s)}function pL(t){return Ft(t).signOut()}async function mL(t){return Ft(t).delete()}const zh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(zh,"1"),this.storage.removeItem(zh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL=1e3,_L=10;class UA extends FA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=OA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),i=this.localCache[n];s!==i&&e(n,i,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const s=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},r=this.storage.getItem(s);RN()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,_L):i()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},gL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}UA.type="LOCAL";const vL=UA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA extends FA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}jA.type="SESSION";const BA=jA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const s=new Fd(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:i,data:r}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const l=Array.from(o).map(async d=>d(n.origin,r)),c=await yL(l);n.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Fd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,o;return new Promise((l,c)=>{const d=yg("",20);i.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},s);o={messageChannel:i,onMessage(p){const _=p;if(_.data.eventId===d)switch(_.data.status){case"ack":clearTimeout(h),r=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),l(_.data.response);break;default:clearTimeout(h),clearTimeout(r),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(){return window}function bL(t){Zs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(){return typeof Zs().WorkerGlobalScope<"u"&&typeof Zs().importScripts=="function"}async function wL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function TL(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function AL(){return HA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA="firebaseLocalStorageDb",IL=1,Kh="firebaseLocalStorage",WA="fbase_key";class Qc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ud(t,e){return t.transaction([Kh],e?"readwrite":"readonly").objectStore(Kh)}function SL(){const t=indexedDB.deleteDatabase(qA);return new Qc(t).toPromise()}function Bp(){const t=indexedDB.open(qA,IL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(Kh,{keyPath:WA})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(Kh)?e(s):(s.close(),await SL(),e(await Bp()))})})}async function eE(t,e,n){const s=Ud(t,!0).put({[WA]:e,value:n});return new Qc(s).toPromise()}async function CL(t,e){const n=Ud(t,!1).get(e),s=await new Qc(n).toPromise();return s===void 0?null:s.value}function tE(t,e){const n=Ud(t,!0).delete(e);return new Qc(n).toPromise()}const RL=800,PL=3;class zA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Bp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>PL)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return HA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fd._getInstance(AL()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await wL(),!this.activeServiceWorker)return;this.sender=new EL(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||TL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Bp();return await eE(e,zh,"1"),await tE(e,zh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>eE(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>CL(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>tE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const r=Ud(i,!1).getAll();return new Qc(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:i,value:r}of e)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),RL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zA.type="LOCAL";const OL=zA;new zc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(t,e){return e?Si(e):(ke(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg extends gg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Da(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Da(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Da(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function kL(t){return MA(t.auth,new Eg(t),t.bypassAuthState)}function xL(t){const{auth:e,user:n}=t;return ke(n,e,"internal-error"),VA(n,new Eg(t),t.bypassAuthState)}async function DL(t){const{auth:e,user:n}=t;return ke(n,e,"internal-error"),sL(n,new Eg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e,n,s,i,r=!1){this.auth=e,this.resolver=s,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:i,tenantId:r,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:s,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return kL;case"linkViaPopup":case"linkViaRedirect":return DL;case"reauthViaPopup":case"reauthViaRedirect":return xL;default:ws(this.auth,"internal-error")}}resolve(e){Mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NL=new zc(2e3,1e4);async function LL(t,e,n){if(ns(t.app))return Promise.reject(xs(t,"operation-not-supported-in-this-environment"));const s=qi(t);lN(t,e,vg);const i=KA(s,n);return new Eo(s,"signInViaPopup",e,i).executeNotNull()}class Eo extends GA{constructor(e,n,s,i,r){super(e,n,i,r),this.provider=s,this.authWindow=null,this.pollId=null,Eo.currentPopupAction&&Eo.currentPopupAction.cancel(),Eo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ke(e,this.auth,"internal-error"),e}async onExecution(){Mi(this.filter.length===1,"Popup operations only handle one event");const e=yg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(xs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(xs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Eo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,NL.get())};e()}}Eo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VL="pendingRedirect",ch=new Map;class ML extends GA{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=ch.get(this.auth._key());if(!e){try{const s=await $L(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}ch.set(this.auth._key(),e)}return this.bypassAuthState||ch.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function $L(t,e){const n=jL(e),s=UL(t);if(!await s._isAvailable())return!1;const i=await s._get(n)==="true";return await s._remove(n),i}function FL(t,e){ch.set(t._key(),e)}function UL(t){return Si(t._redirectPersistence)}function jL(t){return lh(VL,t.config.apiKey,t.name)}async function BL(t,e,n=!1){if(ns(t.app))return Promise.reject(Ri(t));const s=qi(t),i=KA(s,e),o=await new ML(s,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HL=10*60*1e3;class qL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!WL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!QA(e)){const i=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(xs(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=HL&&this.cachedEventUids.clear(),this.cachedEventUids.has(nE(e))}saveEventToCache(e){this.cachedEventUids.add(nE(e)),this.lastProcessedEventTime=Date.now()}}function nE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function QA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function WL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return QA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zL(t,e={}){return oi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,GL=/^https?/;async function QL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await zL(t);for(const n of e)try{if(YL(n))return}catch{}ws(t,"unauthorized-domain")}function YL(t){const e=Up(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!GL.test(n))return!1;if(KL.test(t))return s===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XL=new zc(3e4,6e4);function sE(){const t=Zs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function JL(t){return new Promise((e,n)=>{var s,i,r;function o(){sE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{sE(),n(xs(t,"network-request-failed"))},timeout:XL.get()})}if(!((i=(s=Zs().gapi)===null||s===void 0?void 0:s.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((r=Zs().gapi)===null||r===void 0)&&r.load)o();else{const l=MN("iframefcb");return Zs()[l]=()=>{gapi.load?o():n(xs(t,"network-request-failed"))},xA(`${VN()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw uh=null,e})}let uh=null;function ZL(t){return uh=uh||JL(t),uh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eV=new zc(5e3,15e3),tV="__/auth/iframe",nV="emulator/auth/iframe",sV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},iV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rV(t){const e=t.config;ke(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?fg(e,nV):`https://${t.config.authDomain}/${tV}`,s={apiKey:e.apiKey,appName:t.name,v:el},i=iV.get(t.config.apiHost);i&&(s.eid=i);const r=t._getFrameworks();return r.length&&(s.fw=r.join(",")),`${n}?${Uc(s).slice(1)}`}async function oV(t){const e=await ZL(t),n=Zs().gapi;return ke(n,t,"internal-error"),e.open({where:document.body,url:rV(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sV,dontclear:!0},s=>new Promise(async(i,r)=>{await s.restyle({setHideOnLeave:!1});const o=xs(t,"network-request-failed"),l=Zs().setTimeout(()=>{r(o)},eV.get());function c(){Zs().clearTimeout(l),i(s)}s.ping(c).then(c,()=>{r(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},lV=500,cV=600,uV="_blank",hV="http://localhost";class iE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function dV(t,e,n,s=lV,i=cV){const r=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let l="";const c=Object.assign(Object.assign({},aV),{width:s.toString(),height:i.toString(),top:r,left:o}),d=Sn().toLowerCase();n&&(l=IA(d)?uV:n),TA(d)&&(e=e||hV,c.scrollbars="yes");const h=Object.entries(c).reduce((_,[E,C])=>`${_}${E}=${C},`,"");if(CN(d)&&l!=="_self")return fV(e||"",l),new iE(null);const p=window.open(e||"",l,h);ke(p,t,"popup-blocked");try{p.focus()}catch{}return new iE(p)}function fV(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV="__/auth/handler",mV="emulator/auth/handler",gV=encodeURIComponent("fac");async function rE(t,e,n,s,i,r){ke(t.config.authDomain,t,"auth-domain-config-required"),ke(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:el,eventId:i};if(e instanceof vg){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",DP(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))o[h]=p}if(e instanceof Gc){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),d=c?`#${gV}=${encodeURIComponent(c)}`:"";return`${_V(t)}?${Uc(l).slice(1)}${d}`}function _V({config:t}){return t.emulator?fg(t,mV):`https://${t.authDomain}/${pV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ff="webStorageSupport";class vV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=BA,this._completeRedirectFn=BL,this._overrideRedirectResult=FL}async _openPopup(e,n,s,i){var r;Mi((r=this.eventManagers[e._key()])===null||r===void 0?void 0:r.manager,"_initialize() not called before _openPopup()");const o=await rE(e,n,s,Up(),i);return dV(e,o,yg())}async _openRedirect(e,n,s,i){await this._originValidation(e);const r=await rE(e,n,s,Up(),i);return bL(r),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:r}=this.eventManagers[n];return i?Promise.resolve(i):(Mi(r,"If manager is not set, promise should be"),r)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await oV(e),s=new qL(e);return n.register("authEvent",i=>(ke(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ff,{type:Ff},i=>{var r;const o=(r=i==null?void 0:i[0])===null||r===void 0?void 0:r[Ff];o!==void 0&&n(!!o),ws(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=QL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return OA()||AA()||mg()}}const yV=vV;var oE="@firebase/auth",aE="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function wV(t){Va(new Po("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=s.options;ke(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kA(t)},d=new DN(s,i,r,c);return HN(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Va(new Po("auth-internal",e=>{const n=qi(e.getProvider("auth").getImmediate());return(s=>new EV(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Tr(oE,aE,bV(t)),Tr(oE,aE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV=5*60,AV=Cw("authIdTokenMaxAge")||TV;let lE=null;const IV=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>AV)return;const i=n==null?void 0:n.token;lE!==i&&(lE=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function SV(t=Dw()){const e=bm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=BN(t,{popupRedirectResolver:yV,persistence:[OL,vL,BA]}),s=Cw("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(s,location.origin);if(location.origin===r.origin){const o=IV(r.toString());dL(n,o,()=>o(n.currentUser)),hL(n,l=>o(l))}}const i=Iw("auth");return i&&qN(n,`http://${i}`),n}function CV(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}NN({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=i=>{const r=xs("internal-error");r.customData=i,n(r)},s.type="text/javascript",s.charset="UTF-8",CV().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});wV("Browser");const RV={apiKey:"AIzaSyCwjBfaaOxu0q3af_aPIlvDnpvSE1z3ms0",authDomain:"instant-geek.firebaseapp.com",projectId:"instant-geek",storageBucket:"instant-geek.firebasestorage.app",messagingSenderId:"317020332794",appId:"1:317020332794:web:933ab287d47fafd86cdf43",measurementId:"G-5F717TETW2"},YA=xw(RV),Ho=SV(YA),Nt=UD(YA),Bu="guestCart",Yc=mm("cart",()=>{const t=Ae([]),e=ei();let n=null;const s=Ot(()=>t.value.reduce((E,C)=>E+C.quantity,0)),i=Ot(()=>t.value.reduce((C,D)=>C+D.price*D.quantity,0).toFixed(2));async function r(){if(e.isLoggedIn&&e.user){const E=Yn(Nt,"users",e.user.uid,"privateData","cart");await Wc(E,{items:JSON.parse(JSON.stringify(t.value))})}}function o(){e.isLoggedIn||localStorage.setItem(Bu,JSON.stringify(t.value))}function l(E){const C=t.value.find(D=>D.id===E.id);C?C.quantity++:t.value.push({...E,quantity:1}),e.isLoggedIn?r():o()}function c(E){t.value=t.value.filter(C=>C.id!==E),e.isLoggedIn?r():o()}function d(E){const C=t.value.find(D=>D.id===E);C&&C.quantity++,e.isLoggedIn?r():o()}function h(E){const C=t.value.find(D=>D.id===E);if(C&&C.quantity>1)C.quantity--;else if(C&&C.quantity===1){c(E);return}e.isLoggedIn?r():o()}function p(){t.value=[],e.isLoggedIn?r():o()}async function _(){rs(()=>e.user,async(E,C)=>{if(n&&(n(),n=null),E){const D=Yn(Nt,"users",E.uid,"privateData","cart"),N=JSON.parse(localStorage.getItem(Bu)||"[]"),j=await xo(D),U=[...j.exists()?j.data().items:[]];N.forEach(B=>{const se=U.find(re=>re.id===B.id);se?se.quantity+=B.quantity:U.push(B)}),t.value=U,await r(),localStorage.removeItem(Bu),n=eN(D,B=>{t.value=B.exists()?B.data().items:[]})}else{const D=JSON.parse(localStorage.getItem(Bu)||"[]");t.value=D}},{immediate:!0})}return{items:t,totalItems:s,totalPrice:i,addItem:l,removeItem:c,increaseQuantity:d,decreaseQuantity:h,clearCart:p,init:_}}),ei=mm("auth",{state:()=>({user:null,userData:null,isLoading:!0,_authListenerUnsubscribe:null}),getters:{isLoggedIn:t=>!!t.user,currentUsername:t=>t.userData&&t.userData.displayName?t.userData.displayName:t.user&&t.user.displayName?t.user.displayName:t.user&&t.user.email?t.user.email.split("@")[0]:"Invité",billingAddress:t=>{var e;return((e=t.userData)==null?void 0:e.billingAddress)||null},hasCompleteBillingAddress:t=>{var n;const e=(n=t.userData)==null?void 0:n.billingAddress;return!!(e&&e.street&&e.city&&e.postalCode&&e.country)}},actions:{initAuthListener(){this._authListenerUnsubscribe||(this._authListenerUnsubscribe=fL(Ho,async t=>{this.isLoading=!0;const e=Xc(),n=Yc();if(t){this.user={uid:t.uid,email:t.email,displayName:t.displayName};const s=Yn(Nt,"users",t.uid),i=await xo(s);i.exists()?this.userData=i.data():this.userData=null,await e.fetchWishlist(),await n.init()}else this.user=null,this.userData=null,e.$reset(),await n.init();this.isLoading=!1}))},async updateUserProfile(t){if(!this.user)throw new Error("Utilisateur non connecté.");const e=Yn(Nt,"users",this.user.uid);await Fp(e,t),this.userData={...this.userData,...t}},cleanupListeners(){this._authListenerUnsubscribe&&this._authListenerUnsubscribe()}}}),Xc=mm("wishlist",{state:()=>({gameIds:[],isLoading:!1}),getters:{isInWishlist:t=>e=>t.gameIds.includes(e),wishlistCount:t=>t.gameIds.length},actions:{async fetchWishlist(){const t=ei();if(!t.isLoggedIn)return;this.isLoading=!0;const e=Yn(Nt,"users",t.user.uid,"wishlist","items"),n=await xo(e);n.exists()?this.gameIds=n.data().ids||[]:this.gameIds=[],this.isLoading=!1},async addToWishlist(t){const e=ei();if(!e.isLoggedIn){alert("Veuillez vous connecter pour ajouter des jeux à votre wishlist.");return}const n=Yn(Nt,"users",e.user.uid,"wishlist","items");(await xo(n)).exists()?await Fp(n,{ids:nN(t)}):await Wc(n,{ids:[t]}),this.gameIds.includes(t)||this.gameIds.push(t)},async removeFromWishlist(t){const e=ei();if(!e.isLoggedIn)return;const n=Yn(Nt,"users",e.user.uid,"wishlist","items");await Fp(n,{ids:sN(t)}),this.gameIds=this.gameIds.filter(s=>s!==t)}}}),Wt=(t,e)=>{const n=t.__vccOpts||t;for(const[s,i]of e)n[s]=i;return n},PV={class:"container-fluid",id:"main-content"},OV={class:"row justify-content-center"},kV={class:"col-12 col-md-10 col-lg-8 p-0 w-100"},xV={class:"slider-wrapper"},DV=["src","alt"],NV=["onClick"],LV=["src","alt"],VV=["src","alt"],MV=["src","alt"],$V={class:"game-info mt-3"},FV=["href"],UV=["src"],jV={__name:"slider",setup(t){const e=Xc(),n=Ae([{src:"/assets/img/icon/gtavi.png",alt:"Image 1"},{src:"/assets/img/icon/metaphor.png",alt:"Image 2"},{src:"/assets/img/icon/nightrein.png",alt:"Image 3"},{src:"/assets/img/icon/TLOU2.jpg",alt:"Image 4"},{src:"/assets/img/icon/Clair_Obscur.jpg",alt:"Image 5"}]),s=Ae([{src:"https://www.instant-gaming.com/fr/2462-acheter-grand-theft-auto-vi-pc-jeu-rockstar/",alt:"Page GTA VI"},{src:"https://www.instant-gaming.com/fr/14352-acheter-metaphor-refantazio-pc-jeu-steam-europe/",alt:"Page Metaphor"},{src:"https://www.instant-gaming.com/fr/18294-acheter-elden-ring-nightreign-pc-jeu-steam-europe/",alt:"Page Elden Ring Nightrein"},{src:"https://www.instant-gaming.com/fr/6215-acheter-the-last-of-us-part-ii-remastered-pc-jeu-steam-europe/",alt:"Page The Last of Us 2"},{src:"https://www.instant-gaming.com/fr/17015-acheter-clair-obscur-expedition-33-pc-jeu-steam-europe-us-canada/",alt:"Page Clair Obscur"}]),i=[{src:"https://cdn2.steamgriddb.com/hero_thumb/b80be7960918982fceea91afaf4d5e27.jpg",alt:"Image Hero GTA VI"},{src:"https://cdn2.steamgriddb.com/hero_thumb/aaecbb83e18bf24199bc5b2d3a280054.jpg",alt:"Image Hero Metaphor"},{src:"https://cdn2.steamgriddb.com/hero_thumb/8ec28b09ec95f08279e82459f1289c34.jpg",alt:"Image Hero Nightrein"},{src:"https://cdn2.steamgriddb.com/hero_thumb/5b465c13fd8cac3b9baf4af74bc0069a.png",alt:"Image Hero TLOU2"},{src:"https://cdn2.steamgriddb.com/hero_thumb/d2d195657240f493374e95e2b75cc8cf.jpg",alt:"Image Hero Clair Obscur"}],r=Ae([{name:"Grand Thief Auto VI",description:"Comme toujours, le jeu se déroule dans un monde ouvert, dans une version fictive de Miami, en Floride, appelée Vice City, Leonida...",price:"99.99€",id:"tEZ8WKToNXRdUw30WBpN"},{name:"Metaphor: ReFantazio",description:"Les créateurs de Persona 3, 4 et 5 ont donné naissance à Metaphor: ReFantazio. Préparez-vous à la prochaine évolution du JRPG fantastique...",price:"39.99€",id:"ouRWQoFisMSRMbu5RncX"},{name:"Elden Ring Nightrein",description:"ELDEN RING NIGHTREIGN est une aventure indépendante se déroulant dans l'univers d'ELDEN RING, conçue pour offrir...",price:"31.52€",id:"HT3qJHVa9pXQJZSXRkQR"},{name:"The Last of Us Part II REMASTERED",description:"Cinq ans après leur périlleux voyage à travers une Amérique ravagée par une pandémie...",price:"35.43€",id:"HuvvEF5GQmSZ7ylXW1zW"},{name:"Clair Obscur : Expédition 33",description:"Une fois par an, la Peintresse se réveille. Sur son Monolithe, elle peint son nombre maudit...",price:"29.99€",id:"ZuL3BlFzp83IyXuTQ4DF"}]),o=Ae(0),l=Ae(!1);Ot(()=>(o.value-1+n.value.length)%n.value.length),Ot(()=>(o.value+1)%n.value.length);const c=Ot(()=>{const $=n.value.length;return[n.value[(o.value-1+$)%$],n.value[o.value],n.value[(o.value+1)%$]]}),d=Ot(()=>{const $=n.value.length;return[n.value[(o.value-2+$)%$],n.value[(o.value+2)%$]]}),h=$=>$===1?{width:"50%"}:{width:"25%"},p=Ot(()=>{var U;const $=(U=r.value[o.value])==null?void 0:U.id;return $?e.isInWishlist($):!1});let _=null;function E(){_&&clearInterval(_),_=setInterval(()=>{C()},6e3)}Un(async()=>{E()}),ld(()=>{clearInterval(_)});const C=()=>{l.value=!0,setTimeout(()=>{o.value=(o.value+1)%n.value.length,l.value=!1,E()},500)},D=()=>{l.value=!0,setTimeout(()=>{o.value=(o.value-1+n.value.length)%n.value.length,l.value=!1,E()},500)},N=$=>{$===0&&D(),$===2&&C()},j=()=>{const $=r.value[o.value];$!=null&&$.id&&(p.value?e.removeFromWishlist($.id):e.addToWishlist($.id))};return($,U)=>{const B=jn("router-link");return G(),Y("div",PV,[g("div",OV,[g("div",kV,[g("div",{class:"carousel-container mx-auto",style:Co({"--carousel-bg":`url('${i[o.value].src}')`})},[g("div",xV,[g("div",{class:en(["slide","prev"]),onClick:U[0]||(U[0]=se=>N(0))},[g("img",{src:d.value[0].src,alt:d.value[0].alt,class:"img-fluid rounded-4 w-50"},null,8,DV)]),(G(!0),Y(xe,null,wt(c.value,(se,re)=>(G(),Y("div",{key:re,class:en(["slide",re===0?"prev":re===1?"active":"next",re===1&&l.value?"fading":""]),style:Co(h(re)),onClick:x=>N(re)},[re===1?(G(),dm(B,{key:0,to:`/game/${r.value[o.value].id}`},{default:Je(()=>[g("img",{src:se.src,alt:se.alt,class:"img-fluid rounded-4",style:{cursor:"pointer"}},null,8,LV)]),_:2},1032,["to"])):(G(),Y("img",{key:1,src:se.src,alt:se.alt,class:"img-fluid rounded-4"},null,8,VV))],14,NV))),128)),g("div",{class:en(["slide","next"]),onClick:U[1]||(U[1]=se=>N(2))},[g("img",{src:d.value[1].src,alt:d.value[1].alt,class:"img-fluid rounded-4 w-50"},null,8,MV)])]),g("div",{class:"controls d-flex justify-content-between mt-3"},[g("button",{class:"btn",onClick:D},U[2]||(U[2]=[g("span",{class:"carousel-control-prev-icon","aria-hidden":"true"},null,-1)])),g("button",{class:"btn",onClick:C},U[3]||(U[3]=[g("span",{class:"carousel-control-next-icon","aria-hidden":"true"},null,-1)]))]),g("div",$V,[g("h2",null,ae(r.value[o.value].name),1),g("p",null,ae(r.value[o.value].description),1),g("p",null,ae(r.value[o.value].price),1),U[4]||(U[4]=g("a",{class:"btn btn-page me-2"},"Acheter",-1)),g("a",{href:s.value[o.value].src,target:"_blank",class:"btn btn-page me-2"},"Page du jeu",8,FV),g("a",{class:"btn btn-danger",onClick:j},[g("img",{src:p.value?"/assets/img/favorite_black.png":"/assets/img/favorite_empty.png",alt:"Icône de favori",style:{width:"24px",height:"24px"}},null,8,UV)])])],4)])])])}}},BV=Wt(jV,[["__scopeId","data-v-6065439a"]]),HV={class:"container-fluid py-2 preco"},qV={class:"media-scroller snaps-inline",id:"precoIn"},WV={class:"game-card"},zV=["src","alt"],KV={class:"game-text"},GV={class:"titre"},QV={class:"prix"},YV={__name:"Preco",setup(t){const e=Ae([]),n=async()=>{const s=ri(Nt,"games"),i=new Date;i.setHours(0,0,0,0);const r=jr(s,Vi("dateSortie",">=",i),al("dateSortie"),uA(8));try{const o=await Bi(r);e.value=[],o.forEach(l=>{const c=l.data();e.value.push({id:l.id,titre:c.name,link:c.link,image:c.image,price:`${c.price}€`})})}catch(o){console.error("Erreur lors de la récupération des jeux :",o)}};return Un(()=>{n()}),(s,i)=>{const r=jn("router-link");return G(),Y("div",HV,[i[1]||(i[1]=g("h2",{class:"font-weight-light"},"Précommandes",-1)),g("div",null,[g("ul",qV,[(G(!0),Y(xe,null,wt(e.value,o=>(G(),Y("li",{key:o.id},[g("div",WV,[pe(r,{class:"nav-link",to:`/game/${o.id}`},{default:Je(()=>[g("img",{src:`/assets/img/preview/${o.image}`,alt:o.titre},null,8,zV)]),_:2},1032,["to"]),g("div",KV,[g("h3",GV,ae(o.titre),1),g("h3",QV,ae(o.price),1)]),i[0]||(i[0]=g("h2",null,null,-1))])]))),128))])])])}}},XV=Wt(YV,[["__scopeId","data-v-ed81dbaa"]]);var hh={exports:{}};/*!
  * Bootstrap v5.3.6 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var JV=hh.exports,cE;function ZV(){return cE||(cE=1,function(t,e){(function(n,s){t.exports=s()})(JV,function(){const n=new Map,s={set(y,u,m){n.has(y)||n.set(y,new Map);const b=n.get(y);b.has(u)||b.size===0?b.set(u,m):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(b.keys())[0]}.`)},get:(y,u)=>n.has(y)&&n.get(y).get(u)||null,remove(y,u){if(!n.has(y))return;const m=n.get(y);m.delete(u),m.size===0&&n.delete(y)}},i="transitionend",r=y=>(y&&window.CSS&&window.CSS.escape&&(y=y.replace(/#([^\s"#']+)/g,(u,m)=>`#${CSS.escape(m)}`)),y),o=y=>{y.dispatchEvent(new Event(i))},l=y=>!(!y||typeof y!="object")&&(y.jquery!==void 0&&(y=y[0]),y.nodeType!==void 0),c=y=>l(y)?y.jquery?y[0]:y:typeof y=="string"&&y.length>0?document.querySelector(r(y)):null,d=y=>{if(!l(y)||y.getClientRects().length===0)return!1;const u=getComputedStyle(y).getPropertyValue("visibility")==="visible",m=y.closest("details:not([open])");if(!m)return u;if(m!==y){const b=y.closest("summary");if(b&&b.parentNode!==m||b===null)return!1}return u},h=y=>!y||y.nodeType!==Node.ELEMENT_NODE||!!y.classList.contains("disabled")||(y.disabled!==void 0?y.disabled:y.hasAttribute("disabled")&&y.getAttribute("disabled")!=="false"),p=y=>{if(!document.documentElement.attachShadow)return null;if(typeof y.getRootNode=="function"){const u=y.getRootNode();return u instanceof ShadowRoot?u:null}return y instanceof ShadowRoot?y:y.parentNode?p(y.parentNode):null},_=()=>{},E=y=>{y.offsetHeight},C=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,D=[],N=()=>document.documentElement.dir==="rtl",j=y=>{var u;u=()=>{const m=C();if(m){const b=y.NAME,L=m.fn[b];m.fn[b]=y.jQueryInterface,m.fn[b].Constructor=y,m.fn[b].noConflict=()=>(m.fn[b]=L,y.jQueryInterface)}},document.readyState==="loading"?(D.length||document.addEventListener("DOMContentLoaded",()=>{for(const m of D)m()}),D.push(u)):u()},$=(y,u=[],m=y)=>typeof y=="function"?y.call(...u):m,U=(y,u,m=!0)=>{if(!m)return void $(y);const b=(q=>{if(!q)return 0;let{transitionDuration:te,transitionDelay:he}=window.getComputedStyle(q);const ye=Number.parseFloat(te),be=Number.parseFloat(he);return ye||be?(te=te.split(",")[0],he=he.split(",")[0],1e3*(Number.parseFloat(te)+Number.parseFloat(he))):0})(u)+5;let L=!1;const V=({target:q})=>{q===u&&(L=!0,u.removeEventListener(i,V),$(y))};u.addEventListener(i,V),setTimeout(()=>{L||o(u)},b)},B=(y,u,m,b)=>{const L=y.length;let V=y.indexOf(u);return V===-1?!m&&b?y[L-1]:y[0]:(V+=m?1:-1,b&&(V=(V+L)%L),y[Math.max(0,Math.min(V,L-1))])},se=/[^.]*(?=\..*)\.|.*/,re=/\..*/,x=/::\d+$/,I={};let T=1;const R={mouseenter:"mouseover",mouseleave:"mouseout"},O=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function A(y,u){return u&&`${u}::${T++}`||y.uidEvent||T++}function S(y){const u=A(y);return y.uidEvent=u,I[u]=I[u]||{},I[u]}function Le(y,u,m=null){return Object.values(y).find(b=>b.callable===u&&b.delegationSelector===m)}function ot(y,u,m){const b=typeof u=="string",L=b?m:u||m;let V=kt(y);return O.has(V)||(V=y),[b,L,V]}function Me(y,u,m,b,L){if(typeof u!="string"||!y)return;let[V,q,te]=ot(u,m,b);u in R&&(q=(Ue=>function($e){if(!$e.relatedTarget||$e.relatedTarget!==$e.delegateTarget&&!$e.delegateTarget.contains($e.relatedTarget))return Ue.call(this,$e)})(q));const he=S(y),ye=he[te]||(he[te]={}),be=Le(ye,q,V?m:null);if(be)return void(be.oneOff=be.oneOff&&L);const me=A(q,u.replace(se,"")),We=V?function(Oe,Ue,$e){return function je(_t){const It=Oe.querySelectorAll(Ue);for(let{target:Ye}=_t;Ye&&Ye!==this;Ye=Ye.parentNode)for(const ut of It)if(ut===Ye)return zt(_t,{delegateTarget:Ye}),je.oneOff&&X.off(Oe,_t.type,Ue,$e),$e.apply(Ye,[_t])}}(y,m,q):function(Oe,Ue){return function $e(je){return zt(je,{delegateTarget:Oe}),$e.oneOff&&X.off(Oe,je.type,Ue),Ue.apply(Oe,[je])}}(y,q);We.delegationSelector=V?m:null,We.callable=q,We.oneOff=L,We.uidEvent=me,ye[me]=We,y.addEventListener(te,We,V)}function we(y,u,m,b,L){const V=Le(u[m],b,L);V&&(y.removeEventListener(m,V,!!L),delete u[m][V.uidEvent])}function qe(y,u,m,b){const L=u[m]||{};for(const[V,q]of Object.entries(L))V.includes(b)&&we(y,u,m,q.callable,q.delegationSelector)}function kt(y){return y=y.replace(re,""),R[y]||y}const X={on(y,u,m,b){Me(y,u,m,b,!1)},one(y,u,m,b){Me(y,u,m,b,!0)},off(y,u,m,b){if(typeof u!="string"||!y)return;const[L,V,q]=ot(u,m,b),te=q!==u,he=S(y),ye=he[q]||{},be=u.startsWith(".");if(V===void 0){if(be)for(const me of Object.keys(he))qe(y,he,me,u.slice(1));for(const[me,We]of Object.entries(ye)){const Oe=me.replace(x,"");te&&!u.includes(Oe)||we(y,he,q,We.callable,We.delegationSelector)}}else{if(!Object.keys(ye).length)return;we(y,he,q,V,L?m:null)}},trigger(y,u,m){if(typeof u!="string"||!y)return null;const b=C();let L=null,V=!0,q=!0,te=!1;u!==kt(u)&&b&&(L=b.Event(u,m),b(y).trigger(L),V=!L.isPropagationStopped(),q=!L.isImmediatePropagationStopped(),te=L.isDefaultPrevented());const he=zt(new Event(u,{bubbles:V,cancelable:!0}),m);return te&&he.preventDefault(),q&&y.dispatchEvent(he),he.defaultPrevented&&L&&L.preventDefault(),he}};function zt(y,u={}){for(const[m,b]of Object.entries(u))try{y[m]=b}catch{Object.defineProperty(y,m,{configurable:!0,get:()=>b})}return y}function at(y){if(y==="true")return!0;if(y==="false")return!1;if(y===Number(y).toString())return Number(y);if(y===""||y==="null")return null;if(typeof y!="string")return y;try{return JSON.parse(decodeURIComponent(y))}catch{return y}}function lt(y){return y.replace(/[A-Z]/g,u=>`-${u.toLowerCase()}`)}const Ct={setDataAttribute(y,u,m){y.setAttribute(`data-bs-${lt(u)}`,m)},removeDataAttribute(y,u){y.removeAttribute(`data-bs-${lt(u)}`)},getDataAttributes(y){if(!y)return{};const u={},m=Object.keys(y.dataset).filter(b=>b.startsWith("bs")&&!b.startsWith("bsConfig"));for(const b of m){let L=b.replace(/^bs/,"");L=L.charAt(0).toLowerCase()+L.slice(1),u[L]=at(y.dataset[b])}return u},getDataAttribute:(y,u)=>at(y.getAttribute(`data-bs-${lt(u)}`))};class Rt{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(u){return u=this._mergeConfigObj(u),u=this._configAfterMerge(u),this._typeCheckConfig(u),u}_configAfterMerge(u){return u}_mergeConfigObj(u,m){const b=l(m)?Ct.getDataAttribute(m,"config"):{};return{...this.constructor.Default,...typeof b=="object"?b:{},...l(m)?Ct.getDataAttributes(m):{},...typeof u=="object"?u:{}}}_typeCheckConfig(u,m=this.constructor.DefaultType){for(const[L,V]of Object.entries(m)){const q=u[L],te=l(q)?"element":(b=q)==null?`${b}`:Object.prototype.toString.call(b).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(V).test(te))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${L}" provided type "${te}" but expected type "${V}".`)}var b}}class ct extends Rt{constructor(u,m){super(),(u=c(u))&&(this._element=u,this._config=this._getConfig(m),s.set(this._element,this.constructor.DATA_KEY,this))}dispose(){s.remove(this._element,this.constructor.DATA_KEY),X.off(this._element,this.constructor.EVENT_KEY);for(const u of Object.getOwnPropertyNames(this))this[u]=null}_queueCallback(u,m,b=!0){U(u,m,b)}_getConfig(u){return u=this._mergeConfigObj(u,this._element),u=this._configAfterMerge(u),this._typeCheckConfig(u),u}static getInstance(u){return s.get(c(u),this.DATA_KEY)}static getOrCreateInstance(u,m={}){return this.getInstance(u)||new this(u,typeof m=="object"?m:null)}static get VERSION(){return"5.3.6"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(u){return`${u}${this.EVENT_KEY}`}}const z=y=>{let u=y.getAttribute("data-bs-target");if(!u||u==="#"){let m=y.getAttribute("href");if(!m||!m.includes("#")&&!m.startsWith("."))return null;m.includes("#")&&!m.startsWith("#")&&(m=`#${m.split("#")[1]}`),u=m&&m!=="#"?m.trim():null}return u?u.split(",").map(m=>r(m)).join(","):null},W={find:(y,u=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(u,y)),findOne:(y,u=document.documentElement)=>Element.prototype.querySelector.call(u,y),children:(y,u)=>[].concat(...y.children).filter(m=>m.matches(u)),parents(y,u){const m=[];let b=y.parentNode.closest(u);for(;b;)m.push(b),b=b.parentNode.closest(u);return m},prev(y,u){let m=y.previousElementSibling;for(;m;){if(m.matches(u))return[m];m=m.previousElementSibling}return[]},next(y,u){let m=y.nextElementSibling;for(;m;){if(m.matches(u))return[m];m=m.nextElementSibling}return[]},focusableChildren(y){const u=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(m=>`${m}:not([tabindex^="-"])`).join(",");return this.find(u,y).filter(m=>!h(m)&&d(m))},getSelectorFromElement(y){const u=z(y);return u&&W.findOne(u)?u:null},getElementFromSelector(y){const u=z(y);return u?W.findOne(u):null},getMultipleElementsFromSelector(y){const u=z(y);return u?W.find(u):[]}},ce=(y,u="hide")=>{const m=`click.dismiss${y.EVENT_KEY}`,b=y.NAME;X.on(document,m,`[data-bs-dismiss="${b}"]`,function(L){if(["A","AREA"].includes(this.tagName)&&L.preventDefault(),h(this))return;const V=W.getElementFromSelector(this)||this.closest(`.${b}`);y.getOrCreateInstance(V)[u]()})},ve=".bs.alert",Qe=`close${ve}`,P=`closed${ve}`;class k extends ct{static get NAME(){return"alert"}close(){if(X.trigger(this._element,Qe).defaultPrevented)return;this._element.classList.remove("show");const u=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,u)}_destroyElement(){this._element.remove(),X.trigger(this._element,P),this.dispose()}static jQueryInterface(u){return this.each(function(){const m=k.getOrCreateInstance(this);if(typeof u=="string"){if(m[u]===void 0||u.startsWith("_")||u==="constructor")throw new TypeError(`No method named "${u}"`);m[u](this)}})}}ce(k,"close"),j(k);const M='[data-bs-toggle="button"]';class K extends ct{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(u){return this.each(function(){const m=K.getOrCreateInstance(this);u==="toggle"&&m[u]()})}}X.on(document,"click.bs.button.data-api",M,y=>{y.preventDefault();const u=y.target.closest(M);K.getOrCreateInstance(u).toggle()}),j(K);const Q=".bs.swipe",J=`touchstart${Q}`,de=`touchmove${Q}`,le=`touchend${Q}`,oe=`pointerdown${Q}`,ne=`pointerup${Q}`,Se={endCallback:null,leftCallback:null,rightCallback:null},fe={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Ee extends Rt{constructor(u,m){super(),this._element=u,u&&Ee.isSupported()&&(this._config=this._getConfig(m),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Se}static get DefaultType(){return fe}static get NAME(){return"swipe"}dispose(){X.off(this._element,Q)}_start(u){this._supportPointerEvents?this._eventIsPointerPenTouch(u)&&(this._deltaX=u.clientX):this._deltaX=u.touches[0].clientX}_end(u){this._eventIsPointerPenTouch(u)&&(this._deltaX=u.clientX-this._deltaX),this._handleSwipe(),$(this._config.endCallback)}_move(u){this._deltaX=u.touches&&u.touches.length>1?0:u.touches[0].clientX-this._deltaX}_handleSwipe(){const u=Math.abs(this._deltaX);if(u<=40)return;const m=u/this._deltaX;this._deltaX=0,m&&$(m>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(X.on(this._element,oe,u=>this._start(u)),X.on(this._element,ne,u=>this._end(u)),this._element.classList.add("pointer-event")):(X.on(this._element,J,u=>this._start(u)),X.on(this._element,de,u=>this._move(u)),X.on(this._element,le,u=>this._end(u)))}_eventIsPointerPenTouch(u){return this._supportPointerEvents&&(u.pointerType==="pen"||u.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Te=".bs.carousel",Ie=".data-api",Ve="ArrowLeft",Ke="ArrowRight",Vt="next",xt="prev",Yt="left",Ut="right",$s=`slide${Te}`,li=`slid${Te}`,Xt=`keydown${Te}`,Bn=`mouseenter${Te}`,zo=`mouseleave${Te}`,fl=`dragstart${Te}`,su=`load${Te}${Ie}`,iu=`click${Te}${Ie}`,zi="carousel",Ki="active",Ko=".active",Fs=".carousel-item",ru=Ko+Fs,Go={[Ve]:Ut,[Ke]:Yt},ou={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Wr={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class ci extends ct{constructor(u,m){super(u,m),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=W.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===zi&&this.cycle()}static get Default(){return ou}static get DefaultType(){return Wr}static get NAME(){return"carousel"}next(){this._slide(Vt)}nextWhenVisible(){!document.hidden&&d(this._element)&&this.next()}prev(){this._slide(xt)}pause(){this._isSliding&&o(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?X.one(this._element,li,()=>this.cycle()):this.cycle())}to(u){const m=this._getItems();if(u>m.length-1||u<0)return;if(this._isSliding)return void X.one(this._element,li,()=>this.to(u));const b=this._getItemIndex(this._getActive());if(b===u)return;const L=u>b?Vt:xt;this._slide(L,m[u])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(u){return u.defaultInterval=u.interval,u}_addEventListeners(){this._config.keyboard&&X.on(this._element,Xt,u=>this._keydown(u)),this._config.pause==="hover"&&(X.on(this._element,Bn,()=>this.pause()),X.on(this._element,zo,()=>this._maybeEnableCycle())),this._config.touch&&Ee.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const m of W.find(".carousel-item img",this._element))X.on(m,fl,b=>b.preventDefault());const u={leftCallback:()=>this._slide(this._directionToOrder(Yt)),rightCallback:()=>this._slide(this._directionToOrder(Ut)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new Ee(this._element,u)}_keydown(u){if(/input|textarea/i.test(u.target.tagName))return;const m=Go[u.key];m&&(u.preventDefault(),this._slide(this._directionToOrder(m)))}_getItemIndex(u){return this._getItems().indexOf(u)}_setActiveIndicatorElement(u){if(!this._indicatorsElement)return;const m=W.findOne(Ko,this._indicatorsElement);m.classList.remove(Ki),m.removeAttribute("aria-current");const b=W.findOne(`[data-bs-slide-to="${u}"]`,this._indicatorsElement);b&&(b.classList.add(Ki),b.setAttribute("aria-current","true"))}_updateInterval(){const u=this._activeElement||this._getActive();if(!u)return;const m=Number.parseInt(u.getAttribute("data-bs-interval"),10);this._config.interval=m||this._config.defaultInterval}_slide(u,m=null){if(this._isSliding)return;const b=this._getActive(),L=u===Vt,V=m||B(this._getItems(),b,L,this._config.wrap);if(V===b)return;const q=this._getItemIndex(V),te=me=>X.trigger(this._element,me,{relatedTarget:V,direction:this._orderToDirection(u),from:this._getItemIndex(b),to:q});if(te($s).defaultPrevented||!b||!V)return;const he=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(q),this._activeElement=V;const ye=L?"carousel-item-start":"carousel-item-end",be=L?"carousel-item-next":"carousel-item-prev";V.classList.add(be),E(V),b.classList.add(ye),V.classList.add(ye),this._queueCallback(()=>{V.classList.remove(ye,be),V.classList.add(Ki),b.classList.remove(Ki,be,ye),this._isSliding=!1,te(li)},b,this._isAnimated()),he&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return W.findOne(ru,this._element)}_getItems(){return W.find(Fs,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(u){return N()?u===Yt?xt:Vt:u===Yt?Vt:xt}_orderToDirection(u){return N()?u===xt?Yt:Ut:u===xt?Ut:Yt}static jQueryInterface(u){return this.each(function(){const m=ci.getOrCreateInstance(this,u);if(typeof u!="number"){if(typeof u=="string"){if(m[u]===void 0||u.startsWith("_")||u==="constructor")throw new TypeError(`No method named "${u}"`);m[u]()}}else m.to(u)})}}X.on(document,iu,"[data-bs-slide], [data-bs-slide-to]",function(y){const u=W.getElementFromSelector(this);if(!u||!u.classList.contains(zi))return;y.preventDefault();const m=ci.getOrCreateInstance(u),b=this.getAttribute("data-bs-slide-to");return b?(m.to(b),void m._maybeEnableCycle()):Ct.getDataAttribute(this,"slide")==="next"?(m.next(),void m._maybeEnableCycle()):(m.prev(),void m._maybeEnableCycle())}),X.on(window,su,()=>{const y=W.find('[data-bs-ride="carousel"]');for(const u of y)ci.getOrCreateInstance(u)}),j(ci);const jt=".bs.collapse",au=`show${jt}`,zr=`shown${jt}`,Kr=`hide${jt}`,Qd=`hidden${jt}`,Yd=`click${jt}.data-api`,Us="show",Gi="collapse",Qo="collapsing",Yo=`:scope .${Gi} .${Gi}`,Xo='[data-bs-toggle="collapse"]',pl={parent:null,toggle:!0},Jo={parent:"(null|element)",toggle:"boolean"};class Cn extends ct{constructor(u,m){super(u,m),this._isTransitioning=!1,this._triggerArray=[];const b=W.find(Xo);for(const L of b){const V=W.getSelectorFromElement(L),q=W.find(V).filter(te=>te===this._element);V!==null&&q.length&&this._triggerArray.push(L)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return pl}static get DefaultType(){return Jo}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let u=[];if(this._config.parent&&(u=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(L=>L!==this._element).map(L=>Cn.getOrCreateInstance(L,{toggle:!1}))),u.length&&u[0]._isTransitioning||X.trigger(this._element,au).defaultPrevented)return;for(const L of u)L.hide();const m=this._getDimension();this._element.classList.remove(Gi),this._element.classList.add(Qo),this._element.style[m]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const b=`scroll${m[0].toUpperCase()+m.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Qo),this._element.classList.add(Gi,Us),this._element.style[m]="",X.trigger(this._element,zr)},this._element,!0),this._element.style[m]=`${this._element[b]}px`}hide(){if(this._isTransitioning||!this._isShown()||X.trigger(this._element,Kr).defaultPrevented)return;const u=this._getDimension();this._element.style[u]=`${this._element.getBoundingClientRect()[u]}px`,E(this._element),this._element.classList.add(Qo),this._element.classList.remove(Gi,Us);for(const m of this._triggerArray){const b=W.getElementFromSelector(m);b&&!this._isShown(b)&&this._addAriaAndCollapsedClass([m],!1)}this._isTransitioning=!0,this._element.style[u]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Qo),this._element.classList.add(Gi),X.trigger(this._element,Qd)},this._element,!0)}_isShown(u=this._element){return u.classList.contains(Us)}_configAfterMerge(u){return u.toggle=!!u.toggle,u.parent=c(u.parent),u}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const u=this._getFirstLevelChildren(Xo);for(const m of u){const b=W.getElementFromSelector(m);b&&this._addAriaAndCollapsedClass([m],this._isShown(b))}}_getFirstLevelChildren(u){const m=W.find(Yo,this._config.parent);return W.find(u,this._config.parent).filter(b=>!m.includes(b))}_addAriaAndCollapsedClass(u,m){if(u.length)for(const b of u)b.classList.toggle("collapsed",!m),b.setAttribute("aria-expanded",m)}static jQueryInterface(u){const m={};return typeof u=="string"&&/show|hide/.test(u)&&(m.toggle=!1),this.each(function(){const b=Cn.getOrCreateInstance(this,m);if(typeof u=="string"){if(b[u]===void 0)throw new TypeError(`No method named "${u}"`);b[u]()}})}}X.on(document,Yd,Xo,function(y){(y.target.tagName==="A"||y.delegateTarget&&y.delegateTarget.tagName==="A")&&y.preventDefault();for(const u of W.getMultipleElementsFromSelector(this))Cn.getOrCreateInstance(u,{toggle:!1}).toggle()}),j(Cn);var sn="top",vn="bottom",pn="right",Jt="left",Gr="auto",ui=[sn,vn,pn,Jt],hi="start",Ss="end",ml="clippingParents",Qr="viewport",cs="popper",js="reference",Yr=ui.reduce(function(y,u){return y.concat([u+"-"+hi,u+"-"+Ss])},[]),gl=[].concat(ui,[Gr]).reduce(function(y,u){return y.concat([u,u+"-"+hi,u+"-"+Ss])},[]),_l="beforeRead",vl="read",yl="afterRead",Zo="beforeMain",ea="main",El="afterMain",bl="beforeWrite",lu="write",cu="afterWrite",wl=[_l,vl,yl,Zo,ea,El,bl,lu,cu];function Xn(y){return y?(y.nodeName||"").toLowerCase():null}function Rn(y){if(y==null)return window;if(y.toString()!=="[object Window]"){var u=y.ownerDocument;return u&&u.defaultView||window}return y}function Pn(y){return y instanceof Rn(y).Element||y instanceof Element}function Mt(y){return y instanceof Rn(y).HTMLElement||y instanceof HTMLElement}function Qi(y){return typeof ShadowRoot<"u"&&(y instanceof Rn(y).ShadowRoot||y instanceof ShadowRoot)}const Yi={name:"applyStyles",enabled:!0,phase:"write",fn:function(y){var u=y.state;Object.keys(u.elements).forEach(function(m){var b=u.styles[m]||{},L=u.attributes[m]||{},V=u.elements[m];Mt(V)&&Xn(V)&&(Object.assign(V.style,b),Object.keys(L).forEach(function(q){var te=L[q];te===!1?V.removeAttribute(q):V.setAttribute(q,te===!0?"":te)}))})},effect:function(y){var u=y.state,m={popper:{position:u.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(u.elements.popper.style,m.popper),u.styles=m,u.elements.arrow&&Object.assign(u.elements.arrow.style,m.arrow),function(){Object.keys(u.elements).forEach(function(b){var L=u.elements[b],V=u.attributes[b]||{},q=Object.keys(u.styles.hasOwnProperty(b)?u.styles[b]:m[b]).reduce(function(te,he){return te[he]="",te},{});Mt(L)&&Xn(L)&&(Object.assign(L.style,q),Object.keys(V).forEach(function(te){L.removeAttribute(te)}))})}},requires:["computeStyles"]};function Jn(y){return y.split("-")[0]}var it=Math.max,di=Math.min,us=Math.round;function fi(){var y=navigator.userAgentData;return y!=null&&y.brands&&Array.isArray(y.brands)?y.brands.map(function(u){return u.brand+"/"+u.version}).join(" "):navigator.userAgent}function uu(){return!/^((?!chrome|android).)*safari/i.test(fi())}function pi(y,u,m){u===void 0&&(u=!1),m===void 0&&(m=!1);var b=y.getBoundingClientRect(),L=1,V=1;u&&Mt(y)&&(L=y.offsetWidth>0&&us(b.width)/y.offsetWidth||1,V=y.offsetHeight>0&&us(b.height)/y.offsetHeight||1);var q=(Pn(y)?Rn(y):window).visualViewport,te=!uu()&&m,he=(b.left+(te&&q?q.offsetLeft:0))/L,ye=(b.top+(te&&q?q.offsetTop:0))/V,be=b.width/L,me=b.height/V;return{width:be,height:me,top:ye,right:he+be,bottom:ye+me,left:he,x:he,y:ye}}function Tl(y){var u=pi(y),m=y.offsetWidth,b=y.offsetHeight;return Math.abs(u.width-m)<=1&&(m=u.width),Math.abs(u.height-b)<=1&&(b=u.height),{x:y.offsetLeft,y:y.offsetTop,width:m,height:b}}function hu(y,u){var m=u.getRootNode&&u.getRootNode();if(y.contains(u))return!0;if(m&&Qi(m)){var b=u;do{if(b&&y.isSameNode(b))return!0;b=b.parentNode||b.host}while(b)}return!1}function Cs(y){return Rn(y).getComputedStyle(y)}function Xd(y){return["table","td","th"].indexOf(Xn(y))>=0}function Hn(y){return((Pn(y)?y.ownerDocument:y.document)||window.document).documentElement}function Zn(y){return Xn(y)==="html"?y:y.assignedSlot||y.parentNode||(Qi(y)?y.host:null)||Hn(y)}function Al(y){return Mt(y)&&Cs(y).position!=="fixed"?y.offsetParent:null}function Xi(y){for(var u=Rn(y),m=Al(y);m&&Xd(m)&&Cs(m).position==="static";)m=Al(m);return m&&(Xn(m)==="html"||Xn(m)==="body"&&Cs(m).position==="static")?u:m||function(b){var L=/firefox/i.test(fi());if(/Trident/i.test(fi())&&Mt(b)&&Cs(b).position==="fixed")return null;var V=Zn(b);for(Qi(V)&&(V=V.host);Mt(V)&&["html","body"].indexOf(Xn(V))<0;){var q=Cs(V);if(q.transform!=="none"||q.perspective!=="none"||q.contain==="paint"||["transform","perspective"].indexOf(q.willChange)!==-1||L&&q.willChange==="filter"||L&&q.filter&&q.filter!=="none")return V;V=V.parentNode}return null}(y)||u}function ta(y){return["top","bottom"].indexOf(y)>=0?"x":"y"}function hs(y,u,m){return it(y,di(u,m))}function du(y){return Object.assign({},{top:0,right:0,bottom:0,left:0},y)}function fu(y,u){return u.reduce(function(m,b){return m[b]=y,m},{})}const pu={name:"arrow",enabled:!0,phase:"main",fn:function(y){var u,m=y.state,b=y.name,L=y.options,V=m.elements.arrow,q=m.modifiersData.popperOffsets,te=Jn(m.placement),he=ta(te),ye=[Jt,pn].indexOf(te)>=0?"height":"width";if(V&&q){var be=function(vt,gt){return du(typeof(vt=typeof vt=="function"?vt(Object.assign({},gt.rects,{placement:gt.placement})):vt)!="number"?vt:fu(vt,ui))}(L.padding,m),me=Tl(V),We=he==="y"?sn:Jt,Oe=he==="y"?vn:pn,Ue=m.rects.reference[ye]+m.rects.reference[he]-q[he]-m.rects.popper[ye],$e=q[he]-m.rects.reference[he],je=Xi(V),_t=je?he==="y"?je.clientHeight||0:je.clientWidth||0:0,It=Ue/2-$e/2,Ye=be[We],ut=_t-me[ye]-be[Oe],ze=_t/2-me[ye]/2+It,tt=hs(Ye,ze,ut),mt=he;m.modifiersData[b]=((u={})[mt]=tt,u.centerOffset=tt-ze,u)}},effect:function(y){var u=y.state,m=y.options.element,b=m===void 0?"[data-popper-arrow]":m;b!=null&&(typeof b!="string"||(b=u.elements.popper.querySelector(b)))&&hu(u.elements.popper,b)&&(u.elements.arrow=b)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function On(y){return y.split("-")[1]}var Jd={top:"auto",right:"auto",bottom:"auto",left:"auto"};function mu(y){var u,m=y.popper,b=y.popperRect,L=y.placement,V=y.variation,q=y.offsets,te=y.position,he=y.gpuAcceleration,ye=y.adaptive,be=y.roundOffsets,me=y.isFixed,We=q.x,Oe=We===void 0?0:We,Ue=q.y,$e=Ue===void 0?0:Ue,je=typeof be=="function"?be({x:Oe,y:$e}):{x:Oe,y:$e};Oe=je.x,$e=je.y;var _t=q.hasOwnProperty("x"),It=q.hasOwnProperty("y"),Ye=Jt,ut=sn,ze=window;if(ye){var tt=Xi(m),mt="clientHeight",vt="clientWidth";tt===Rn(m)&&Cs(tt=Hn(m)).position!=="static"&&te==="absolute"&&(mt="scrollHeight",vt="scrollWidth"),(L===sn||(L===Jt||L===pn)&&V===Ss)&&(ut=vn,$e-=(me&&tt===ze&&ze.visualViewport?ze.visualViewport.height:tt[mt])-b.height,$e*=he?1:-1),L!==Jt&&(L!==sn&&L!==vn||V!==Ss)||(Ye=pn,Oe-=(me&&tt===ze&&ze.visualViewport?ze.visualViewport.width:tt[vt])-b.width,Oe*=he?1:-1)}var gt,Bt=Object.assign({position:te},ye&&Jd),es=be===!0?function(Ps,xn){var fs=Ps.x,ps=Ps.y,$t=xn.devicePixelRatio||1;return{x:us(fs*$t)/$t||0,y:us(ps*$t)/$t||0}}({x:Oe,y:$e},Rn(m)):{x:Oe,y:$e};return Oe=es.x,$e=es.y,he?Object.assign({},Bt,((gt={})[ut]=It?"0":"",gt[Ye]=_t?"0":"",gt.transform=(ze.devicePixelRatio||1)<=1?"translate("+Oe+"px, "+$e+"px)":"translate3d("+Oe+"px, "+$e+"px, 0)",gt)):Object.assign({},Bt,((u={})[ut]=It?$e+"px":"",u[Ye]=_t?Oe+"px":"",u.transform="",u))}const Ji={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(y){var u=y.state,m=y.options,b=m.gpuAcceleration,L=b===void 0||b,V=m.adaptive,q=V===void 0||V,te=m.roundOffsets,he=te===void 0||te,ye={placement:Jn(u.placement),variation:On(u.placement),popper:u.elements.popper,popperRect:u.rects.popper,gpuAcceleration:L,isFixed:u.options.strategy==="fixed"};u.modifiersData.popperOffsets!=null&&(u.styles.popper=Object.assign({},u.styles.popper,mu(Object.assign({},ye,{offsets:u.modifiersData.popperOffsets,position:u.options.strategy,adaptive:q,roundOffsets:he})))),u.modifiersData.arrow!=null&&(u.styles.arrow=Object.assign({},u.styles.arrow,mu(Object.assign({},ye,{offsets:u.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:he})))),u.attributes.popper=Object.assign({},u.attributes.popper,{"data-popper-placement":u.placement})},data:{}};var mi={passive:!0};const na={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(y){var u=y.state,m=y.instance,b=y.options,L=b.scroll,V=L===void 0||L,q=b.resize,te=q===void 0||q,he=Rn(u.elements.popper),ye=[].concat(u.scrollParents.reference,u.scrollParents.popper);return V&&ye.forEach(function(be){be.addEventListener("scroll",m.update,mi)}),te&&he.addEventListener("resize",m.update,mi),function(){V&&ye.forEach(function(be){be.removeEventListener("scroll",m.update,mi)}),te&&he.removeEventListener("resize",m.update,mi)}},data:{}};var Xr={left:"right",right:"left",bottom:"top",top:"bottom"};function Bs(y){return y.replace(/left|right|bottom|top/g,function(u){return Xr[u]})}var gu={start:"end",end:"start"};function sa(y){return y.replace(/start|end/g,function(u){return gu[u]})}function At(y){var u=Rn(y);return{scrollLeft:u.pageXOffset,scrollTop:u.pageYOffset}}function Il(y){return pi(Hn(y)).left+At(y).scrollLeft}function Sl(y){var u=Cs(y),m=u.overflow,b=u.overflowX,L=u.overflowY;return/auto|scroll|overlay|hidden/.test(m+L+b)}function Cl(y){return["html","body","#document"].indexOf(Xn(y))>=0?y.ownerDocument.body:Mt(y)&&Sl(y)?y:Cl(Zn(y))}function Zi(y,u){var m;u===void 0&&(u=[]);var b=Cl(y),L=b===((m=y.ownerDocument)==null?void 0:m.body),V=Rn(b),q=L?[V].concat(V.visualViewport||[],Sl(b)?b:[]):b,te=u.concat(q);return L?te:te.concat(Zi(Zn(q)))}function ia(y){return Object.assign({},y,{left:y.x,top:y.y,right:y.x+y.width,bottom:y.y+y.height})}function Jr(y,u,m){return u===Qr?ia(function(b,L){var V=Rn(b),q=Hn(b),te=V.visualViewport,he=q.clientWidth,ye=q.clientHeight,be=0,me=0;if(te){he=te.width,ye=te.height;var We=uu();(We||!We&&L==="fixed")&&(be=te.offsetLeft,me=te.offsetTop)}return{width:he,height:ye,x:be+Il(b),y:me}}(y,m)):Pn(u)?function(b,L){var V=pi(b,!1,L==="fixed");return V.top=V.top+b.clientTop,V.left=V.left+b.clientLeft,V.bottom=V.top+b.clientHeight,V.right=V.left+b.clientWidth,V.width=b.clientWidth,V.height=b.clientHeight,V.x=V.left,V.y=V.top,V}(u,m):ia(function(b){var L,V=Hn(b),q=At(b),te=(L=b.ownerDocument)==null?void 0:L.body,he=it(V.scrollWidth,V.clientWidth,te?te.scrollWidth:0,te?te.clientWidth:0),ye=it(V.scrollHeight,V.clientHeight,te?te.scrollHeight:0,te?te.clientHeight:0),be=-q.scrollLeft+Il(b),me=-q.scrollTop;return Cs(te||V).direction==="rtl"&&(be+=it(V.clientWidth,te?te.clientWidth:0)-he),{width:he,height:ye,x:be,y:me}}(Hn(y)))}function Rl(y){var u,m=y.reference,b=y.element,L=y.placement,V=L?Jn(L):null,q=L?On(L):null,te=m.x+m.width/2-b.width/2,he=m.y+m.height/2-b.height/2;switch(V){case sn:u={x:te,y:m.y-b.height};break;case vn:u={x:te,y:m.y+m.height};break;case pn:u={x:m.x+m.width,y:he};break;case Jt:u={x:m.x-b.width,y:he};break;default:u={x:m.x,y:m.y}}var ye=V?ta(V):null;if(ye!=null){var be=ye==="y"?"height":"width";switch(q){case hi:u[ye]=u[ye]-(m[be]/2-b[be]/2);break;case Ss:u[ye]=u[ye]+(m[be]/2-b[be]/2)}}return u}function yn(y,u){u===void 0&&(u={});var m=u,b=m.placement,L=b===void 0?y.placement:b,V=m.strategy,q=V===void 0?y.strategy:V,te=m.boundary,he=te===void 0?ml:te,ye=m.rootBoundary,be=ye===void 0?Qr:ye,me=m.elementContext,We=me===void 0?cs:me,Oe=m.altBoundary,Ue=Oe!==void 0&&Oe,$e=m.padding,je=$e===void 0?0:$e,_t=du(typeof je!="number"?je:fu(je,ui)),It=We===cs?js:cs,Ye=y.rects.popper,ut=y.elements[Ue?It:We],ze=function(xn,fs,ps,$t){var qs=fs==="clippingParents"?function(Et){var Dn=Zi(Zn(Et)),ms=["absolute","fixed"].indexOf(Cs(Et).position)>=0&&Mt(Et)?Xi(Et):Et;return Pn(ms)?Dn.filter(function(ir){return Pn(ir)&&hu(ir,ms)&&Xn(ir)!=="body"}):[]}(xn):[].concat(fs),Ws=[].concat(qs,[ps]),ha=Ws[0],ln=Ws.reduce(function(Et,Dn){var ms=Jr(xn,Dn,$t);return Et.top=it(ms.top,Et.top),Et.right=di(ms.right,Et.right),Et.bottom=di(ms.bottom,Et.bottom),Et.left=it(ms.left,Et.left),Et},Jr(xn,ha,$t));return ln.width=ln.right-ln.left,ln.height=ln.bottom-ln.top,ln.x=ln.left,ln.y=ln.top,ln}(Pn(ut)?ut:ut.contextElement||Hn(y.elements.popper),he,be,q),tt=pi(y.elements.reference),mt=Rl({reference:tt,element:Ye,placement:L}),vt=ia(Object.assign({},Ye,mt)),gt=We===cs?vt:tt,Bt={top:ze.top-gt.top+_t.top,bottom:gt.bottom-ze.bottom+_t.bottom,left:ze.left-gt.left+_t.left,right:gt.right-ze.right+_t.right},es=y.modifiersData.offset;if(We===cs&&es){var Ps=es[L];Object.keys(Bt).forEach(function(xn){var fs=[pn,vn].indexOf(xn)>=0?1:-1,ps=[sn,vn].indexOf(xn)>=0?"y":"x";Bt[xn]+=Ps[ps]*fs})}return Bt}function _u(y,u){u===void 0&&(u={});var m=u,b=m.placement,L=m.boundary,V=m.rootBoundary,q=m.padding,te=m.flipVariations,he=m.allowedAutoPlacements,ye=he===void 0?gl:he,be=On(b),me=be?te?Yr:Yr.filter(function(Ue){return On(Ue)===be}):ui,We=me.filter(function(Ue){return ye.indexOf(Ue)>=0});We.length===0&&(We=me);var Oe=We.reduce(function(Ue,$e){return Ue[$e]=yn(y,{placement:$e,boundary:L,rootBoundary:V,padding:q})[Jn($e)],Ue},{});return Object.keys(Oe).sort(function(Ue,$e){return Oe[Ue]-Oe[$e]})}const vu={name:"flip",enabled:!0,phase:"main",fn:function(y){var u=y.state,m=y.options,b=y.name;if(!u.modifiersData[b]._skip){for(var L=m.mainAxis,V=L===void 0||L,q=m.altAxis,te=q===void 0||q,he=m.fallbackPlacements,ye=m.padding,be=m.boundary,me=m.rootBoundary,We=m.altBoundary,Oe=m.flipVariations,Ue=Oe===void 0||Oe,$e=m.allowedAutoPlacements,je=u.options.placement,_t=Jn(je),It=he||(_t!==je&&Ue?function(Et){if(Jn(Et)===Gr)return[];var Dn=Bs(Et);return[sa(Et),Dn,sa(Dn)]}(je):[Bs(je)]),Ye=[je].concat(It).reduce(function(Et,Dn){return Et.concat(Jn(Dn)===Gr?_u(u,{placement:Dn,boundary:be,rootBoundary:me,padding:ye,flipVariations:Ue,allowedAutoPlacements:$e}):Dn)},[]),ut=u.rects.reference,ze=u.rects.popper,tt=new Map,mt=!0,vt=Ye[0],gt=0;gt<Ye.length;gt++){var Bt=Ye[gt],es=Jn(Bt),Ps=On(Bt)===hi,xn=[sn,vn].indexOf(es)>=0,fs=xn?"width":"height",ps=yn(u,{placement:Bt,boundary:be,rootBoundary:me,altBoundary:We,padding:ye}),$t=xn?Ps?pn:Jt:Ps?vn:sn;ut[fs]>ze[fs]&&($t=Bs($t));var qs=Bs($t),Ws=[];if(V&&Ws.push(ps[es]<=0),te&&Ws.push(ps[$t]<=0,ps[qs]<=0),Ws.every(function(Et){return Et})){vt=Bt,mt=!1;break}tt.set(Bt,Ws)}if(mt)for(var ha=function(Et){var Dn=Ye.find(function(ms){var ir=tt.get(ms);if(ir)return ir.slice(0,Et).every(function(Pu){return Pu})});if(Dn)return vt=Dn,"break"},ln=Ue?3:1;ln>0&&ha(ln)!=="break";ln--);u.placement!==vt&&(u.modifiersData[b]._skip=!0,u.placement=vt,u.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function er(y,u,m){return m===void 0&&(m={x:0,y:0}),{top:y.top-u.height-m.y,right:y.right-u.width+m.x,bottom:y.bottom-u.height+m.y,left:y.left-u.width-m.x}}function Pl(y){return[sn,pn,vn,Jt].some(function(u){return y[u]>=0})}const ra={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(y){var u=y.state,m=y.name,b=u.rects.reference,L=u.rects.popper,V=u.modifiersData.preventOverflow,q=yn(u,{elementContext:"reference"}),te=yn(u,{altBoundary:!0}),he=er(q,b),ye=er(te,L,V),be=Pl(he),me=Pl(ye);u.modifiersData[m]={referenceClippingOffsets:he,popperEscapeOffsets:ye,isReferenceHidden:be,hasPopperEscaped:me},u.attributes.popper=Object.assign({},u.attributes.popper,{"data-popper-reference-hidden":be,"data-popper-escaped":me})}},Zr={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(y){var u=y.state,m=y.options,b=y.name,L=m.offset,V=L===void 0?[0,0]:L,q=gl.reduce(function(be,me){return be[me]=function(We,Oe,Ue){var $e=Jn(We),je=[Jt,sn].indexOf($e)>=0?-1:1,_t=typeof Ue=="function"?Ue(Object.assign({},Oe,{placement:We})):Ue,It=_t[0],Ye=_t[1];return It=It||0,Ye=(Ye||0)*je,[Jt,pn].indexOf($e)>=0?{x:Ye,y:It}:{x:It,y:Ye}}(me,u.rects,V),be},{}),te=q[u.placement],he=te.x,ye=te.y;u.modifiersData.popperOffsets!=null&&(u.modifiersData.popperOffsets.x+=he,u.modifiersData.popperOffsets.y+=ye),u.modifiersData[b]=q}},oa={name:"popperOffsets",enabled:!0,phase:"read",fn:function(y){var u=y.state,m=y.name;u.modifiersData[m]=Rl({reference:u.rects.reference,element:u.rects.popper,placement:u.placement})},data:{}},eo={name:"preventOverflow",enabled:!0,phase:"main",fn:function(y){var u=y.state,m=y.options,b=y.name,L=m.mainAxis,V=L===void 0||L,q=m.altAxis,te=q!==void 0&&q,he=m.boundary,ye=m.rootBoundary,be=m.altBoundary,me=m.padding,We=m.tether,Oe=We===void 0||We,Ue=m.tetherOffset,$e=Ue===void 0?0:Ue,je=yn(u,{boundary:he,rootBoundary:ye,padding:me,altBoundary:be}),_t=Jn(u.placement),It=On(u.placement),Ye=!It,ut=ta(_t),ze=ut==="x"?"y":"x",tt=u.modifiersData.popperOffsets,mt=u.rects.reference,vt=u.rects.popper,gt=typeof $e=="function"?$e(Object.assign({},u.rects,{placement:u.placement})):$e,Bt=typeof gt=="number"?{mainAxis:gt,altAxis:gt}:Object.assign({mainAxis:0,altAxis:0},gt),es=u.modifiersData.offset?u.modifiersData.offset[u.placement]:null,Ps={x:0,y:0};if(tt){if(V){var xn,fs=ut==="y"?sn:Jt,ps=ut==="y"?vn:pn,$t=ut==="y"?"height":"width",qs=tt[ut],Ws=qs+je[fs],ha=qs-je[ps],ln=Oe?-vt[$t]/2:0,Et=It===hi?mt[$t]:vt[$t],Dn=It===hi?-vt[$t]:-mt[$t],ms=u.elements.arrow,ir=Oe&&ms?Tl(ms):{width:0,height:0},Pu=u.modifiersData["arrow#persistent"]?u.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},m_=Pu[fs],g_=Pu[ps],Ou=hs(0,mt[$t],ir[$t]),uS=Ye?mt[$t]/2-ln-Ou-m_-Bt.mainAxis:Et-Ou-m_-Bt.mainAxis,hS=Ye?-mt[$t]/2+ln+Ou+g_+Bt.mainAxis:Dn+Ou+g_+Bt.mainAxis,hf=u.elements.arrow&&Xi(u.elements.arrow),dS=hf?ut==="y"?hf.clientTop||0:hf.clientLeft||0:0,__=(xn=es==null?void 0:es[ut])!=null?xn:0,fS=qs+hS-__,v_=hs(Oe?di(Ws,qs+uS-__-dS):Ws,qs,Oe?it(ha,fS):ha);tt[ut]=v_,Ps[ut]=v_-qs}if(te){var y_,pS=ut==="x"?sn:Jt,mS=ut==="x"?vn:pn,co=tt[ze],ku=ze==="y"?"height":"width",E_=co+je[pS],b_=co-je[mS],df=[sn,Jt].indexOf(_t)!==-1,w_=(y_=es==null?void 0:es[ze])!=null?y_:0,T_=df?E_:co-mt[ku]-vt[ku]-w_+Bt.altAxis,A_=df?co+mt[ku]+vt[ku]-w_-Bt.altAxis:b_,I_=Oe&&df?function(gS,_S,ff){var S_=hs(gS,_S,ff);return S_>ff?ff:S_}(T_,co,A_):hs(Oe?T_:E_,co,Oe?A_:b_);tt[ze]=I_,Ps[ze]=I_-co}u.modifiersData[b]=Ps}},requiresIfExists:["offset"]};function Zd(y,u,m){m===void 0&&(m=!1);var b,L,V=Mt(u),q=Mt(u)&&function(me){var We=me.getBoundingClientRect(),Oe=us(We.width)/me.offsetWidth||1,Ue=us(We.height)/me.offsetHeight||1;return Oe!==1||Ue!==1}(u),te=Hn(u),he=pi(y,q,m),ye={scrollLeft:0,scrollTop:0},be={x:0,y:0};return(V||!V&&!m)&&((Xn(u)!=="body"||Sl(te))&&(ye=(b=u)!==Rn(b)&&Mt(b)?{scrollLeft:(L=b).scrollLeft,scrollTop:L.scrollTop}:At(b)),Mt(u)?((be=pi(u,!0)).x+=u.clientLeft,be.y+=u.clientTop):te&&(be.x=Il(te))),{x:he.left+ye.scrollLeft-be.x,y:he.top+ye.scrollTop-be.y,width:he.width,height:he.height}}function yu(y){var u=new Map,m=new Set,b=[];function L(V){m.add(V.name),[].concat(V.requires||[],V.requiresIfExists||[]).forEach(function(q){if(!m.has(q)){var te=u.get(q);te&&L(te)}}),b.push(V)}return y.forEach(function(V){u.set(V.name,V)}),y.forEach(function(V){m.has(V.name)||L(V)}),b}var tr={placement:"bottom",modifiers:[],strategy:"absolute"};function Ol(){for(var y=arguments.length,u=new Array(y),m=0;m<y;m++)u[m]=arguments[m];return!u.some(function(b){return!(b&&typeof b.getBoundingClientRect=="function")})}function to(y){y===void 0&&(y={});var u=y,m=u.defaultModifiers,b=m===void 0?[]:m,L=u.defaultOptions,V=L===void 0?tr:L;return function(q,te,he){he===void 0&&(he=V);var ye,be,me={placement:"bottom",orderedModifiers:[],options:Object.assign({},tr,V),modifiersData:{},elements:{reference:q,popper:te},attributes:{},styles:{}},We=[],Oe=!1,Ue={state:me,setOptions:function(je){var _t=typeof je=="function"?je(me.options):je;$e(),me.options=Object.assign({},V,me.options,_t),me.scrollParents={reference:Pn(q)?Zi(q):q.contextElement?Zi(q.contextElement):[],popper:Zi(te)};var It,Ye,ut=function(ze){var tt=yu(ze);return wl.reduce(function(mt,vt){return mt.concat(tt.filter(function(gt){return gt.phase===vt}))},[])}((It=[].concat(b,me.options.modifiers),Ye=It.reduce(function(ze,tt){var mt=ze[tt.name];return ze[tt.name]=mt?Object.assign({},mt,tt,{options:Object.assign({},mt.options,tt.options),data:Object.assign({},mt.data,tt.data)}):tt,ze},{}),Object.keys(Ye).map(function(ze){return Ye[ze]})));return me.orderedModifiers=ut.filter(function(ze){return ze.enabled}),me.orderedModifiers.forEach(function(ze){var tt=ze.name,mt=ze.options,vt=mt===void 0?{}:mt,gt=ze.effect;if(typeof gt=="function"){var Bt=gt({state:me,name:tt,instance:Ue,options:vt});We.push(Bt||function(){})}}),Ue.update()},forceUpdate:function(){if(!Oe){var je=me.elements,_t=je.reference,It=je.popper;if(Ol(_t,It)){me.rects={reference:Zd(_t,Xi(It),me.options.strategy==="fixed"),popper:Tl(It)},me.reset=!1,me.placement=me.options.placement,me.orderedModifiers.forEach(function(gt){return me.modifiersData[gt.name]=Object.assign({},gt.data)});for(var Ye=0;Ye<me.orderedModifiers.length;Ye++)if(me.reset!==!0){var ut=me.orderedModifiers[Ye],ze=ut.fn,tt=ut.options,mt=tt===void 0?{}:tt,vt=ut.name;typeof ze=="function"&&(me=ze({state:me,options:mt,name:vt,instance:Ue})||me)}else me.reset=!1,Ye=-1}}},update:(ye=function(){return new Promise(function(je){Ue.forceUpdate(),je(me)})},function(){return be||(be=new Promise(function(je){Promise.resolve().then(function(){be=void 0,je(ye())})})),be}),destroy:function(){$e(),Oe=!0}};if(!Ol(q,te))return Ue;function $e(){We.forEach(function(je){return je()}),We=[]}return Ue.setOptions(he).then(function(je){!Oe&&he.onFirstUpdate&&he.onFirstUpdate(je)}),Ue}}var kl=to(),xl=to({defaultModifiers:[na,oa,Ji,Yi]}),aa=to({defaultModifiers:[na,oa,Ji,Yi,Zr,vu,eo,pu,ra]});const no=Object.freeze(Object.defineProperty({__proto__:null,afterMain:El,afterRead:yl,afterWrite:cu,applyStyles:Yi,arrow:pu,auto:Gr,basePlacements:ui,beforeMain:Zo,beforeRead:_l,beforeWrite:bl,bottom:vn,clippingParents:ml,computeStyles:Ji,createPopper:aa,createPopperBase:kl,createPopperLite:xl,detectOverflow:yn,end:Ss,eventListeners:na,flip:vu,hide:ra,left:Jt,main:ea,modifierPhases:wl,offset:Zr,placements:gl,popper:cs,popperGenerator:to,popperOffsets:oa,preventOverflow:eo,read:vl,reference:js,right:pn,start:hi,top:sn,variationPlacements:Yr,viewport:Qr,write:lu},Symbol.toStringTag,{value:"Module"})),Dl="dropdown",Hs=".bs.dropdown",Rs=".data-api",Eu="ArrowUp",Nl="ArrowDown",bu=`hide${Hs}`,wu=`hidden${Hs}`,la=`show${Hs}`,kn=`shown${Hs}`,Ll=`click${Hs}${Rs}`,Vl=`keydown${Hs}${Rs}`,nr=`keyup${Hs}${Rs}`,a="show",f='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',v=`${f}.${a}`,w=".dropdown-menu",F=N()?"top-end":"top-start",H=N()?"top-start":"top-end",ue=N()?"bottom-end":"bottom-start",pt=N()?"bottom-start":"bottom-end",Zt=N()?"left-start":"right-start",nt=N()?"right-start":"left-start",rn={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},on={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class an extends ct{constructor(u,m){super(u,m),this._popper=null,this._parent=this._element.parentNode,this._menu=W.next(this._element,w)[0]||W.prev(this._element,w)[0]||W.findOne(w,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return rn}static get DefaultType(){return on}static get NAME(){return Dl}toggle(){return this._isShown()?this.hide():this.show()}show(){if(h(this._element)||this._isShown())return;const u={relatedTarget:this._element};if(!X.trigger(this._element,la,u).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const m of[].concat(...document.body.children))X.on(m,"mouseover",_);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(a),this._element.classList.add(a),X.trigger(this._element,kn,u)}}hide(){if(h(this._element)||!this._isShown())return;const u={relatedTarget:this._element};this._completeHide(u)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(u){if(!X.trigger(this._element,bu,u).defaultPrevented){if("ontouchstart"in document.documentElement)for(const m of[].concat(...document.body.children))X.off(m,"mouseover",_);this._popper&&this._popper.destroy(),this._menu.classList.remove(a),this._element.classList.remove(a),this._element.setAttribute("aria-expanded","false"),Ct.removeDataAttribute(this._menu,"popper"),X.trigger(this._element,wu,u),this._element.focus()}}_getConfig(u){if(typeof(u=super._getConfig(u)).reference=="object"&&!l(u.reference)&&typeof u.reference.getBoundingClientRect!="function")throw new TypeError(`${Dl.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return u}_createPopper(){if(no===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let u=this._element;this._config.reference==="parent"?u=this._parent:l(this._config.reference)?u=c(this._config.reference):typeof this._config.reference=="object"&&(u=this._config.reference);const m=this._getPopperConfig();this._popper=aa(u,this._menu,m)}_isShown(){return this._menu.classList.contains(a)}_getPlacement(){const u=this._parent;if(u.classList.contains("dropend"))return Zt;if(u.classList.contains("dropstart"))return nt;if(u.classList.contains("dropup-center"))return"top";if(u.classList.contains("dropdown-center"))return"bottom";const m=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return u.classList.contains("dropup")?m?H:F:m?pt:ue}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:u}=this._config;return typeof u=="string"?u.split(",").map(m=>Number.parseInt(m,10)):typeof u=="function"?m=>u(m,this._element):u}_getPopperConfig(){const u={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Ct.setDataAttribute(this._menu,"popper","static"),u.modifiers=[{name:"applyStyles",enabled:!1}]),{...u,...$(this._config.popperConfig,[void 0,u])}}_selectMenuItem({key:u,target:m}){const b=W.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(L=>d(L));b.length&&B(b,m,u===Nl,!b.includes(m)).focus()}static jQueryInterface(u){return this.each(function(){const m=an.getOrCreateInstance(this,u);if(typeof u=="string"){if(m[u]===void 0)throw new TypeError(`No method named "${u}"`);m[u]()}})}static clearMenus(u){if(u.button===2||u.type==="keyup"&&u.key!=="Tab")return;const m=W.find(v);for(const b of m){const L=an.getInstance(b);if(!L||L._config.autoClose===!1)continue;const V=u.composedPath(),q=V.includes(L._menu);if(V.includes(L._element)||L._config.autoClose==="inside"&&!q||L._config.autoClose==="outside"&&q||L._menu.contains(u.target)&&(u.type==="keyup"&&u.key==="Tab"||/input|select|option|textarea|form/i.test(u.target.tagName)))continue;const te={relatedTarget:L._element};u.type==="click"&&(te.clickEvent=u),L._completeHide(te)}}static dataApiKeydownHandler(u){const m=/input|textarea/i.test(u.target.tagName),b=u.key==="Escape",L=[Eu,Nl].includes(u.key);if(!L&&!b||m&&!b)return;u.preventDefault();const V=this.matches(f)?this:W.prev(this,f)[0]||W.next(this,f)[0]||W.findOne(f,u.delegateTarget.parentNode),q=an.getOrCreateInstance(V);if(L)return u.stopPropagation(),q.show(),void q._selectMenuItem(u);q._isShown()&&(u.stopPropagation(),q.hide(),V.focus())}}X.on(document,Vl,f,an.dataApiKeydownHandler),X.on(document,Vl,w,an.dataApiKeydownHandler),X.on(document,Ll,an.clearMenus),X.on(document,nr,an.clearMenus),X.on(document,Ll,f,function(y){y.preventDefault(),an.getOrCreateInstance(this).toggle()}),j(an);const qn="backdrop",so="show",ca=`mousedown.bs.${qn}`,JI={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},ZI={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Ug extends Rt{constructor(u){super(),this._config=this._getConfig(u),this._isAppended=!1,this._element=null}static get Default(){return JI}static get DefaultType(){return ZI}static get NAME(){return qn}show(u){if(!this._config.isVisible)return void $(u);this._append();const m=this._getElement();this._config.isAnimated&&E(m),m.classList.add(so),this._emulateAnimation(()=>{$(u)})}hide(u){this._config.isVisible?(this._getElement().classList.remove(so),this._emulateAnimation(()=>{this.dispose(),$(u)})):$(u)}dispose(){this._isAppended&&(X.off(this._element,ca),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const u=document.createElement("div");u.className=this._config.className,this._config.isAnimated&&u.classList.add("fade"),this._element=u}return this._element}_configAfterMerge(u){return u.rootElement=c(u.rootElement),u}_append(){if(this._isAppended)return;const u=this._getElement();this._config.rootElement.append(u),X.on(u,ca,()=>{$(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(u){U(u,this._getElement(),this._config.isAnimated)}}const Tu=".bs.focustrap",e0=`focusin${Tu}`,t0=`keydown.tab${Tu}`,jg="backward",n0={autofocus:!0,trapElement:null},s0={autofocus:"boolean",trapElement:"element"};class Bg extends Rt{constructor(u){super(),this._config=this._getConfig(u),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return n0}static get DefaultType(){return s0}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),X.off(document,Tu),X.on(document,e0,u=>this._handleFocusin(u)),X.on(document,t0,u=>this._handleKeydown(u)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,X.off(document,Tu))}_handleFocusin(u){const{trapElement:m}=this._config;if(u.target===document||u.target===m||m.contains(u.target))return;const b=W.focusableChildren(m);b.length===0?m.focus():this._lastTabNavDirection===jg?b[b.length-1].focus():b[0].focus()}_handleKeydown(u){u.key==="Tab"&&(this._lastTabNavDirection=u.shiftKey?jg:"forward")}}const Hg=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",qg=".sticky-top",Au="padding-right",Wg="margin-right";class ef{constructor(){this._element=document.body}getWidth(){const u=document.documentElement.clientWidth;return Math.abs(window.innerWidth-u)}hide(){const u=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Au,m=>m+u),this._setElementAttributes(Hg,Au,m=>m+u),this._setElementAttributes(qg,Wg,m=>m-u)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Au),this._resetElementAttributes(Hg,Au),this._resetElementAttributes(qg,Wg)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(u,m,b){const L=this.getWidth();this._applyManipulationCallback(u,V=>{if(V!==this._element&&window.innerWidth>V.clientWidth+L)return;this._saveInitialAttribute(V,m);const q=window.getComputedStyle(V).getPropertyValue(m);V.style.setProperty(m,`${b(Number.parseFloat(q))}px`)})}_saveInitialAttribute(u,m){const b=u.style.getPropertyValue(m);b&&Ct.setDataAttribute(u,m,b)}_resetElementAttributes(u,m){this._applyManipulationCallback(u,b=>{const L=Ct.getDataAttribute(b,m);L!==null?(Ct.removeDataAttribute(b,m),b.style.setProperty(m,L)):b.style.removeProperty(m)})}_applyManipulationCallback(u,m){if(l(u))m(u);else for(const b of W.find(u,this._element))m(b)}}const ds=".bs.modal",i0=`hide${ds}`,r0=`hidePrevented${ds}`,zg=`hidden${ds}`,Kg=`show${ds}`,o0=`shown${ds}`,a0=`resize${ds}`,l0=`click.dismiss${ds}`,c0=`mousedown.dismiss${ds}`,u0=`keydown.dismiss${ds}`,h0=`click${ds}.data-api`,Gg="modal-open",Qg="show",tf="modal-static",d0={backdrop:!0,focus:!0,keyboard:!0},f0={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class io extends ct{constructor(u,m){super(u,m),this._dialog=W.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new ef,this._addEventListeners()}static get Default(){return d0}static get DefaultType(){return f0}static get NAME(){return"modal"}toggle(u){return this._isShown?this.hide():this.show(u)}show(u){this._isShown||this._isTransitioning||X.trigger(this._element,Kg,{relatedTarget:u}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Gg),this._adjustDialog(),this._backdrop.show(()=>this._showElement(u)))}hide(){this._isShown&&!this._isTransitioning&&(X.trigger(this._element,i0).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Qg),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){X.off(window,ds),X.off(this._dialog,ds),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Ug({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Bg({trapElement:this._element})}_showElement(u){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const m=W.findOne(".modal-body",this._dialog);m&&(m.scrollTop=0),E(this._element),this._element.classList.add(Qg),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,X.trigger(this._element,o0,{relatedTarget:u})},this._dialog,this._isAnimated())}_addEventListeners(){X.on(this._element,u0,u=>{u.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),X.on(window,a0,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),X.on(this._element,c0,u=>{X.one(this._element,l0,m=>{this._element===u.target&&this._element===m.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Gg),this._resetAdjustments(),this._scrollBar.reset(),X.trigger(this._element,zg)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(X.trigger(this._element,r0).defaultPrevented)return;const u=this._element.scrollHeight>document.documentElement.clientHeight,m=this._element.style.overflowY;m==="hidden"||this._element.classList.contains(tf)||(u||(this._element.style.overflowY="hidden"),this._element.classList.add(tf),this._queueCallback(()=>{this._element.classList.remove(tf),this._queueCallback(()=>{this._element.style.overflowY=m},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const u=this._element.scrollHeight>document.documentElement.clientHeight,m=this._scrollBar.getWidth(),b=m>0;if(b&&!u){const L=N()?"paddingLeft":"paddingRight";this._element.style[L]=`${m}px`}if(!b&&u){const L=N()?"paddingRight":"paddingLeft";this._element.style[L]=`${m}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(u,m){return this.each(function(){const b=io.getOrCreateInstance(this,u);if(typeof u=="string"){if(b[u]===void 0)throw new TypeError(`No method named "${u}"`);b[u](m)}})}}X.on(document,h0,'[data-bs-toggle="modal"]',function(y){const u=W.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&y.preventDefault(),X.one(u,Kg,b=>{b.defaultPrevented||X.one(u,zg,()=>{d(this)&&this.focus()})});const m=W.findOne(".modal.show");m&&io.getInstance(m).hide(),io.getOrCreateInstance(u).toggle(this)}),ce(io),j(io);const gi=".bs.offcanvas",Yg=".data-api",p0=`load${gi}${Yg}`,Xg="show",Jg="showing",Zg="hiding",e_=".offcanvas.show",m0=`show${gi}`,g0=`shown${gi}`,_0=`hide${gi}`,t_=`hidePrevented${gi}`,n_=`hidden${gi}`,v0=`resize${gi}`,y0=`click${gi}${Yg}`,E0=`keydown.dismiss${gi}`,b0={backdrop:!0,keyboard:!0,scroll:!1},w0={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class _i extends ct{constructor(u,m){super(u,m),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return b0}static get DefaultType(){return w0}static get NAME(){return"offcanvas"}toggle(u){return this._isShown?this.hide():this.show(u)}show(u){this._isShown||X.trigger(this._element,m0,{relatedTarget:u}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new ef().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Jg),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Xg),this._element.classList.remove(Jg),X.trigger(this._element,g0,{relatedTarget:u})},this._element,!0))}hide(){this._isShown&&(X.trigger(this._element,_0).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Zg),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(Xg,Zg),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new ef().reset(),X.trigger(this._element,n_)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const u=!!this._config.backdrop;return new Ug({className:"offcanvas-backdrop",isVisible:u,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:u?()=>{this._config.backdrop!=="static"?this.hide():X.trigger(this._element,t_)}:null})}_initializeFocusTrap(){return new Bg({trapElement:this._element})}_addEventListeners(){X.on(this._element,E0,u=>{u.key==="Escape"&&(this._config.keyboard?this.hide():X.trigger(this._element,t_))})}static jQueryInterface(u){return this.each(function(){const m=_i.getOrCreateInstance(this,u);if(typeof u=="string"){if(m[u]===void 0||u.startsWith("_")||u==="constructor")throw new TypeError(`No method named "${u}"`);m[u](this)}})}}X.on(document,y0,'[data-bs-toggle="offcanvas"]',function(y){const u=W.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&y.preventDefault(),h(this))return;X.one(u,n_,()=>{d(this)&&this.focus()});const m=W.findOne(e_);m&&m!==u&&_i.getInstance(m).hide(),_i.getOrCreateInstance(u).toggle(this)}),X.on(window,p0,()=>{for(const y of W.find(e_))_i.getOrCreateInstance(y).show()}),X.on(window,v0,()=>{for(const y of W.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(y).position!=="fixed"&&_i.getOrCreateInstance(y).hide()}),ce(_i),j(_i);const s_={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},T0=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),A0=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,I0=(y,u)=>{const m=y.nodeName.toLowerCase();return u.includes(m)?!T0.has(m)||!!A0.test(y.nodeValue):u.filter(b=>b instanceof RegExp).some(b=>b.test(m))},S0={allowList:s_,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},C0={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},R0={entry:"(string|element|function|null)",selector:"(string|element)"};class P0 extends Rt{constructor(u){super(),this._config=this._getConfig(u)}static get Default(){return S0}static get DefaultType(){return C0}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(u=>this._resolvePossibleFunction(u)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(u){return this._checkContent(u),this._config.content={...this._config.content,...u},this}toHtml(){const u=document.createElement("div");u.innerHTML=this._maybeSanitize(this._config.template);for(const[L,V]of Object.entries(this._config.content))this._setContent(u,V,L);const m=u.children[0],b=this._resolvePossibleFunction(this._config.extraClass);return b&&m.classList.add(...b.split(" ")),m}_typeCheckConfig(u){super._typeCheckConfig(u),this._checkContent(u.content)}_checkContent(u){for(const[m,b]of Object.entries(u))super._typeCheckConfig({selector:m,entry:b},R0)}_setContent(u,m,b){const L=W.findOne(b,u);L&&((m=this._resolvePossibleFunction(m))?l(m)?this._putElementInTemplate(c(m),L):this._config.html?L.innerHTML=this._maybeSanitize(m):L.textContent=m:L.remove())}_maybeSanitize(u){return this._config.sanitize?function(m,b,L){if(!m.length)return m;if(L&&typeof L=="function")return L(m);const V=new window.DOMParser().parseFromString(m,"text/html"),q=[].concat(...V.body.querySelectorAll("*"));for(const te of q){const he=te.nodeName.toLowerCase();if(!Object.keys(b).includes(he)){te.remove();continue}const ye=[].concat(...te.attributes),be=[].concat(b["*"]||[],b[he]||[]);for(const me of ye)I0(me,be)||te.removeAttribute(me.nodeName)}return V.body.innerHTML}(u,this._config.allowList,this._config.sanitizeFn):u}_resolvePossibleFunction(u){return $(u,[void 0,this])}_putElementInTemplate(u,m){if(this._config.html)return m.innerHTML="",void m.append(u);m.textContent=u.textContent}}const O0=new Set(["sanitize","allowList","sanitizeFn"]),nf="fade",Iu="show",k0=".tooltip-inner",i_=".modal",r_="hide.bs.modal",Ml="hover",sf="focus",x0={AUTO:"auto",TOP:"top",RIGHT:N()?"left":"right",BOTTOM:"bottom",LEFT:N()?"right":"left"},D0={allowList:s_,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},N0={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class ro extends ct{constructor(u,m){if(no===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(u,m),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return D0}static get DefaultType(){return N0}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),X.off(this._element.closest(i_),r_,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const u=X.trigger(this._element,this.constructor.eventName("show")),m=(p(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(u.defaultPrevented||!m)return;this._disposePopper();const b=this._getTipElement();this._element.setAttribute("aria-describedby",b.getAttribute("id"));const{container:L}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(L.append(b),X.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(b),b.classList.add(Iu),"ontouchstart"in document.documentElement)for(const V of[].concat(...document.body.children))X.on(V,"mouseover",_);this._queueCallback(()=>{X.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!X.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(Iu),"ontouchstart"in document.documentElement)for(const u of[].concat(...document.body.children))X.off(u,"mouseover",_);this._activeTrigger.click=!1,this._activeTrigger[sf]=!1,this._activeTrigger[Ml]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),X.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(u){const m=this._getTemplateFactory(u).toHtml();if(!m)return null;m.classList.remove(nf,Iu),m.classList.add(`bs-${this.constructor.NAME}-auto`);const b=(L=>{do L+=Math.floor(1e6*Math.random());while(document.getElementById(L));return L})(this.constructor.NAME).toString();return m.setAttribute("id",b),this._isAnimated()&&m.classList.add(nf),m}setContent(u){this._newContent=u,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(u){return this._templateFactory?this._templateFactory.changeContent(u):this._templateFactory=new P0({...this._config,content:u,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[k0]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(u){return this.constructor.getOrCreateInstance(u.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(nf)}_isShown(){return this.tip&&this.tip.classList.contains(Iu)}_createPopper(u){const m=$(this._config.placement,[this,u,this._element]),b=x0[m.toUpperCase()];return aa(this._element,u,this._getPopperConfig(b))}_getOffset(){const{offset:u}=this._config;return typeof u=="string"?u.split(",").map(m=>Number.parseInt(m,10)):typeof u=="function"?m=>u(m,this._element):u}_resolvePossibleFunction(u){return $(u,[this._element,this._element])}_getPopperConfig(u){const m={placement:u,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:b=>{this._getTipElement().setAttribute("data-popper-placement",b.state.placement)}}]};return{...m,...$(this._config.popperConfig,[void 0,m])}}_setListeners(){const u=this._config.trigger.split(" ");for(const m of u)if(m==="click")X.on(this._element,this.constructor.eventName("click"),this._config.selector,b=>{this._initializeOnDelegatedTarget(b).toggle()});else if(m!=="manual"){const b=m===Ml?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),L=m===Ml?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");X.on(this._element,b,this._config.selector,V=>{const q=this._initializeOnDelegatedTarget(V);q._activeTrigger[V.type==="focusin"?sf:Ml]=!0,q._enter()}),X.on(this._element,L,this._config.selector,V=>{const q=this._initializeOnDelegatedTarget(V);q._activeTrigger[V.type==="focusout"?sf:Ml]=q._element.contains(V.relatedTarget),q._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},X.on(this._element.closest(i_),r_,this._hideModalHandler)}_fixTitle(){const u=this._element.getAttribute("title");u&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",u),this._element.setAttribute("data-bs-original-title",u),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(u,m){clearTimeout(this._timeout),this._timeout=setTimeout(u,m)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(u){const m=Ct.getDataAttributes(this._element);for(const b of Object.keys(m))O0.has(b)&&delete m[b];return u={...m,...typeof u=="object"&&u?u:{}},u=this._mergeConfigObj(u),u=this._configAfterMerge(u),this._typeCheckConfig(u),u}_configAfterMerge(u){return u.container=u.container===!1?document.body:c(u.container),typeof u.delay=="number"&&(u.delay={show:u.delay,hide:u.delay}),typeof u.title=="number"&&(u.title=u.title.toString()),typeof u.content=="number"&&(u.content=u.content.toString()),u}_getDelegateConfig(){const u={};for(const[m,b]of Object.entries(this._config))this.constructor.Default[m]!==b&&(u[m]=b);return u.selector=!1,u.trigger="manual",u}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(u){return this.each(function(){const m=ro.getOrCreateInstance(this,u);if(typeof u=="string"){if(m[u]===void 0)throw new TypeError(`No method named "${u}"`);m[u]()}})}}j(ro);const L0=".popover-header",V0=".popover-body",M0={...ro.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},$0={...ro.DefaultType,content:"(null|string|element|function)"};class Su extends ro{static get Default(){return M0}static get DefaultType(){return $0}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[L0]:this._getTitle(),[V0]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(u){return this.each(function(){const m=Su.getOrCreateInstance(this,u);if(typeof u=="string"){if(m[u]===void 0)throw new TypeError(`No method named "${u}"`);m[u]()}})}}j(Su);const rf=".bs.scrollspy",F0=`activate${rf}`,o_=`click${rf}`,U0=`load${rf}.data-api`,ua="active",of="[href]",a_=".nav-link",j0=`${a_}, .nav-item > ${a_}, .list-group-item`,B0={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},H0={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class $l extends ct{constructor(u,m){super(u,m),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return B0}static get DefaultType(){return H0}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const u of this._observableSections.values())this._observer.observe(u)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(u){return u.target=c(u.target)||document.body,u.rootMargin=u.offset?`${u.offset}px 0px -30%`:u.rootMargin,typeof u.threshold=="string"&&(u.threshold=u.threshold.split(",").map(m=>Number.parseFloat(m))),u}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(X.off(this._config.target,o_),X.on(this._config.target,o_,of,u=>{const m=this._observableSections.get(u.target.hash);if(m){u.preventDefault();const b=this._rootElement||window,L=m.offsetTop-this._element.offsetTop;if(b.scrollTo)return void b.scrollTo({top:L,behavior:"smooth"});b.scrollTop=L}}))}_getNewObserver(){const u={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(m=>this._observerCallback(m),u)}_observerCallback(u){const m=q=>this._targetLinks.get(`#${q.target.id}`),b=q=>{this._previousScrollData.visibleEntryTop=q.target.offsetTop,this._process(m(q))},L=(this._rootElement||document.documentElement).scrollTop,V=L>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=L;for(const q of u){if(!q.isIntersecting){this._activeTarget=null,this._clearActiveClass(m(q));continue}const te=q.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(V&&te){if(b(q),!L)return}else V||te||b(q)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const u=W.find(of,this._config.target);for(const m of u){if(!m.hash||h(m))continue;const b=W.findOne(decodeURI(m.hash),this._element);d(b)&&(this._targetLinks.set(decodeURI(m.hash),m),this._observableSections.set(m.hash,b))}}_process(u){this._activeTarget!==u&&(this._clearActiveClass(this._config.target),this._activeTarget=u,u.classList.add(ua),this._activateParents(u),X.trigger(this._element,F0,{relatedTarget:u}))}_activateParents(u){if(u.classList.contains("dropdown-item"))W.findOne(".dropdown-toggle",u.closest(".dropdown")).classList.add(ua);else for(const m of W.parents(u,".nav, .list-group"))for(const b of W.prev(m,j0))b.classList.add(ua)}_clearActiveClass(u){u.classList.remove(ua);const m=W.find(`${of}.${ua}`,u);for(const b of m)b.classList.remove(ua)}static jQueryInterface(u){return this.each(function(){const m=$l.getOrCreateInstance(this,u);if(typeof u=="string"){if(m[u]===void 0||u.startsWith("_")||u==="constructor")throw new TypeError(`No method named "${u}"`);m[u]()}})}}X.on(window,U0,()=>{for(const y of W.find('[data-bs-spy="scroll"]'))$l.getOrCreateInstance(y)}),j($l);const oo=".bs.tab",q0=`hide${oo}`,W0=`hidden${oo}`,z0=`show${oo}`,K0=`shown${oo}`,G0=`click${oo}`,Q0=`keydown${oo}`,Y0=`load${oo}`,X0="ArrowLeft",l_="ArrowRight",J0="ArrowUp",c_="ArrowDown",af="Home",u_="End",ao="active",h_="fade",lf="show",d_=".dropdown-toggle",cf=`:not(${d_})`,f_='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',uf=`.nav-link${cf}, .list-group-item${cf}, [role="tab"]${cf}, ${f_}`,Z0=`.${ao}[data-bs-toggle="tab"], .${ao}[data-bs-toggle="pill"], .${ao}[data-bs-toggle="list"]`;class lo extends ct{constructor(u){super(u),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),X.on(this._element,Q0,m=>this._keydown(m)))}static get NAME(){return"tab"}show(){const u=this._element;if(this._elemIsActive(u))return;const m=this._getActiveElem(),b=m?X.trigger(m,q0,{relatedTarget:u}):null;X.trigger(u,z0,{relatedTarget:m}).defaultPrevented||b&&b.defaultPrevented||(this._deactivate(m,u),this._activate(u,m))}_activate(u,m){u&&(u.classList.add(ao),this._activate(W.getElementFromSelector(u)),this._queueCallback(()=>{u.getAttribute("role")==="tab"?(u.removeAttribute("tabindex"),u.setAttribute("aria-selected",!0),this._toggleDropDown(u,!0),X.trigger(u,K0,{relatedTarget:m})):u.classList.add(lf)},u,u.classList.contains(h_)))}_deactivate(u,m){u&&(u.classList.remove(ao),u.blur(),this._deactivate(W.getElementFromSelector(u)),this._queueCallback(()=>{u.getAttribute("role")==="tab"?(u.setAttribute("aria-selected",!1),u.setAttribute("tabindex","-1"),this._toggleDropDown(u,!1),X.trigger(u,W0,{relatedTarget:m})):u.classList.remove(lf)},u,u.classList.contains(h_)))}_keydown(u){if(![X0,l_,J0,c_,af,u_].includes(u.key))return;u.stopPropagation(),u.preventDefault();const m=this._getChildren().filter(L=>!h(L));let b;if([af,u_].includes(u.key))b=m[u.key===af?0:m.length-1];else{const L=[l_,c_].includes(u.key);b=B(m,u.target,L,!0)}b&&(b.focus({preventScroll:!0}),lo.getOrCreateInstance(b).show())}_getChildren(){return W.find(uf,this._parent)}_getActiveElem(){return this._getChildren().find(u=>this._elemIsActive(u))||null}_setInitialAttributes(u,m){this._setAttributeIfNotExists(u,"role","tablist");for(const b of m)this._setInitialAttributesOnChild(b)}_setInitialAttributesOnChild(u){u=this._getInnerElement(u);const m=this._elemIsActive(u),b=this._getOuterElement(u);u.setAttribute("aria-selected",m),b!==u&&this._setAttributeIfNotExists(b,"role","presentation"),m||u.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(u,"role","tab"),this._setInitialAttributesOnTargetPanel(u)}_setInitialAttributesOnTargetPanel(u){const m=W.getElementFromSelector(u);m&&(this._setAttributeIfNotExists(m,"role","tabpanel"),u.id&&this._setAttributeIfNotExists(m,"aria-labelledby",`${u.id}`))}_toggleDropDown(u,m){const b=this._getOuterElement(u);if(!b.classList.contains("dropdown"))return;const L=(V,q)=>{const te=W.findOne(V,b);te&&te.classList.toggle(q,m)};L(d_,ao),L(".dropdown-menu",lf),b.setAttribute("aria-expanded",m)}_setAttributeIfNotExists(u,m,b){u.hasAttribute(m)||u.setAttribute(m,b)}_elemIsActive(u){return u.classList.contains(ao)}_getInnerElement(u){return u.matches(uf)?u:W.findOne(uf,u)}_getOuterElement(u){return u.closest(".nav-item, .list-group-item")||u}static jQueryInterface(u){return this.each(function(){const m=lo.getOrCreateInstance(this);if(typeof u=="string"){if(m[u]===void 0||u.startsWith("_")||u==="constructor")throw new TypeError(`No method named "${u}"`);m[u]()}})}}X.on(document,G0,f_,function(y){["A","AREA"].includes(this.tagName)&&y.preventDefault(),h(this)||lo.getOrCreateInstance(this).show()}),X.on(window,Y0,()=>{for(const y of W.find(Z0))lo.getOrCreateInstance(y)}),j(lo);const sr=".bs.toast",eS=`mouseover${sr}`,tS=`mouseout${sr}`,nS=`focusin${sr}`,sS=`focusout${sr}`,iS=`hide${sr}`,rS=`hidden${sr}`,oS=`show${sr}`,aS=`shown${sr}`,p_="hide",Cu="show",Ru="showing",lS={animation:"boolean",autohide:"boolean",delay:"number"},cS={animation:!0,autohide:!0,delay:5e3};class Fl extends ct{constructor(u,m){super(u,m),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return cS}static get DefaultType(){return lS}static get NAME(){return"toast"}show(){X.trigger(this._element,oS).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(p_),E(this._element),this._element.classList.add(Cu,Ru),this._queueCallback(()=>{this._element.classList.remove(Ru),X.trigger(this._element,aS),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(X.trigger(this._element,iS).defaultPrevented||(this._element.classList.add(Ru),this._queueCallback(()=>{this._element.classList.add(p_),this._element.classList.remove(Ru,Cu),X.trigger(this._element,rS)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Cu),super.dispose()}isShown(){return this._element.classList.contains(Cu)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(u,m){switch(u.type){case"mouseover":case"mouseout":this._hasMouseInteraction=m;break;case"focusin":case"focusout":this._hasKeyboardInteraction=m}if(m)return void this._clearTimeout();const b=u.relatedTarget;this._element===b||this._element.contains(b)||this._maybeScheduleHide()}_setListeners(){X.on(this._element,eS,u=>this._onInteraction(u,!0)),X.on(this._element,tS,u=>this._onInteraction(u,!1)),X.on(this._element,nS,u=>this._onInteraction(u,!0)),X.on(this._element,sS,u=>this._onInteraction(u,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(u){return this.each(function(){const m=Fl.getOrCreateInstance(this,u);if(typeof u=="string"){if(m[u]===void 0)throw new TypeError(`No method named "${u}"`);m[u](this)}})}}return ce(Fl),j(Fl),{Alert:k,Button:K,Carousel:ci,Collapse:Cn,Dropdown:an,Modal:io,Offcanvas:_i,Popover:Su,ScrollSpy:$l,Tab:lo,Toast:Fl,Tooltip:ro}})}(hh)),hh.exports}ZV();const eM={props:{text:{type:String,required:!0},maxLength:{type:Number,default:100}},computed:{truncatedText(){return this.text.length<=this.maxLength?this.text:this.text.slice(0,this.maxLength).trim()+"..."}}};function tM(t,e,n,s,i,r){return G(),Y("div",null,[g("p",null,ae(r.truncatedText),1)])}const Hp=Wt(eM,[["render",tM]]),nM={class:"container-fluid py-2 commentaires"},sM={class:"font-weight-light"},iM={class:"media-scroller snaps-inline comms",id:"commentairesIn"},rM={class:"comm-card"},oM={class:"small"},aM={class:"user"},lM=["src","alt"],cM={class:"username"},uM={class:"stars"},hM={__name:"Comments",setup(t){const e=Ae([{id:1,username:"xXDarkSasukeDu44Xx",picture:"/assets/img/gtavi.png",text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Exercitationem, placeat omnis nostrum facilis ex minima est veniam quibusdam unde dolorum. Fugiat voluptatem iure veritatis sapiente perspiciatis. Suscipit dignissimos neque debitis.",rating:"1"},{id:2,username:"xXDarkSasukeDu44Xx",picture:"",text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Exercitationem, placeat omnis nostrum facilis ex minima est veniam quibusdam unde dolorum. Fugiat voluptatem iure veritatis sapiente perspiciatis. Suscipit dignissimos neque debitis.",rating:"2"},{id:3,username:"xXDarkSasukeDu44Xx",picture:"",text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Exercitationem, placeat omnis nostrum facilis ex minima est veniam quibusdam unde dolorum. Fugiat voluptatem iure veritatis sapiente perspiciatis. Suscipit dignissimos neque debitis.",rating:"3"},{id:4,username:"xXDarkSasukeDu44Xx",picture:"",text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Exercitationem, placeat omnis nostrum facilis ex minima est veniam quibusdam unde dolorum. Fugiat voluptatem iure veritatis sapiente perspiciatis. Suscipit dignissimos neque debitis.",rating:"5"},{id:5,username:"xXDarkSasukeDu44Xx",picture:"",text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Exercitationem, placeat omnis nostrum facilis ex minima est veniam quibusdam unde dolorum. Fugiat voluptatem iure veritatis sapiente perspiciatis. Suscipit dignissimos neque debitis.",rating:"3"},{id:6,username:"xXDarkSasukeDu44Xx",picture:"",text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Exercitationem, placeat omnis nostrum facilis ex minima est veniam quibusdam unde dolorum. Fugiat voluptatem iure veritatis sapiente perspiciatis. Suscipit dignissimos neque debitis.",rating:"3"}]);return(n,s)=>(G(),Y("div",nM,[g("h2",sM,ae(e.value.length)+" Commentaires :",1),g("div",null,[g("ul",iM,[(G(!0),Y(xe,null,wt(e.value,i=>(G(),Y("li",{key:i.id},[g("div",rM,[g("div",oM,[g("div",aM,[g("img",{src:i.picture,alt:i.username},null,8,lM),g("h3",cM,ae(i.username),1)]),g("div",uM,[(G(),Y(xe,null,wt(5,(r,o)=>g("span",{key:o},ae(o<i.rating?"★":"☆"),1)),64))])]),s[0]||(s[0]=g("div",{class:"texte"},null,-1)),g("h4",null,[pe(Hp,{text:i.text,maxLength:80},null,8,["text"])]),s[1]||(s[1]=g("h2",null,null,-1))])]))),128))])])]))}},dM=Wt(hM,[["__scopeId","data-v-410a89e0"]]),fM={class:"container-fluid py-2"},pM={class:"media-scroller snaps-inline"},mM={class:"game-card mt-4 mb-5"},gM=["src","alt"],_M={class:"game-text"},vM={class:"titre"},yM={class:"prix"},EM={__name:"Promo",setup(t){const e=Ae([]),n=async()=>{const s=ri(Nt,"games"),i=jr(s,Vi("featured","==",!0),uA(3));try{const r=await Bi(i);e.value=[],r.forEach(o=>{const l=o.data();e.value.push({id:o.id,titre:l.name,link:l.link,image:l.image,price:`${l.price}€`})})}catch(r){console.error("Erreur lors de la récupération des jeux :",r)}};return Un(()=>{n()}),(s,i)=>{const r=jn("router-link");return G(),Y("div",fM,[i[1]||(i[1]=g("h2",{class:"font-weight-light"},"Les jeux de la semaine",-1)),g("div",null,[g("ul",pM,[(G(!0),Y(xe,null,wt(e.value,o=>(G(),Y("li",{key:o.id},[g("div",mM,[pe(r,{class:"nav-link",to:`/game/${o.id}`},{default:Je(()=>[g("img",{src:`/assets/img/preview/${o.image}`,alt:o.titre},null,8,gM)]),_:2},1032,["to"]),g("div",_M,[g("h3",vM,ae(o.titre)+" :",1),g("h3",yM,ae(o.price),1)]),i[0]||(i[0]=g("h2",null,null,-1))])]))),128))])])])}}},bM=Wt(EM,[["__scopeId","data-v-05a3d4f5"]]);var $n="top",os="bottom",as="right",Fn="left",jd="auto",ll=[$n,os,as,Fn],Lo="start",Ka="end",XA="clippingParents",bg="viewport",wa="popper",JA="reference",qp=ll.reduce(function(t,e){return t.concat([e+"-"+Lo,e+"-"+Ka])},[]),wg=[].concat(ll,[jd]).reduce(function(t,e){return t.concat([e,e+"-"+Lo,e+"-"+Ka])},[]),ZA="beforeRead",eI="read",tI="afterRead",nI="beforeMain",sI="main",iI="afterMain",rI="beforeWrite",oI="write",aI="afterWrite",lI=[ZA,eI,tI,nI,sI,iI,rI,oI,aI];function ii(t){return t?(t.nodeName||"").toLowerCase():null}function ls(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Vo(t){var e=ls(t).Element;return t instanceof e||t instanceof Element}function Es(t){var e=ls(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Tg(t){if(typeof ShadowRoot>"u")return!1;var e=ls(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function wM(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var s=e.styles[n]||{},i=e.attributes[n]||{},r=e.elements[n];!Es(r)||!ii(r)||(Object.assign(r.style,s),Object.keys(i).forEach(function(o){var l=i[o];l===!1?r.removeAttribute(o):r.setAttribute(o,l===!0?"":l)}))})}function TM(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(s){var i=e.elements[s],r=e.attributes[s]||{},o=Object.keys(e.styles.hasOwnProperty(s)?e.styles[s]:n[s]),l=o.reduce(function(c,d){return c[d]="",c},{});!Es(i)||!ii(i)||(Object.assign(i.style,l),Object.keys(r).forEach(function(c){i.removeAttribute(c)}))})}}const Ag={name:"applyStyles",enabled:!0,phase:"write",fn:wM,effect:TM,requires:["computeStyles"]};function ti(t){return t.split("-")[0]}var So=Math.max,Gh=Math.min,Ga=Math.round;function Wp(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function cI(){return!/^((?!chrome|android).)*safari/i.test(Wp())}function Qa(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var s=t.getBoundingClientRect(),i=1,r=1;e&&Es(t)&&(i=t.offsetWidth>0&&Ga(s.width)/t.offsetWidth||1,r=t.offsetHeight>0&&Ga(s.height)/t.offsetHeight||1);var o=Vo(t)?ls(t):window,l=o.visualViewport,c=!cI()&&n,d=(s.left+(c&&l?l.offsetLeft:0))/i,h=(s.top+(c&&l?l.offsetTop:0))/r,p=s.width/i,_=s.height/r;return{width:p,height:_,top:h,right:d+p,bottom:h+_,left:d,x:d,y:h}}function Ig(t){var e=Qa(t),n=t.offsetWidth,s=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-s)<=1&&(s=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:s}}function uI(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Tg(n)){var s=e;do{if(s&&t.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function $i(t){return ls(t).getComputedStyle(t)}function AM(t){return["table","td","th"].indexOf(ii(t))>=0}function Br(t){return((Vo(t)?t.ownerDocument:t.document)||window.document).documentElement}function Bd(t){return ii(t)==="html"?t:t.assignedSlot||t.parentNode||(Tg(t)?t.host:null)||Br(t)}function uE(t){return!Es(t)||$i(t).position==="fixed"?null:t.offsetParent}function IM(t){var e=/firefox/i.test(Wp()),n=/Trident/i.test(Wp());if(n&&Es(t)){var s=$i(t);if(s.position==="fixed")return null}var i=Bd(t);for(Tg(i)&&(i=i.host);Es(i)&&["html","body"].indexOf(ii(i))<0;){var r=$i(i);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||e&&r.willChange==="filter"||e&&r.filter&&r.filter!=="none")return i;i=i.parentNode}return null}function Jc(t){for(var e=ls(t),n=uE(t);n&&AM(n)&&$i(n).position==="static";)n=uE(n);return n&&(ii(n)==="html"||ii(n)==="body"&&$i(n).position==="static")?e:n||IM(t)||e}function Sg(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function fc(t,e,n){return So(t,Gh(e,n))}function SM(t,e,n){var s=fc(t,e,n);return s>n?n:s}function hI(){return{top:0,right:0,bottom:0,left:0}}function dI(t){return Object.assign({},hI(),t)}function fI(t,e){return e.reduce(function(n,s){return n[s]=t,n},{})}var CM=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,dI(typeof e!="number"?e:fI(e,ll))};function RM(t){var e,n=t.state,s=t.name,i=t.options,r=n.elements.arrow,o=n.modifiersData.popperOffsets,l=ti(n.placement),c=Sg(l),d=[Fn,as].indexOf(l)>=0,h=d?"height":"width";if(!(!r||!o)){var p=CM(i.padding,n),_=Ig(r),E=c==="y"?$n:Fn,C=c==="y"?os:as,D=n.rects.reference[h]+n.rects.reference[c]-o[c]-n.rects.popper[h],N=o[c]-n.rects.reference[c],j=Jc(r),$=j?c==="y"?j.clientHeight||0:j.clientWidth||0:0,U=D/2-N/2,B=p[E],se=$-_[h]-p[C],re=$/2-_[h]/2+U,x=fc(B,re,se),I=c;n.modifiersData[s]=(e={},e[I]=x,e.centerOffset=x-re,e)}}function PM(t){var e=t.state,n=t.options,s=n.element,i=s===void 0?"[data-popper-arrow]":s;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||uI(e.elements.popper,i)&&(e.elements.arrow=i))}const pI={name:"arrow",enabled:!0,phase:"main",fn:RM,effect:PM,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ya(t){return t.split("-")[1]}var OM={top:"auto",right:"auto",bottom:"auto",left:"auto"};function kM(t,e){var n=t.x,s=t.y,i=e.devicePixelRatio||1;return{x:Ga(n*i)/i||0,y:Ga(s*i)/i||0}}function hE(t){var e,n=t.popper,s=t.popperRect,i=t.placement,r=t.variation,o=t.offsets,l=t.position,c=t.gpuAcceleration,d=t.adaptive,h=t.roundOffsets,p=t.isFixed,_=o.x,E=_===void 0?0:_,C=o.y,D=C===void 0?0:C,N=typeof h=="function"?h({x:E,y:D}):{x:E,y:D};E=N.x,D=N.y;var j=o.hasOwnProperty("x"),$=o.hasOwnProperty("y"),U=Fn,B=$n,se=window;if(d){var re=Jc(n),x="clientHeight",I="clientWidth";if(re===ls(n)&&(re=Br(n),$i(re).position!=="static"&&l==="absolute"&&(x="scrollHeight",I="scrollWidth")),re=re,i===$n||(i===Fn||i===as)&&r===Ka){B=os;var T=p&&re===se&&se.visualViewport?se.visualViewport.height:re[x];D-=T-s.height,D*=c?1:-1}if(i===Fn||(i===$n||i===os)&&r===Ka){U=as;var R=p&&re===se&&se.visualViewport?se.visualViewport.width:re[I];E-=R-s.width,E*=c?1:-1}}var O=Object.assign({position:l},d&&OM),A=h===!0?kM({x:E,y:D},ls(n)):{x:E,y:D};if(E=A.x,D=A.y,c){var S;return Object.assign({},O,(S={},S[B]=$?"0":"",S[U]=j?"0":"",S.transform=(se.devicePixelRatio||1)<=1?"translate("+E+"px, "+D+"px)":"translate3d("+E+"px, "+D+"px, 0)",S))}return Object.assign({},O,(e={},e[B]=$?D+"px":"",e[U]=j?E+"px":"",e.transform="",e))}function xM(t){var e=t.state,n=t.options,s=n.gpuAcceleration,i=s===void 0?!0:s,r=n.adaptive,o=r===void 0?!0:r,l=n.roundOffsets,c=l===void 0?!0:l,d={placement:ti(e.placement),variation:Ya(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,hE(Object.assign({},d,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:c})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,hE(Object.assign({},d,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const Cg={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:xM,data:{}};var Hu={passive:!0};function DM(t){var e=t.state,n=t.instance,s=t.options,i=s.scroll,r=i===void 0?!0:i,o=s.resize,l=o===void 0?!0:o,c=ls(e.elements.popper),d=[].concat(e.scrollParents.reference,e.scrollParents.popper);return r&&d.forEach(function(h){h.addEventListener("scroll",n.update,Hu)}),l&&c.addEventListener("resize",n.update,Hu),function(){r&&d.forEach(function(h){h.removeEventListener("scroll",n.update,Hu)}),l&&c.removeEventListener("resize",n.update,Hu)}}const Rg={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:DM,data:{}};var NM={left:"right",right:"left",bottom:"top",top:"bottom"};function dh(t){return t.replace(/left|right|bottom|top/g,function(e){return NM[e]})}var LM={start:"end",end:"start"};function dE(t){return t.replace(/start|end/g,function(e){return LM[e]})}function Pg(t){var e=ls(t),n=e.pageXOffset,s=e.pageYOffset;return{scrollLeft:n,scrollTop:s}}function Og(t){return Qa(Br(t)).left+Pg(t).scrollLeft}function VM(t,e){var n=ls(t),s=Br(t),i=n.visualViewport,r=s.clientWidth,o=s.clientHeight,l=0,c=0;if(i){r=i.width,o=i.height;var d=cI();(d||!d&&e==="fixed")&&(l=i.offsetLeft,c=i.offsetTop)}return{width:r,height:o,x:l+Og(t),y:c}}function MM(t){var e,n=Br(t),s=Pg(t),i=(e=t.ownerDocument)==null?void 0:e.body,r=So(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=So(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),l=-s.scrollLeft+Og(t),c=-s.scrollTop;return $i(i||n).direction==="rtl"&&(l+=So(n.clientWidth,i?i.clientWidth:0)-r),{width:r,height:o,x:l,y:c}}function kg(t){var e=$i(t),n=e.overflow,s=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+s)}function mI(t){return["html","body","#document"].indexOf(ii(t))>=0?t.ownerDocument.body:Es(t)&&kg(t)?t:mI(Bd(t))}function pc(t,e){var n;e===void 0&&(e=[]);var s=mI(t),i=s===((n=t.ownerDocument)==null?void 0:n.body),r=ls(s),o=i?[r].concat(r.visualViewport||[],kg(s)?s:[]):s,l=e.concat(o);return i?l:l.concat(pc(Bd(o)))}function zp(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function $M(t,e){var n=Qa(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function fE(t,e,n){return e===bg?zp(VM(t,n)):Vo(e)?$M(e,n):zp(MM(Br(t)))}function FM(t){var e=pc(Bd(t)),n=["absolute","fixed"].indexOf($i(t).position)>=0,s=n&&Es(t)?Jc(t):t;return Vo(s)?e.filter(function(i){return Vo(i)&&uI(i,s)&&ii(i)!=="body"}):[]}function UM(t,e,n,s){var i=e==="clippingParents"?FM(t):[].concat(e),r=[].concat(i,[n]),o=r[0],l=r.reduce(function(c,d){var h=fE(t,d,s);return c.top=So(h.top,c.top),c.right=Gh(h.right,c.right),c.bottom=Gh(h.bottom,c.bottom),c.left=So(h.left,c.left),c},fE(t,o,s));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function gI(t){var e=t.reference,n=t.element,s=t.placement,i=s?ti(s):null,r=s?Ya(s):null,o=e.x+e.width/2-n.width/2,l=e.y+e.height/2-n.height/2,c;switch(i){case $n:c={x:o,y:e.y-n.height};break;case os:c={x:o,y:e.y+e.height};break;case as:c={x:e.x+e.width,y:l};break;case Fn:c={x:e.x-n.width,y:l};break;default:c={x:e.x,y:e.y}}var d=i?Sg(i):null;if(d!=null){var h=d==="y"?"height":"width";switch(r){case Lo:c[d]=c[d]-(e[h]/2-n[h]/2);break;case Ka:c[d]=c[d]+(e[h]/2-n[h]/2);break}}return c}function Xa(t,e){e===void 0&&(e={});var n=e,s=n.placement,i=s===void 0?t.placement:s,r=n.strategy,o=r===void 0?t.strategy:r,l=n.boundary,c=l===void 0?XA:l,d=n.rootBoundary,h=d===void 0?bg:d,p=n.elementContext,_=p===void 0?wa:p,E=n.altBoundary,C=E===void 0?!1:E,D=n.padding,N=D===void 0?0:D,j=dI(typeof N!="number"?N:fI(N,ll)),$=_===wa?JA:wa,U=t.rects.popper,B=t.elements[C?$:_],se=UM(Vo(B)?B:B.contextElement||Br(t.elements.popper),c,h,o),re=Qa(t.elements.reference),x=gI({reference:re,element:U,placement:i}),I=zp(Object.assign({},U,x)),T=_===wa?I:re,R={top:se.top-T.top+j.top,bottom:T.bottom-se.bottom+j.bottom,left:se.left-T.left+j.left,right:T.right-se.right+j.right},O=t.modifiersData.offset;if(_===wa&&O){var A=O[i];Object.keys(R).forEach(function(S){var Le=[as,os].indexOf(S)>=0?1:-1,ot=[$n,os].indexOf(S)>=0?"y":"x";R[S]+=A[ot]*Le})}return R}function jM(t,e){e===void 0&&(e={});var n=e,s=n.placement,i=n.boundary,r=n.rootBoundary,o=n.padding,l=n.flipVariations,c=n.allowedAutoPlacements,d=c===void 0?wg:c,h=Ya(s),p=h?l?qp:qp.filter(function(C){return Ya(C)===h}):ll,_=p.filter(function(C){return d.indexOf(C)>=0});_.length===0&&(_=p);var E=_.reduce(function(C,D){return C[D]=Xa(t,{placement:D,boundary:i,rootBoundary:r,padding:o})[ti(D)],C},{});return Object.keys(E).sort(function(C,D){return E[C]-E[D]})}function BM(t){if(ti(t)===jd)return[];var e=dh(t);return[dE(t),e,dE(e)]}function HM(t){var e=t.state,n=t.options,s=t.name;if(!e.modifiersData[s]._skip){for(var i=n.mainAxis,r=i===void 0?!0:i,o=n.altAxis,l=o===void 0?!0:o,c=n.fallbackPlacements,d=n.padding,h=n.boundary,p=n.rootBoundary,_=n.altBoundary,E=n.flipVariations,C=E===void 0?!0:E,D=n.allowedAutoPlacements,N=e.options.placement,j=ti(N),$=j===N,U=c||($||!C?[dh(N)]:BM(N)),B=[N].concat(U).reduce(function(Ct,Rt){return Ct.concat(ti(Rt)===jd?jM(e,{placement:Rt,boundary:h,rootBoundary:p,padding:d,flipVariations:C,allowedAutoPlacements:D}):Rt)},[]),se=e.rects.reference,re=e.rects.popper,x=new Map,I=!0,T=B[0],R=0;R<B.length;R++){var O=B[R],A=ti(O),S=Ya(O)===Lo,Le=[$n,os].indexOf(A)>=0,ot=Le?"width":"height",Me=Xa(e,{placement:O,boundary:h,rootBoundary:p,altBoundary:_,padding:d}),we=Le?S?as:Fn:S?os:$n;se[ot]>re[ot]&&(we=dh(we));var qe=dh(we),kt=[];if(r&&kt.push(Me[A]<=0),l&&kt.push(Me[we]<=0,Me[qe]<=0),kt.every(function(Ct){return Ct})){T=O,I=!1;break}x.set(O,kt)}if(I)for(var X=C?3:1,zt=function(Rt){var ct=B.find(function(z){var W=x.get(z);if(W)return W.slice(0,Rt).every(function(ce){return ce})});if(ct)return T=ct,"break"},at=X;at>0;at--){var lt=zt(at);if(lt==="break")break}e.placement!==T&&(e.modifiersData[s]._skip=!0,e.placement=T,e.reset=!0)}}const _I={name:"flip",enabled:!0,phase:"main",fn:HM,requiresIfExists:["offset"],data:{_skip:!1}};function pE(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function mE(t){return[$n,as,os,Fn].some(function(e){return t[e]>=0})}function qM(t){var e=t.state,n=t.name,s=e.rects.reference,i=e.rects.popper,r=e.modifiersData.preventOverflow,o=Xa(e,{elementContext:"reference"}),l=Xa(e,{altBoundary:!0}),c=pE(o,s),d=pE(l,i,r),h=mE(c),p=mE(d);e.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:d,isReferenceHidden:h,hasPopperEscaped:p},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":p})}const vI={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:qM};function WM(t,e,n){var s=ti(t),i=[Fn,$n].indexOf(s)>=0?-1:1,r=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=r[0],l=r[1];return o=o||0,l=(l||0)*i,[Fn,as].indexOf(s)>=0?{x:l,y:o}:{x:o,y:l}}function zM(t){var e=t.state,n=t.options,s=t.name,i=n.offset,r=i===void 0?[0,0]:i,o=wg.reduce(function(h,p){return h[p]=WM(p,e.rects,r),h},{}),l=o[e.placement],c=l.x,d=l.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=c,e.modifiersData.popperOffsets.y+=d),e.modifiersData[s]=o}const yI={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:zM};function KM(t){var e=t.state,n=t.name;e.modifiersData[n]=gI({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const xg={name:"popperOffsets",enabled:!0,phase:"read",fn:KM,data:{}};function GM(t){return t==="x"?"y":"x"}function QM(t){var e=t.state,n=t.options,s=t.name,i=n.mainAxis,r=i===void 0?!0:i,o=n.altAxis,l=o===void 0?!1:o,c=n.boundary,d=n.rootBoundary,h=n.altBoundary,p=n.padding,_=n.tether,E=_===void 0?!0:_,C=n.tetherOffset,D=C===void 0?0:C,N=Xa(e,{boundary:c,rootBoundary:d,padding:p,altBoundary:h}),j=ti(e.placement),$=Ya(e.placement),U=!$,B=Sg(j),se=GM(B),re=e.modifiersData.popperOffsets,x=e.rects.reference,I=e.rects.popper,T=typeof D=="function"?D(Object.assign({},e.rects,{placement:e.placement})):D,R=typeof T=="number"?{mainAxis:T,altAxis:T}:Object.assign({mainAxis:0,altAxis:0},T),O=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,A={x:0,y:0};if(re){if(r){var S,Le=B==="y"?$n:Fn,ot=B==="y"?os:as,Me=B==="y"?"height":"width",we=re[B],qe=we+N[Le],kt=we-N[ot],X=E?-I[Me]/2:0,zt=$===Lo?x[Me]:I[Me],at=$===Lo?-I[Me]:-x[Me],lt=e.elements.arrow,Ct=E&&lt?Ig(lt):{width:0,height:0},Rt=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:hI(),ct=Rt[Le],z=Rt[ot],W=fc(0,x[Me],Ct[Me]),ce=U?x[Me]/2-X-W-ct-R.mainAxis:zt-W-ct-R.mainAxis,ve=U?-x[Me]/2+X+W+z+R.mainAxis:at+W+z+R.mainAxis,Qe=e.elements.arrow&&Jc(e.elements.arrow),P=Qe?B==="y"?Qe.clientTop||0:Qe.clientLeft||0:0,k=(S=O==null?void 0:O[B])!=null?S:0,M=we+ce-k-P,K=we+ve-k,Q=fc(E?Gh(qe,M):qe,we,E?So(kt,K):kt);re[B]=Q,A[B]=Q-we}if(l){var J,de=B==="x"?$n:Fn,le=B==="x"?os:as,oe=re[se],ne=se==="y"?"height":"width",Se=oe+N[de],fe=oe-N[le],Ee=[$n,Fn].indexOf(j)!==-1,Te=(J=O==null?void 0:O[se])!=null?J:0,Ie=Ee?Se:oe-x[ne]-I[ne]-Te+R.altAxis,Ve=Ee?oe+x[ne]+I[ne]-Te-R.altAxis:fe,Ke=E&&Ee?SM(Ie,oe,Ve):fc(E?Ie:Se,oe,E?Ve:fe);re[se]=Ke,A[se]=Ke-oe}e.modifiersData[s]=A}}const EI={name:"preventOverflow",enabled:!0,phase:"main",fn:QM,requiresIfExists:["offset"]};function YM(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function XM(t){return t===ls(t)||!Es(t)?Pg(t):YM(t)}function JM(t){var e=t.getBoundingClientRect(),n=Ga(e.width)/t.offsetWidth||1,s=Ga(e.height)/t.offsetHeight||1;return n!==1||s!==1}function ZM(t,e,n){n===void 0&&(n=!1);var s=Es(e),i=Es(e)&&JM(e),r=Br(e),o=Qa(t,i,n),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(s||!s&&!n)&&((ii(e)!=="body"||kg(r))&&(l=XM(e)),Es(e)?(c=Qa(e,!0),c.x+=e.clientLeft,c.y+=e.clientTop):r&&(c.x=Og(r))),{x:o.left+l.scrollLeft-c.x,y:o.top+l.scrollTop-c.y,width:o.width,height:o.height}}function e2(t){var e=new Map,n=new Set,s=[];t.forEach(function(r){e.set(r.name,r)});function i(r){n.add(r.name);var o=[].concat(r.requires||[],r.requiresIfExists||[]);o.forEach(function(l){if(!n.has(l)){var c=e.get(l);c&&i(c)}}),s.push(r)}return t.forEach(function(r){n.has(r.name)||i(r)}),s}function t2(t){var e=e2(t);return lI.reduce(function(n,s){return n.concat(e.filter(function(i){return i.phase===s}))},[])}function n2(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function s2(t){var e=t.reduce(function(n,s){var i=n[s.name];return n[s.name]=i?Object.assign({},i,s,{options:Object.assign({},i.options,s.options),data:Object.assign({},i.data,s.data)}):s,n},{});return Object.keys(e).map(function(n){return e[n]})}var gE={placement:"bottom",modifiers:[],strategy:"absolute"};function _E(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function Hd(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,s=n===void 0?[]:n,i=e.defaultOptions,r=i===void 0?gE:i;return function(l,c,d){d===void 0&&(d=r);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},gE,r),modifiersData:{},elements:{reference:l,popper:c},attributes:{},styles:{}},p=[],_=!1,E={state:h,setOptions:function(j){var $=typeof j=="function"?j(h.options):j;D(),h.options=Object.assign({},r,h.options,$),h.scrollParents={reference:Vo(l)?pc(l):l.contextElement?pc(l.contextElement):[],popper:pc(c)};var U=t2(s2([].concat(s,h.options.modifiers)));return h.orderedModifiers=U.filter(function(B){return B.enabled}),C(),E.update()},forceUpdate:function(){if(!_){var j=h.elements,$=j.reference,U=j.popper;if(_E($,U)){h.rects={reference:ZM($,Jc(U),h.options.strategy==="fixed"),popper:Ig(U)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function(R){return h.modifiersData[R.name]=Object.assign({},R.data)});for(var B=0;B<h.orderedModifiers.length;B++){if(h.reset===!0){h.reset=!1,B=-1;continue}var se=h.orderedModifiers[B],re=se.fn,x=se.options,I=x===void 0?{}:x,T=se.name;typeof re=="function"&&(h=re({state:h,options:I,name:T,instance:E})||h)}}}},update:n2(function(){return new Promise(function(N){E.forceUpdate(),N(h)})}),destroy:function(){D(),_=!0}};if(!_E(l,c))return E;E.setOptions(d).then(function(N){!_&&d.onFirstUpdate&&d.onFirstUpdate(N)});function C(){h.orderedModifiers.forEach(function(N){var j=N.name,$=N.options,U=$===void 0?{}:$,B=N.effect;if(typeof B=="function"){var se=B({state:h,name:j,instance:E,options:U}),re=function(){};p.push(se||re)}})}function D(){p.forEach(function(N){return N()}),p=[]}return E}}var i2=Hd(),r2=[Rg,xg,Cg,Ag],o2=Hd({defaultModifiers:r2}),a2=[Rg,xg,Cg,Ag,yI,_I,EI,pI,vI],Dg=Hd({defaultModifiers:a2});const bI=Object.freeze(Object.defineProperty({__proto__:null,afterMain:iI,afterRead:tI,afterWrite:aI,applyStyles:Ag,arrow:pI,auto:jd,basePlacements:ll,beforeMain:nI,beforeRead:ZA,beforeWrite:rI,bottom:os,clippingParents:XA,computeStyles:Cg,createPopper:Dg,createPopperBase:i2,createPopperLite:o2,detectOverflow:Xa,end:Ka,eventListeners:Rg,flip:_I,hide:vI,left:Fn,main:sI,modifierPhases:lI,offset:yI,placements:wg,popper:wa,popperGenerator:Hd,popperOffsets:xg,preventOverflow:EI,read:eI,reference:JA,right:as,start:Lo,top:$n,variationPlacements:qp,viewport:bg,write:oI},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.6 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const lr=new Map,Uf={set(t,e,n){lr.has(t)||lr.set(t,new Map);const s=lr.get(t);if(!s.has(e)&&s.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(s.keys())[0]}.`);return}s.set(e,n)},get(t,e){return lr.has(t)&&lr.get(t).get(e)||null},remove(t,e){if(!lr.has(t))return;const n=lr.get(t);n.delete(e),n.size===0&&lr.delete(t)}},l2=1e6,c2=1e3,Kp="transitionend",wI=t=>(t&&window.CSS&&window.CSS.escape&&(t=t.replace(/#([^\s"#']+)/g,(e,n)=>`#${CSS.escape(n)}`)),t),u2=t=>t==null?`${t}`:Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase(),h2=t=>{do t+=Math.floor(Math.random()*l2);while(document.getElementById(t));return t},d2=t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:n}=window.getComputedStyle(t);const s=Number.parseFloat(e),i=Number.parseFloat(n);return!s&&!i?0:(e=e.split(",")[0],n=n.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(n))*c2)},TI=t=>{t.dispatchEvent(new Event(Kp))},Pi=t=>!t||typeof t!="object"?!1:(typeof t.jquery<"u"&&(t=t[0]),typeof t.nodeType<"u"),Nr=t=>Pi(t)?t.jquery?t[0]:t:typeof t=="string"&&t.length>0?document.querySelector(wI(t)):null,cl=t=>{if(!Pi(t)||t.getClientRects().length===0)return!1;const e=getComputedStyle(t).getPropertyValue("visibility")==="visible",n=t.closest("details:not([open])");if(!n)return e;if(n!==t){const s=t.closest("summary");if(s&&s.parentNode!==n||s===null)return!1}return e},Lr=t=>!t||t.nodeType!==Node.ELEMENT_NODE||t.classList.contains("disabled")?!0:typeof t.disabled<"u"?t.disabled:t.hasAttribute("disabled")&&t.getAttribute("disabled")!=="false",AI=t=>{if(!document.documentElement.attachShadow)return null;if(typeof t.getRootNode=="function"){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?AI(t.parentNode):null},Qh=()=>{},Zc=t=>{t.offsetHeight},II=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,jf=[],f2=t=>{document.readyState==="loading"?(jf.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of jf)e()}),jf.push(t)):t()},Ts=()=>document.documentElement.dir==="rtl",Is=t=>{f2(()=>{const e=II();if(e){const n=t.NAME,s=e.fn[n];e.fn[n]=t.jQueryInterface,e.fn[n].Constructor=t,e.fn[n].noConflict=()=>(e.fn[n]=s,t.jQueryInterface)}})},Gn=(t,e=[],n=t)=>typeof t=="function"?t.call(...e):n,SI=(t,e,n=!0)=>{if(!n){Gn(t);return}const i=d2(e)+5;let r=!1;const o=({target:l})=>{l===e&&(r=!0,e.removeEventListener(Kp,o),Gn(t))};e.addEventListener(Kp,o),setTimeout(()=>{r||TI(e)},i)},Ng=(t,e,n,s)=>{const i=t.length;let r=t.indexOf(e);return r===-1?!n&&s?t[i-1]:t[0]:(r+=n?1:-1,s&&(r=(r+i)%i),t[Math.max(0,Math.min(r,i-1))])},p2=/[^.]*(?=\..*)\.|.*/,m2=/\..*/,g2=/::\d+$/,Bf={};let vE=1;const CI={mouseenter:"mouseover",mouseleave:"mouseout"},_2=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function RI(t,e){return e&&`${e}::${vE++}`||t.uidEvent||vE++}function PI(t){const e=RI(t);return t.uidEvent=e,Bf[e]=Bf[e]||{},Bf[e]}function v2(t,e){return function n(s){return Lg(s,{delegateTarget:t}),n.oneOff&&ie.off(t,s.type,e),e.apply(t,[s])}}function y2(t,e,n){return function s(i){const r=t.querySelectorAll(e);for(let{target:o}=i;o&&o!==this;o=o.parentNode)for(const l of r)if(l===o)return Lg(i,{delegateTarget:o}),s.oneOff&&ie.off(t,i.type,e,n),n.apply(o,[i])}}function OI(t,e,n=null){return Object.values(t).find(s=>s.callable===e&&s.delegationSelector===n)}function kI(t,e,n){const s=typeof e=="string",i=s?n:e||n;let r=xI(t);return _2.has(r)||(r=t),[s,i,r]}function yE(t,e,n,s,i){if(typeof e!="string"||!t)return;let[r,o,l]=kI(e,n,s);e in CI&&(o=(C=>function(D){if(!D.relatedTarget||D.relatedTarget!==D.delegateTarget&&!D.delegateTarget.contains(D.relatedTarget))return C.call(this,D)})(o));const c=PI(t),d=c[l]||(c[l]={}),h=OI(d,o,r?n:null);if(h){h.oneOff=h.oneOff&&i;return}const p=RI(o,e.replace(p2,"")),_=r?y2(t,n,o):v2(t,o);_.delegationSelector=r?n:null,_.callable=o,_.oneOff=i,_.uidEvent=p,d[p]=_,t.addEventListener(l,_,r)}function Gp(t,e,n,s,i){const r=OI(e[n],s,i);r&&(t.removeEventListener(n,r,!!i),delete e[n][r.uidEvent])}function E2(t,e,n,s){const i=e[n]||{};for(const[r,o]of Object.entries(i))r.includes(s)&&Gp(t,e,n,o.callable,o.delegationSelector)}function xI(t){return t=t.replace(m2,""),CI[t]||t}const ie={on(t,e,n,s){yE(t,e,n,s,!1)},one(t,e,n,s){yE(t,e,n,s,!0)},off(t,e,n,s){if(typeof e!="string"||!t)return;const[i,r,o]=kI(e,n,s),l=o!==e,c=PI(t),d=c[o]||{},h=e.startsWith(".");if(typeof r<"u"){if(!Object.keys(d).length)return;Gp(t,c,o,r,i?n:null);return}if(h)for(const p of Object.keys(c))E2(t,c,p,e.slice(1));for(const[p,_]of Object.entries(d)){const E=p.replace(g2,"");(!l||e.includes(E))&&Gp(t,c,o,_.callable,_.delegationSelector)}},trigger(t,e,n){if(typeof e!="string"||!t)return null;const s=II(),i=xI(e),r=e!==i;let o=null,l=!0,c=!0,d=!1;r&&s&&(o=s.Event(e,n),s(t).trigger(o),l=!o.isPropagationStopped(),c=!o.isImmediatePropagationStopped(),d=o.isDefaultPrevented());const h=Lg(new Event(e,{bubbles:l,cancelable:!0}),n);return d&&h.preventDefault(),c&&t.dispatchEvent(h),h.defaultPrevented&&o&&o.preventDefault(),h}};function Lg(t,e={}){for(const[n,s]of Object.entries(e))try{t[n]=s}catch{Object.defineProperty(t,n,{configurable:!0,get(){return s}})}return t}function EE(t){if(t==="true")return!0;if(t==="false")return!1;if(t===Number(t).toString())return Number(t);if(t===""||t==="null")return null;if(typeof t!="string")return t;try{return JSON.parse(decodeURIComponent(t))}catch{return t}}function Hf(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const Oi={setDataAttribute(t,e,n){t.setAttribute(`data-bs-${Hf(e)}`,n)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${Hf(e)}`)},getDataAttributes(t){if(!t)return{};const e={},n=Object.keys(t.dataset).filter(s=>s.startsWith("bs")&&!s.startsWith("bsConfig"));for(const s of n){let i=s.replace(/^bs/,"");i=i.charAt(0).toLowerCase()+i.slice(1),e[i]=EE(t.dataset[s])}return e},getDataAttribute(t,e){return EE(t.getAttribute(`data-bs-${Hf(e)}`))}};class eu{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,n){const s=Pi(n)?Oi.getDataAttribute(n,"config"):{};return{...this.constructor.Default,...typeof s=="object"?s:{},...Pi(n)?Oi.getDataAttributes(n):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,n=this.constructor.DefaultType){for(const[s,i]of Object.entries(n)){const r=e[s],o=Pi(r)?"element":u2(r);if(!new RegExp(i).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${s}" provided type "${o}" but expected type "${i}".`)}}}const b2="5.3.6";class Ms extends eu{constructor(e,n){super(),e=Nr(e),e&&(this._element=e,this._config=this._getConfig(n),Uf.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Uf.remove(this._element,this.constructor.DATA_KEY),ie.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,n,s=!0){SI(e,n,s)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return Uf.get(Nr(e),this.DATA_KEY)}static getOrCreateInstance(e,n={}){return this.getInstance(e)||new this(e,typeof n=="object"?n:null)}static get VERSION(){return b2}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const qf=t=>{let e=t.getAttribute("data-bs-target");if(!e||e==="#"){let n=t.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),e=n&&n!=="#"?n.trim():null}return e?e.split(",").map(n=>wI(n)).join(","):null},Re={find(t,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,t))},findOne(t,e=document.documentElement){return Element.prototype.querySelector.call(e,t)},children(t,e){return[].concat(...t.children).filter(n=>n.matches(e))},parents(t,e){const n=[];let s=t.parentNode.closest(e);for(;s;)n.push(s),s=s.parentNode.closest(e);return n},prev(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return[n];n=n.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(n=>`${n}:not([tabindex^="-"])`).join(",");return this.find(e,t).filter(n=>!Lr(n)&&cl(n))},getSelectorFromElement(t){const e=qf(t);return e&&Re.findOne(e)?e:null},getElementFromSelector(t){const e=qf(t);return e?Re.findOne(e):null},getMultipleElementsFromSelector(t){const e=qf(t);return e?Re.find(e):[]}},qd=(t,e="hide")=>{const n=`click.dismiss${t.EVENT_KEY}`,s=t.NAME;ie.on(document,n,`[data-bs-dismiss="${s}"]`,function(i){if(["A","AREA"].includes(this.tagName)&&i.preventDefault(),Lr(this))return;const r=Re.getElementFromSelector(this)||this.closest(`.${s}`);t.getOrCreateInstance(r)[e]()})},w2="alert",T2="bs.alert",DI=`.${T2}`,A2=`close${DI}`,I2=`closed${DI}`,S2="fade",C2="show";class Wd extends Ms{static get NAME(){return w2}close(){if(ie.trigger(this._element,A2).defaultPrevented)return;this._element.classList.remove(C2);const n=this._element.classList.contains(S2);this._queueCallback(()=>this._destroyElement(),this._element,n)}_destroyElement(){this._element.remove(),ie.trigger(this._element,I2),this.dispose()}static jQueryInterface(e){return this.each(function(){const n=Wd.getOrCreateInstance(this);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}qd(Wd,"close");Is(Wd);const R2="button",P2="bs.button",O2=`.${P2}`,k2=".data-api",x2="active",bE='[data-bs-toggle="button"]',D2=`click${O2}${k2}`;class zd extends Ms{static get NAME(){return R2}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(x2))}static jQueryInterface(e){return this.each(function(){const n=zd.getOrCreateInstance(this);e==="toggle"&&n[e]()})}}ie.on(document,D2,bE,t=>{t.preventDefault();const e=t.target.closest(bE);zd.getOrCreateInstance(e).toggle()});Is(zd);const N2="swipe",ul=".bs.swipe",L2=`touchstart${ul}`,V2=`touchmove${ul}`,M2=`touchend${ul}`,$2=`pointerdown${ul}`,F2=`pointerup${ul}`,U2="touch",j2="pen",B2="pointer-event",H2=40,q2={endCallback:null,leftCallback:null,rightCallback:null},W2={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Yh extends eu{constructor(e,n){super(),this._element=e,!(!e||!Yh.isSupported())&&(this._config=this._getConfig(n),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return q2}static get DefaultType(){return W2}static get NAME(){return N2}dispose(){ie.off(this._element,ul)}_start(e){if(!this._supportPointerEvents){this._deltaX=e.touches[0].clientX;return}this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX)}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),Gn(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=H2)return;const n=e/this._deltaX;this._deltaX=0,n&&Gn(n>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(ie.on(this._element,$2,e=>this._start(e)),ie.on(this._element,F2,e=>this._end(e)),this._element.classList.add(B2)):(ie.on(this._element,L2,e=>this._start(e)),ie.on(this._element,V2,e=>this._move(e)),ie.on(this._element,M2,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType===j2||e.pointerType===U2)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const z2="carousel",K2="bs.carousel",Hr=`.${K2}`,NI=".data-api",G2="ArrowLeft",Q2="ArrowRight",Y2=500,Hl="next",pa="prev",Ta="left",fh="right",X2=`slide${Hr}`,Wf=`slid${Hr}`,J2=`keydown${Hr}`,Z2=`mouseenter${Hr}`,e$=`mouseleave${Hr}`,t$=`dragstart${Hr}`,n$=`load${Hr}${NI}`,s$=`click${Hr}${NI}`,LI="carousel",qu="active",i$="slide",r$="carousel-item-end",o$="carousel-item-start",a$="carousel-item-next",l$="carousel-item-prev",VI=".active",MI=".carousel-item",c$=VI+MI,u$=".carousel-item img",h$=".carousel-indicators",d$="[data-bs-slide], [data-bs-slide-to]",f$='[data-bs-ride="carousel"]',p$={[G2]:fh,[Q2]:Ta},m$={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},g$={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class tu extends Ms{constructor(e,n){super(e,n),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Re.findOne(h$,this._element),this._addEventListeners(),this._config.ride===LI&&this.cycle()}static get Default(){return m$}static get DefaultType(){return g$}static get NAME(){return z2}next(){this._slide(Hl)}nextWhenVisible(){!document.hidden&&cl(this._element)&&this.next()}prev(){this._slide(pa)}pause(){this._isSliding&&TI(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){ie.one(this._element,Wf,()=>this.cycle());return}this.cycle()}}to(e){const n=this._getItems();if(e>n.length-1||e<0)return;if(this._isSliding){ie.one(this._element,Wf,()=>this.to(e));return}const s=this._getItemIndex(this._getActive());if(s===e)return;const i=e>s?Hl:pa;this._slide(i,n[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&ie.on(this._element,J2,e=>this._keydown(e)),this._config.pause==="hover"&&(ie.on(this._element,Z2,()=>this.pause()),ie.on(this._element,e$,()=>this._maybeEnableCycle())),this._config.touch&&Yh.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const s of Re.find(u$,this._element))ie.on(s,t$,i=>i.preventDefault());const n={leftCallback:()=>this._slide(this._directionToOrder(Ta)),rightCallback:()=>this._slide(this._directionToOrder(fh)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),Y2+this._config.interval))}};this._swipeHelper=new Yh(this._element,n)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const n=p$[e.key];n&&(e.preventDefault(),this._slide(this._directionToOrder(n)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const n=Re.findOne(VI,this._indicatorsElement);n.classList.remove(qu),n.removeAttribute("aria-current");const s=Re.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);s&&(s.classList.add(qu),s.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const n=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=n||this._config.defaultInterval}_slide(e,n=null){if(this._isSliding)return;const s=this._getActive(),i=e===Hl,r=n||Ng(this._getItems(),s,i,this._config.wrap);if(r===s)return;const o=this._getItemIndex(r),l=E=>ie.trigger(this._element,E,{relatedTarget:r,direction:this._orderToDirection(e),from:this._getItemIndex(s),to:o});if(l(X2).defaultPrevented||!s||!r)return;const d=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=r;const h=i?o$:r$,p=i?a$:l$;r.classList.add(p),Zc(r),s.classList.add(h),r.classList.add(h);const _=()=>{r.classList.remove(h,p),r.classList.add(qu),s.classList.remove(qu,p,h),this._isSliding=!1,l(Wf)};this._queueCallback(_,s,this._isAnimated()),d&&this.cycle()}_isAnimated(){return this._element.classList.contains(i$)}_getActive(){return Re.findOne(c$,this._element)}_getItems(){return Re.find(MI,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return Ts()?e===Ta?pa:Hl:e===Ta?Hl:pa}_orderToDirection(e){return Ts()?e===pa?Ta:fh:e===pa?fh:Ta}static jQueryInterface(e){return this.each(function(){const n=tu.getOrCreateInstance(this,e);if(typeof e=="number"){n.to(e);return}if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}ie.on(document,s$,d$,function(t){const e=Re.getElementFromSelector(this);if(!e||!e.classList.contains(LI))return;t.preventDefault();const n=tu.getOrCreateInstance(e),s=this.getAttribute("data-bs-slide-to");if(s){n.to(s),n._maybeEnableCycle();return}if(Oi.getDataAttribute(this,"slide")==="next"){n.next(),n._maybeEnableCycle();return}n.prev(),n._maybeEnableCycle()});ie.on(window,n$,()=>{const t=Re.find(f$);for(const e of t)tu.getOrCreateInstance(e)});Is(tu);const _$="collapse",v$="bs.collapse",nu=`.${v$}`,y$=".data-api",E$=`show${nu}`,b$=`shown${nu}`,w$=`hide${nu}`,T$=`hidden${nu}`,A$=`click${nu}${y$}`,zf="show",Ia="collapse",Wu="collapsing",I$="collapsed",S$=`:scope .${Ia} .${Ia}`,C$="collapse-horizontal",R$="width",P$="height",O$=".collapse.show, .collapse.collapsing",Qp='[data-bs-toggle="collapse"]',k$={parent:null,toggle:!0},x$={parent:"(null|element)",toggle:"boolean"};class xc extends Ms{constructor(e,n){super(e,n),this._isTransitioning=!1,this._triggerArray=[];const s=Re.find(Qp);for(const i of s){const r=Re.getSelectorFromElement(i),o=Re.find(r).filter(l=>l===this._element);r!==null&&o.length&&this._triggerArray.push(i)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return k$}static get DefaultType(){return x$}static get NAME(){return _$}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(O$).filter(l=>l!==this._element).map(l=>xc.getOrCreateInstance(l,{toggle:!1}))),e.length&&e[0]._isTransitioning||ie.trigger(this._element,E$).defaultPrevented)return;for(const l of e)l.hide();const s=this._getDimension();this._element.classList.remove(Ia),this._element.classList.add(Wu),this._element.style[s]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const i=()=>{this._isTransitioning=!1,this._element.classList.remove(Wu),this._element.classList.add(Ia,zf),this._element.style[s]="",ie.trigger(this._element,b$)},o=`scroll${s[0].toUpperCase()+s.slice(1)}`;this._queueCallback(i,this._element,!0),this._element.style[s]=`${this._element[o]}px`}hide(){if(this._isTransitioning||!this._isShown()||ie.trigger(this._element,w$).defaultPrevented)return;const n=this._getDimension();this._element.style[n]=`${this._element.getBoundingClientRect()[n]}px`,Zc(this._element),this._element.classList.add(Wu),this._element.classList.remove(Ia,zf);for(const i of this._triggerArray){const r=Re.getElementFromSelector(i);r&&!this._isShown(r)&&this._addAriaAndCollapsedClass([i],!1)}this._isTransitioning=!0;const s=()=>{this._isTransitioning=!1,this._element.classList.remove(Wu),this._element.classList.add(Ia),ie.trigger(this._element,T$)};this._element.style[n]="",this._queueCallback(s,this._element,!0)}_isShown(e=this._element){return e.classList.contains(zf)}_configAfterMerge(e){return e.toggle=!!e.toggle,e.parent=Nr(e.parent),e}_getDimension(){return this._element.classList.contains(C$)?R$:P$}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(Qp);for(const n of e){const s=Re.getElementFromSelector(n);s&&this._addAriaAndCollapsedClass([n],this._isShown(s))}}_getFirstLevelChildren(e){const n=Re.find(S$,this._config.parent);return Re.find(e,this._config.parent).filter(s=>!n.includes(s))}_addAriaAndCollapsedClass(e,n){if(e.length)for(const s of e)s.classList.toggle(I$,!n),s.setAttribute("aria-expanded",n)}static jQueryInterface(e){const n={};return typeof e=="string"&&/show|hide/.test(e)&&(n.toggle=!1),this.each(function(){const s=xc.getOrCreateInstance(this,n);if(typeof e=="string"){if(typeof s[e]>"u")throw new TypeError(`No method named "${e}"`);s[e]()}})}}ie.on(document,A$,Qp,function(t){(t.target.tagName==="A"||t.delegateTarget&&t.delegateTarget.tagName==="A")&&t.preventDefault();for(const e of Re.getMultipleElementsFromSelector(this))xc.getOrCreateInstance(e,{toggle:!1}).toggle()});Is(xc);const wE="dropdown",D$="bs.dropdown",qo=`.${D$}`,Vg=".data-api",N$="Escape",TE="Tab",L$="ArrowUp",AE="ArrowDown",V$=2,M$=`hide${qo}`,$$=`hidden${qo}`,F$=`show${qo}`,U$=`shown${qo}`,$I=`click${qo}${Vg}`,FI=`keydown${qo}${Vg}`,j$=`keyup${qo}${Vg}`,Aa="show",B$="dropup",H$="dropend",q$="dropstart",W$="dropup-center",z$="dropdown-center",bo='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',K$=`${bo}.${Aa}`,ph=".dropdown-menu",G$=".navbar",Q$=".navbar-nav",Y$=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",X$=Ts()?"top-end":"top-start",J$=Ts()?"top-start":"top-end",Z$=Ts()?"bottom-end":"bottom-start",e4=Ts()?"bottom-start":"bottom-end",t4=Ts()?"left-start":"right-start",n4=Ts()?"right-start":"left-start",s4="top",i4="bottom",r4={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},o4={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Ds extends Ms{constructor(e,n){super(e,n),this._popper=null,this._parent=this._element.parentNode,this._menu=Re.next(this._element,ph)[0]||Re.prev(this._element,ph)[0]||Re.findOne(ph,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return r4}static get DefaultType(){return o4}static get NAME(){return wE}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Lr(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!ie.trigger(this._element,F$,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(Q$))for(const s of[].concat(...document.body.children))ie.on(s,"mouseover",Qh);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Aa),this._element.classList.add(Aa),ie.trigger(this._element,U$,e)}}hide(){if(Lr(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!ie.trigger(this._element,M$,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const s of[].concat(...document.body.children))ie.off(s,"mouseover",Qh);this._popper&&this._popper.destroy(),this._menu.classList.remove(Aa),this._element.classList.remove(Aa),this._element.setAttribute("aria-expanded","false"),Oi.removeDataAttribute(this._menu,"popper"),ie.trigger(this._element,$$,e),this._element.focus()}}_getConfig(e){if(e=super._getConfig(e),typeof e.reference=="object"&&!Pi(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${wE.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof bI>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let e=this._element;this._config.reference==="parent"?e=this._parent:Pi(this._config.reference)?e=Nr(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const n=this._getPopperConfig();this._popper=Dg(e,this._menu,n)}_isShown(){return this._menu.classList.contains(Aa)}_getPlacement(){const e=this._parent;if(e.classList.contains(H$))return t4;if(e.classList.contains(q$))return n4;if(e.classList.contains(W$))return s4;if(e.classList.contains(z$))return i4;const n=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains(B$)?n?J$:X$:n?e4:Z$}_detectNavbar(){return this._element.closest(G$)!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(n=>Number.parseInt(n,10)):typeof e=="function"?n=>e(n,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Oi.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...Gn(this._config.popperConfig,[void 0,e])}}_selectMenuItem({key:e,target:n}){const s=Re.find(Y$,this._menu).filter(i=>cl(i));s.length&&Ng(s,n,e===AE,!s.includes(n)).focus()}static jQueryInterface(e){return this.each(function(){const n=Ds.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}static clearMenus(e){if(e.button===V$||e.type==="keyup"&&e.key!==TE)return;const n=Re.find(K$);for(const s of n){const i=Ds.getInstance(s);if(!i||i._config.autoClose===!1)continue;const r=e.composedPath(),o=r.includes(i._menu);if(r.includes(i._element)||i._config.autoClose==="inside"&&!o||i._config.autoClose==="outside"&&o||i._menu.contains(e.target)&&(e.type==="keyup"&&e.key===TE||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const l={relatedTarget:i._element};e.type==="click"&&(l.clickEvent=e),i._completeHide(l)}}static dataApiKeydownHandler(e){const n=/input|textarea/i.test(e.target.tagName),s=e.key===N$,i=[L$,AE].includes(e.key);if(!i&&!s||n&&!s)return;e.preventDefault();const r=this.matches(bo)?this:Re.prev(this,bo)[0]||Re.next(this,bo)[0]||Re.findOne(bo,e.delegateTarget.parentNode),o=Ds.getOrCreateInstance(r);if(i){e.stopPropagation(),o.show(),o._selectMenuItem(e);return}o._isShown()&&(e.stopPropagation(),o.hide(),r.focus())}}ie.on(document,FI,bo,Ds.dataApiKeydownHandler);ie.on(document,FI,ph,Ds.dataApiKeydownHandler);ie.on(document,$I,Ds.clearMenus);ie.on(document,j$,Ds.clearMenus);ie.on(document,$I,bo,function(t){t.preventDefault(),Ds.getOrCreateInstance(this).toggle()});Is(Ds);const UI="backdrop",a4="fade",IE="show",SE=`mousedown.bs.${UI}`,l4={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},c4={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class jI extends eu{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return l4}static get DefaultType(){return c4}static get NAME(){return UI}show(e){if(!this._config.isVisible){Gn(e);return}this._append();const n=this._getElement();this._config.isAnimated&&Zc(n),n.classList.add(IE),this._emulateAnimation(()=>{Gn(e)})}hide(e){if(!this._config.isVisible){Gn(e);return}this._getElement().classList.remove(IE),this._emulateAnimation(()=>{this.dispose(),Gn(e)})}dispose(){this._isAppended&&(ie.off(this._element,SE),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(a4),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=Nr(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),ie.on(e,SE,()=>{Gn(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){SI(e,this._getElement(),this._config.isAnimated)}}const u4="focustrap",h4="bs.focustrap",Xh=`.${h4}`,d4=`focusin${Xh}`,f4=`keydown.tab${Xh}`,p4="Tab",m4="forward",CE="backward",g4={autofocus:!0,trapElement:null},_4={autofocus:"boolean",trapElement:"element"};class BI extends eu{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return g4}static get DefaultType(){return _4}static get NAME(){return u4}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),ie.off(document,Xh),ie.on(document,d4,e=>this._handleFocusin(e)),ie.on(document,f4,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,ie.off(document,Xh))}_handleFocusin(e){const{trapElement:n}=this._config;if(e.target===document||e.target===n||n.contains(e.target))return;const s=Re.focusableChildren(n);s.length===0?n.focus():this._lastTabNavDirection===CE?s[s.length-1].focus():s[0].focus()}_handleKeydown(e){e.key===p4&&(this._lastTabNavDirection=e.shiftKey?CE:m4)}}const RE=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",PE=".sticky-top",zu="padding-right",OE="margin-right";class Yp{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,zu,n=>n+e),this._setElementAttributes(RE,zu,n=>n+e),this._setElementAttributes(PE,OE,n=>n-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,zu),this._resetElementAttributes(RE,zu),this._resetElementAttributes(PE,OE)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,n,s){const i=this.getWidth(),r=o=>{if(o!==this._element&&window.innerWidth>o.clientWidth+i)return;this._saveInitialAttribute(o,n);const l=window.getComputedStyle(o).getPropertyValue(n);o.style.setProperty(n,`${s(Number.parseFloat(l))}px`)};this._applyManipulationCallback(e,r)}_saveInitialAttribute(e,n){const s=e.style.getPropertyValue(n);s&&Oi.setDataAttribute(e,n,s)}_resetElementAttributes(e,n){const s=i=>{const r=Oi.getDataAttribute(i,n);if(r===null){i.style.removeProperty(n);return}Oi.removeDataAttribute(i,n),i.style.setProperty(n,r)};this._applyManipulationCallback(e,s)}_applyManipulationCallback(e,n){if(Pi(e)){n(e);return}for(const s of Re.find(e,this._element))n(s)}}const v4="modal",y4="bs.modal",As=`.${y4}`,E4=".data-api",b4="Escape",w4=`hide${As}`,T4=`hidePrevented${As}`,HI=`hidden${As}`,qI=`show${As}`,A4=`shown${As}`,I4=`resize${As}`,S4=`click.dismiss${As}`,C4=`mousedown.dismiss${As}`,R4=`keydown.dismiss${As}`,P4=`click${As}${E4}`,kE="modal-open",O4="fade",xE="show",Kf="modal-static",k4=".modal.show",x4=".modal-dialog",D4=".modal-body",N4='[data-bs-toggle="modal"]',L4={backdrop:!0,focus:!0,keyboard:!0},V4={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Mo extends Ms{constructor(e,n){super(e,n),this._dialog=Re.findOne(x4,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Yp,this._addEventListeners()}static get Default(){return L4}static get DefaultType(){return V4}static get NAME(){return v4}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||ie.trigger(this._element,qI,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(kE),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||ie.trigger(this._element,w4).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(xE),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){ie.off(window,As),ie.off(this._dialog,As),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new jI({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new BI({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const n=Re.findOne(D4,this._dialog);n&&(n.scrollTop=0),Zc(this._element),this._element.classList.add(xE);const s=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,ie.trigger(this._element,A4,{relatedTarget:e})};this._queueCallback(s,this._dialog,this._isAnimated())}_addEventListeners(){ie.on(this._element,R4,e=>{if(e.key===b4){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),ie.on(window,I4,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),ie.on(this._element,C4,e=>{ie.one(this._element,S4,n=>{if(!(this._element!==e.target||this._element!==n.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(kE),this._resetAdjustments(),this._scrollBar.reset(),ie.trigger(this._element,HI)})}_isAnimated(){return this._element.classList.contains(O4)}_triggerBackdropTransition(){if(ie.trigger(this._element,T4).defaultPrevented)return;const n=this._element.scrollHeight>document.documentElement.clientHeight,s=this._element.style.overflowY;s==="hidden"||this._element.classList.contains(Kf)||(n||(this._element.style.overflowY="hidden"),this._element.classList.add(Kf),this._queueCallback(()=>{this._element.classList.remove(Kf),this._queueCallback(()=>{this._element.style.overflowY=s},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,n=this._scrollBar.getWidth(),s=n>0;if(s&&!e){const i=Ts()?"paddingLeft":"paddingRight";this._element.style[i]=`${n}px`}if(!s&&e){const i=Ts()?"paddingRight":"paddingLeft";this._element.style[i]=`${n}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,n){return this.each(function(){const s=Mo.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof s[e]>"u")throw new TypeError(`No method named "${e}"`);s[e](n)}})}}ie.on(document,P4,N4,function(t){const e=Re.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),ie.one(e,qI,i=>{i.defaultPrevented||ie.one(e,HI,()=>{cl(this)&&this.focus()})});const n=Re.findOne(k4);n&&Mo.getInstance(n).hide(),Mo.getOrCreateInstance(e).toggle(this)});qd(Mo);Is(Mo);const M4="offcanvas",$4="bs.offcanvas",Wi=`.${$4}`,WI=".data-api",F4=`load${Wi}${WI}`,U4="Escape",DE="show",NE="showing",LE="hiding",j4="offcanvas-backdrop",zI=".offcanvas.show",B4=`show${Wi}`,H4=`shown${Wi}`,q4=`hide${Wi}`,VE=`hidePrevented${Wi}`,KI=`hidden${Wi}`,W4=`resize${Wi}`,z4=`click${Wi}${WI}`,K4=`keydown.dismiss${Wi}`,G4='[data-bs-toggle="offcanvas"]',Q4={backdrop:!0,keyboard:!0,scroll:!1},Y4={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Vr extends Ms{constructor(e,n){super(e,n),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Q4}static get DefaultType(){return Y4}static get NAME(){return M4}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||ie.trigger(this._element,B4,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new Yp().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(NE);const s=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(DE),this._element.classList.remove(NE),ie.trigger(this._element,H4,{relatedTarget:e})};this._queueCallback(s,this._element,!0)}hide(){if(!this._isShown||ie.trigger(this._element,q4).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(LE),this._backdrop.hide();const n=()=>{this._element.classList.remove(DE,LE),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Yp().reset(),ie.trigger(this._element,KI)};this._queueCallback(n,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=()=>{if(this._config.backdrop==="static"){ie.trigger(this._element,VE);return}this.hide()},n=!!this._config.backdrop;return new jI({className:j4,isVisible:n,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:n?e:null})}_initializeFocusTrap(){return new BI({trapElement:this._element})}_addEventListeners(){ie.on(this._element,K4,e=>{if(e.key===U4){if(this._config.keyboard){this.hide();return}ie.trigger(this._element,VE)}})}static jQueryInterface(e){return this.each(function(){const n=Vr.getOrCreateInstance(this,e);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}ie.on(document,z4,G4,function(t){const e=Re.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),Lr(this))return;ie.one(e,KI,()=>{cl(this)&&this.focus()});const n=Re.findOne(zI);n&&n!==e&&Vr.getInstance(n).hide(),Vr.getOrCreateInstance(e).toggle(this)});ie.on(window,F4,()=>{for(const t of Re.find(zI))Vr.getOrCreateInstance(t).show()});ie.on(window,W4,()=>{for(const t of Re.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(t).position!=="fixed"&&Vr.getOrCreateInstance(t).hide()});qd(Vr);Is(Vr);const X4=/^aria-[\w-]*$/i,GI={"*":["class","dir","id","lang","role",X4],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},J4=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Z4=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,eF=(t,e)=>{const n=t.nodeName.toLowerCase();return e.includes(n)?J4.has(n)?!!Z4.test(t.nodeValue):!0:e.filter(s=>s instanceof RegExp).some(s=>s.test(n))};function tF(t,e,n){if(!t.length)return t;if(n&&typeof n=="function")return n(t);const i=new window.DOMParser().parseFromString(t,"text/html"),r=[].concat(...i.body.querySelectorAll("*"));for(const o of r){const l=o.nodeName.toLowerCase();if(!Object.keys(e).includes(l)){o.remove();continue}const c=[].concat(...o.attributes),d=[].concat(e["*"]||[],e[l]||[]);for(const h of c)eF(h,d)||o.removeAttribute(h.nodeName)}return i.body.innerHTML}const nF="TemplateFactory",sF={allowList:GI,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},iF={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},rF={entry:"(string|element|function|null)",selector:"(string|element)"};class oF extends eu{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return sF}static get DefaultType(){return iF}static get NAME(){return nF}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[i,r]of Object.entries(this._config.content))this._setContent(e,r,i);const n=e.children[0],s=this._resolvePossibleFunction(this._config.extraClass);return s&&n.classList.add(...s.split(" ")),n}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[n,s]of Object.entries(e))super._typeCheckConfig({selector:n,entry:s},rF)}_setContent(e,n,s){const i=Re.findOne(s,e);if(i){if(n=this._resolvePossibleFunction(n),!n){i.remove();return}if(Pi(n)){this._putElementInTemplate(Nr(n),i);return}if(this._config.html){i.innerHTML=this._maybeSanitize(n);return}i.textContent=n}}_maybeSanitize(e){return this._config.sanitize?tF(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return Gn(e,[void 0,this])}_putElementInTemplate(e,n){if(this._config.html){n.innerHTML="",n.append(e);return}n.textContent=e.textContent}}const aF="tooltip",lF=new Set(["sanitize","allowList","sanitizeFn"]),Gf="fade",cF="modal",Ku="show",uF=".tooltip-inner",ME=`.${cF}`,$E="hide.bs.modal",ql="hover",Qf="focus",hF="click",dF="manual",fF="hide",pF="hidden",mF="show",gF="shown",_F="inserted",vF="click",yF="focusin",EF="focusout",bF="mouseenter",wF="mouseleave",TF={AUTO:"auto",TOP:"top",RIGHT:Ts()?"left":"right",BOTTOM:"bottom",LEFT:Ts()?"right":"left"},AF={allowList:GI,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},IF={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class hl extends Ms{constructor(e,n){if(typeof bI>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(e,n),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return AF}static get DefaultType(){return IF}static get NAME(){return aF}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),ie.off(this._element.closest(ME),$E,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const e=ie.trigger(this._element,this.constructor.eventName(mF)),s=(AI(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!s)return;this._disposePopper();const i=this._getTipElement();this._element.setAttribute("aria-describedby",i.getAttribute("id"));const{container:r}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(r.append(i),ie.trigger(this._element,this.constructor.eventName(_F))),this._popper=this._createPopper(i),i.classList.add(Ku),"ontouchstart"in document.documentElement)for(const l of[].concat(...document.body.children))ie.on(l,"mouseover",Qh);const o=()=>{ie.trigger(this._element,this.constructor.eventName(gF)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(o,this.tip,this._isAnimated())}hide(){if(!this._isShown()||ie.trigger(this._element,this.constructor.eventName(fF)).defaultPrevented)return;if(this._getTipElement().classList.remove(Ku),"ontouchstart"in document.documentElement)for(const i of[].concat(...document.body.children))ie.off(i,"mouseover",Qh);this._activeTrigger[hF]=!1,this._activeTrigger[Qf]=!1,this._activeTrigger[ql]=!1,this._isHovered=null;const s=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),ie.trigger(this._element,this.constructor.eventName(pF)))};this._queueCallback(s,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const n=this._getTemplateFactory(e).toHtml();if(!n)return null;n.classList.remove(Gf,Ku),n.classList.add(`bs-${this.constructor.NAME}-auto`);const s=h2(this.constructor.NAME).toString();return n.setAttribute("id",s),this._isAnimated()&&n.classList.add(Gf),n}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new oF({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[uF]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Gf)}_isShown(){return this.tip&&this.tip.classList.contains(Ku)}_createPopper(e){const n=Gn(this._config.placement,[this,e,this._element]),s=TF[n.toUpperCase()];return Dg(this._element,e,this._getPopperConfig(s))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(n=>Number.parseInt(n,10)):typeof e=="function"?n=>e(n,this._element):e}_resolvePossibleFunction(e){return Gn(e,[this._element,this._element])}_getPopperConfig(e){const n={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:s=>{this._getTipElement().setAttribute("data-popper-placement",s.state.placement)}}]};return{...n,...Gn(this._config.popperConfig,[void 0,n])}}_setListeners(){const e=this._config.trigger.split(" ");for(const n of e)if(n==="click")ie.on(this._element,this.constructor.eventName(vF),this._config.selector,s=>{this._initializeOnDelegatedTarget(s).toggle()});else if(n!==dF){const s=n===ql?this.constructor.eventName(bF):this.constructor.eventName(yF),i=n===ql?this.constructor.eventName(wF):this.constructor.eventName(EF);ie.on(this._element,s,this._config.selector,r=>{const o=this._initializeOnDelegatedTarget(r);o._activeTrigger[r.type==="focusin"?Qf:ql]=!0,o._enter()}),ie.on(this._element,i,this._config.selector,r=>{const o=this._initializeOnDelegatedTarget(r);o._activeTrigger[r.type==="focusout"?Qf:ql]=o._element.contains(r.relatedTarget),o._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},ie.on(this._element.closest(ME),$E,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,n){clearTimeout(this._timeout),this._timeout=setTimeout(e,n)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const n=Oi.getDataAttributes(this._element);for(const s of Object.keys(n))lF.has(s)&&delete n[s];return e={...n,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:Nr(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[n,s]of Object.entries(this._config))this.constructor.Default[n]!==s&&(e[n]=s);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const n=hl.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}}Is(hl);const SF="popover",CF=".popover-header",RF=".popover-body",PF={...hl.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},OF={...hl.DefaultType,content:"(null|string|element|function)"};class Mg extends hl{static get Default(){return PF}static get DefaultType(){return OF}static get NAME(){return SF}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[CF]:this._getTitle(),[RF]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const n=Mg.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}}Is(Mg);const kF="scrollspy",xF="bs.scrollspy",$g=`.${xF}`,DF=".data-api",NF=`activate${$g}`,FE=`click${$g}`,LF=`load${$g}${DF}`,VF="dropdown-item",ma="active",MF='[data-bs-spy="scroll"]',Yf="[href]",$F=".nav, .list-group",UE=".nav-link",FF=".nav-item",UF=".list-group-item",jF=`${UE}, ${FF} > ${UE}, ${UF}`,BF=".dropdown",HF=".dropdown-toggle",qF={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},WF={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Kd extends Ms{constructor(e,n){super(e,n),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return qF}static get DefaultType(){return WF}static get NAME(){return kF}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=Nr(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(n=>Number.parseFloat(n))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(ie.off(this._config.target,FE),ie.on(this._config.target,FE,Yf,e=>{const n=this._observableSections.get(e.target.hash);if(n){e.preventDefault();const s=this._rootElement||window,i=n.offsetTop-this._element.offsetTop;if(s.scrollTo){s.scrollTo({top:i,behavior:"smooth"});return}s.scrollTop=i}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(n=>this._observerCallback(n),e)}_observerCallback(e){const n=o=>this._targetLinks.get(`#${o.target.id}`),s=o=>{this._previousScrollData.visibleEntryTop=o.target.offsetTop,this._process(n(o))},i=(this._rootElement||document.documentElement).scrollTop,r=i>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=i;for(const o of e){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(n(o));continue}const l=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(r&&l){if(s(o),!i)return;continue}!r&&!l&&s(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=Re.find(Yf,this._config.target);for(const n of e){if(!n.hash||Lr(n))continue;const s=Re.findOne(decodeURI(n.hash),this._element);cl(s)&&(this._targetLinks.set(decodeURI(n.hash),n),this._observableSections.set(n.hash,s))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(ma),this._activateParents(e),ie.trigger(this._element,NF,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains(VF)){Re.findOne(HF,e.closest(BF)).classList.add(ma);return}for(const n of Re.parents(e,$F))for(const s of Re.prev(n,jF))s.classList.add(ma)}_clearActiveClass(e){e.classList.remove(ma);const n=Re.find(`${Yf}.${ma}`,e);for(const s of n)s.classList.remove(ma)}static jQueryInterface(e){return this.each(function(){const n=Kd.getOrCreateInstance(this,e);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}ie.on(window,LF,()=>{for(const t of Re.find(MF))Kd.getOrCreateInstance(t)});Is(Kd);const zF="tab",KF="bs.tab",Wo=`.${KF}`,GF=`hide${Wo}`,QF=`hidden${Wo}`,YF=`show${Wo}`,XF=`shown${Wo}`,JF=`click${Wo}`,ZF=`keydown${Wo}`,e3=`load${Wo}`,t3="ArrowLeft",jE="ArrowRight",n3="ArrowUp",BE="ArrowDown",Xf="Home",HE="End",wo="active",qE="fade",Jf="show",s3="dropdown",QI=".dropdown-toggle",i3=".dropdown-menu",Zf=`:not(${QI})`,r3='.list-group, .nav, [role="tablist"]',o3=".nav-item, .list-group-item",a3=`.nav-link${Zf}, .list-group-item${Zf}, [role="tab"]${Zf}`,YI='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',ep=`${a3}, ${YI}`,l3=`.${wo}[data-bs-toggle="tab"], .${wo}[data-bs-toggle="pill"], .${wo}[data-bs-toggle="list"]`;class Ja extends Ms{constructor(e){super(e),this._parent=this._element.closest(r3),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),ie.on(this._element,ZF,n=>this._keydown(n)))}static get NAME(){return zF}show(){const e=this._element;if(this._elemIsActive(e))return;const n=this._getActiveElem(),s=n?ie.trigger(n,GF,{relatedTarget:e}):null;ie.trigger(e,YF,{relatedTarget:n}).defaultPrevented||s&&s.defaultPrevented||(this._deactivate(n,e),this._activate(e,n))}_activate(e,n){if(!e)return;e.classList.add(wo),this._activate(Re.getElementFromSelector(e));const s=()=>{if(e.getAttribute("role")!=="tab"){e.classList.add(Jf);return}e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),ie.trigger(e,XF,{relatedTarget:n})};this._queueCallback(s,e,e.classList.contains(qE))}_deactivate(e,n){if(!e)return;e.classList.remove(wo),e.blur(),this._deactivate(Re.getElementFromSelector(e));const s=()=>{if(e.getAttribute("role")!=="tab"){e.classList.remove(Jf);return}e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),ie.trigger(e,QF,{relatedTarget:n})};this._queueCallback(s,e,e.classList.contains(qE))}_keydown(e){if(![t3,jE,n3,BE,Xf,HE].includes(e.key))return;e.stopPropagation(),e.preventDefault();const n=this._getChildren().filter(i=>!Lr(i));let s;if([Xf,HE].includes(e.key))s=n[e.key===Xf?0:n.length-1];else{const i=[jE,BE].includes(e.key);s=Ng(n,e.target,i,!0)}s&&(s.focus({preventScroll:!0}),Ja.getOrCreateInstance(s).show())}_getChildren(){return Re.find(ep,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,n){this._setAttributeIfNotExists(e,"role","tablist");for(const s of n)this._setInitialAttributesOnChild(s)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const n=this._elemIsActive(e),s=this._getOuterElement(e);e.setAttribute("aria-selected",n),s!==e&&this._setAttributeIfNotExists(s,"role","presentation"),n||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const n=Re.getElementFromSelector(e);n&&(this._setAttributeIfNotExists(n,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(n,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,n){const s=this._getOuterElement(e);if(!s.classList.contains(s3))return;const i=(r,o)=>{const l=Re.findOne(r,s);l&&l.classList.toggle(o,n)};i(QI,wo),i(i3,Jf),s.setAttribute("aria-expanded",n)}_setAttributeIfNotExists(e,n,s){e.hasAttribute(n)||e.setAttribute(n,s)}_elemIsActive(e){return e.classList.contains(wo)}_getInnerElement(e){return e.matches(ep)?e:Re.findOne(ep,e)}_getOuterElement(e){return e.closest(o3)||e}static jQueryInterface(e){return this.each(function(){const n=Ja.getOrCreateInstance(this);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}ie.on(document,JF,YI,function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),!Lr(this)&&Ja.getOrCreateInstance(this).show()});ie.on(window,e3,()=>{for(const t of Re.find(l3))Ja.getOrCreateInstance(t)});Is(Ja);const c3="toast",u3="bs.toast",qr=`.${u3}`,h3=`mouseover${qr}`,d3=`mouseout${qr}`,f3=`focusin${qr}`,p3=`focusout${qr}`,m3=`hide${qr}`,g3=`hidden${qr}`,_3=`show${qr}`,v3=`shown${qr}`,y3="fade",WE="hide",Gu="show",Qu="showing",E3={animation:"boolean",autohide:"boolean",delay:"number"},b3={animation:!0,autohide:!0,delay:5e3};class Gd extends Ms{constructor(e,n){super(e,n),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return b3}static get DefaultType(){return E3}static get NAME(){return c3}show(){if(ie.trigger(this._element,_3).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(y3);const n=()=>{this._element.classList.remove(Qu),ie.trigger(this._element,v3),this._maybeScheduleHide()};this._element.classList.remove(WE),Zc(this._element),this._element.classList.add(Gu,Qu),this._queueCallback(n,this._element,this._config.animation)}hide(){if(!this.isShown()||ie.trigger(this._element,m3).defaultPrevented)return;const n=()=>{this._element.classList.add(WE),this._element.classList.remove(Qu,Gu),ie.trigger(this._element,g3)};this._element.classList.add(Qu),this._queueCallback(n,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Gu),super.dispose()}isShown(){return this._element.classList.contains(Gu)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,n){switch(e.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=n;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=n;break}}if(n){this._clearTimeout();return}const s=e.relatedTarget;this._element===s||this._element.contains(s)||this._maybeScheduleHide()}_setListeners(){ie.on(this._element,h3,e=>this._onInteraction(e,!0)),ie.on(this._element,d3,e=>this._onInteraction(e,!1)),ie.on(this._element,f3,e=>this._onInteraction(e,!0)),ie.on(this._element,p3,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const n=Gd.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}qd(Gd);Is(Gd);const w3={name:"Footer",data(){return{modalInstance:null,selectedLangue:"fr",selectedDevise:"EUR",langues:[{value:"fr",text:"Français"},{value:"en",text:"Anglais"},{value:"es",text:"Espagnol"}],devises:[{value:"EUR",text:"Euro (€)"},{value:"USD",text:"Dollar ($)"},{value:"GBP",text:"Livre (£)"}]}},mounted(){const t=this.$refs.preferencesModal;this.modalInstance=new Mo(t);const e=localStorage.getItem("langue"),n=localStorage.getItem("devise");e&&(this.selectedLangue=e),n&&(this.selectedDevise=n)},methods:{getLangueText(t){const e=this.langues.find(n=>n.value===t);return e?e.text:"Langue"},getDeviseText(t){const e=this.devises.find(n=>n.value===t);return e?e.text:"Devise"},openModal(){this.modalInstance&&this.modalInstance.show()},appliquerPreferences(){localStorage.setItem("langue",this.selectedLangue),localStorage.setItem("devise",this.selectedDevise),this.modalInstance&&this.modalInstance.hide()}}},T3={class:"modal fade",id:"preferencesModal",ref:"preferencesModal",tabindex:"-1","aria-labelledby":"preferencesModalLabel","aria-hidden":"true"},A3={class:"modal-dialog modal-dialog-centered"},I3={class:"modal-content"},S3={class:"modal-body"},C3={class:"mb-3"},R3=["value"],P3={class:"mb-3"},O3=["value"],k3={class:"modal-footer"};function x3(t,e,n,s,i,r){return G(),Y("footer",null,[e[8]||(e[8]=Th('<p class="footer-text" data-v-788f7ea2>© 2025 Instant Geek</p><div class="footer-links" data-v-788f7ea2><a class="footer-link" href="/about" data-v-788f7ea2>À propos</a> | <a class="footer-link" href="/privacy-policy" data-v-788f7ea2>Politique de confidentialité</a> | <a class="footer-link" href="/terms-of-service" data-v-788f7ea2>Conditions de ventes</a> | <a class="footer-link" href="/contact" data-v-788f7ea2>Nous Contacter</a></div>',2)),g("div",null,[g("button",{class:"footer-button btn btn-primary",onClick:e[0]||(e[0]=(...o)=>r.openModal&&r.openModal(...o))},ae(r.getLangueText(i.selectedLangue))+" | "+ae(r.getDeviseText(i.selectedDevise)),1)]),g("div",T3,[g("div",A3,[g("div",I3,[e[7]||(e[7]=g("div",{class:"modal-header"},[g("h5",{class:"modal-title",id:"preferencesModalLabel"},"Préférences"),g("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),g("div",S3,[g("form",null,[g("div",C3,[e[4]||(e[4]=g("label",{for:"langueSelect",class:"form-label"},"Langue :",-1)),yt(g("select",{class:"form-select",id:"langueSelect","onUpdate:modelValue":e[1]||(e[1]=o=>i.selectedLangue=o)},[(G(!0),Y(xe,null,wt(i.langues,o=>(G(),Y("option",{key:o.value,value:o.value},ae(o.text),9,R3))),128))],512),[[Cr,i.selectedLangue]])]),g("div",P3,[e[5]||(e[5]=g("label",{for:"deviseSelect",class:"form-label"},"Devise :",-1)),yt(g("select",{class:"form-select",id:"deviseSelect","onUpdate:modelValue":e[2]||(e[2]=o=>i.selectedDevise=o)},[(G(!0),Y(xe,null,wt(i.devises,o=>(G(),Y("option",{key:o.value,value:o.value},ae(o.text),9,O3))),128))],512),[[Cr,i.selectedDevise]])])])]),g("div",k3,[e[6]||(e[6]=g("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Annuler",-1)),g("button",{type:"button",class:"btn btn-primary",onClick:e[3]||(e[3]=(...o)=>r.appliquerPreferences&&r.appliquerPreferences(...o))},"Appliquer")])])])],512)])}const dl=Wt(w3,[["render",x3],["__scopeId","data-v-788f7ea2"]]),D3="/assets/img/Logo.png";async function N3(t,e,n){const i=(await aL(Ho,t,e)).user,r=`${n.firstname} ${n.username}`;return await uL(i,{displayName:r}),await Wc(Yn(Nt,"users",i.uid),{uid:i.uid,email:i.email,displayName:r,firstname:n.firstname,username:n.username,birthdate:n.birthdate,country:n.country,createdAt:new Date,billingAddress:{street:"",city:"",postalCode:"",country:n.country}}),i}async function L3(t,e){return(await lL(Ho,t,e)).user}async function V3(){const t=new Ai,n=(await LL(Ho,t)).user,s=Yn(Nt,"users",n.uid),i=await xo(s),r={uid:n.uid,email:n.email,displayName:n.displayName,photoURL:n.photoURL};return i.exists()||(r.createdAt=new Date),await Wc(s,r,{merge:!0}),n}async function M3(){await pL(Ho)}async function $3(t){await oL(Ho,t)}async function F3(t){const e=Ho.currentUser;if(!e)throw new Error("Aucun utilisateur n'est actuellement connecté.");const n=Bo.credential(e.email,t);await rL(e,n);const s=e.uid,i=Yn(Nt,"users",s);await JD(i),await mL(e)}function zE(t,e,n){const s=new Date;s.setTime(s.getTime()+n*24*60*60*1e3),document.cookie=`${t}=${e};expires=${s.toUTCString()};path=/`}function U3(t){const e=document.cookie.split(";");for(let n=0;n<e.length;n++){const s=e[n].trim();if(s.startsWith(`${t}=`))return s.substring(t.length+1)}return null}const Dc=Ae(U3("dark-mode")==="active");function XI(){Dc.value?(document.body.classList.add("dark-mode"),zE("dark-mode","active",365)):(document.body.classList.remove("dark-mode"),zE("dark-mode","inactive",365))}XI();const KE=()=>{Dc.value=!Dc.value,XI()},cn=Ae(""),j3={class:"navbar navbar-expand-lg shadow-sm"},B3={class:"container-fluid"},H3={class:"navbar-center-content flex-grow-1 d-flex justify-content-center align-items-center"},q3={class:"ig-stepper"},W3={class:"navbar-nav d-none d-lg-flex position-absolute top-50 start-50 translate-middle"},z3={class:"nav-item"},K3={class:"nav-item"},G3={class:"nav-item"},Q3={class:"d-flex align-items-center ms-auto"},Y3={class:"nav-item dropdown"},X3={key:0,class:"bi bi-person-fill connected-profile-icon navbar-icon"},J3={key:1,class:"bi bi-person-circle navbar-icon"},Z3={key:0},e6={class:"dropdown-header"},t6={class:"d-lg-none"},n6={class:"d-lg-none"},s6={class:"d-lg-none"},i6={key:1,class:"d-lg-none"},r6={key:2},o6={key:3},a6={class:"badge bg-danger rounded-pill"},l6={key:4},c6={key:5},u6={key:6},h6={key:0,class:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger cart-badge"},d6={__name:"Navbar",setup(t){const e=$c(),n=vm(),s=ei(),i=Xc(),r=Yc(),o=Ae(!1);let l=null;const c=Ae(!1),d=Ae(!1),h=Ae(null),p=Ae(null),_=Ae(!1),E=Ae(null),C=()=>{e.push({path:"/recherche"})},D=()=>{cn.value.trim()!==""&&n.query.q!==cn.value.trim()&&(c.value=!0,e.push({path:"/recherche",query:{q:cn.value}}))},N=()=>{D()},j=()=>{D()},$=()=>{d.value=!d.value,d.value?Ao(()=>{var O;return(O=h.value)==null?void 0:O.focus()}):cn.value=""},U=()=>{d.value=!1,cn.value=""},B=()=>{setTimeout(()=>{p.value&&!p.value.contains(document.activeElement)&&U()},150)},se=()=>{_.value=!_.value,_.value?(o.value&&(l==null||l.hide()),Ao(()=>{var O;return(O=E.value)==null?void 0:O.focus()})):cn.value=""},re=()=>{_.value=!1,cn.value=""},x=async()=>{try{await M3()}catch(O){console.error("Erreur lors de la déconnexion :",O)}},I=()=>{l&&(o.value?l.hide():l.show()),_.value&&re()};Un(()=>{n.path==="/recherche"&&n.query.q&&(cn.value=n.query.q);const O=document.getElementById("navbarDropdownProfile");O&&(l=new Ds(O),O.addEventListener("show.bs.dropdown",()=>o.value=!0),O.addEventListener("hide.bs.dropdown",()=>o.value=!1))}),rs(cn,O=>{O.trim()!==""?D():n.path==="/recherche"&&e.push("/")}),rs(()=>n.fullPath,(O,A)=>{O!==A&&(c.value?(Ao(()=>{d.value&&h.value?h.value.focus():_.value&&E.value&&E.value.focus()}),c.value=!1):(o.value&&(l==null||l.hide()),d.value&&U(),_.value&&re()))},{flush:"post"});const T=Ot(()=>["/panier","/paiement","/validation"].includes(n.path)),R=Ot(()=>{switch(n.path){case"/panier":return 1;case"/paiement":return 2;case"/validation":return 3;default:return 0}});return(O,A)=>{const S=jn("router-link");return G(),Y("nav",j3,[g("div",B3,[pe(S,{class:"navbar-brand fw-bold me-auto",to:"/"},{default:Je(()=>A[3]||(A[3]=[g("img",{src:D3,alt:"Logo",width:"150",height:"50",class:"d-inline-block align-text-top"},null,-1)])),_:1}),T.value?(G(),Y(xe,{key:0},[g("div",H3,[g("div",q3,[g("div",{class:en(["step",{completed:R.value>1,active:R.value===1}])},A[4]||(A[4]=[g("div",{class:"step-circle"},"1",-1),g("div",{class:"step-label d-none d-sm-block"},"Panier",-1)]),2),g("div",{class:en(["step-line",{completed:R.value>=2}])},null,2),g("div",{class:en(["step",{completed:R.value>2,active:R.value===2}])},A[5]||(A[5]=[g("div",{class:"step-circle"},"2",-1),g("div",{class:"step-label d-none d-sm-block"},"Paiement",-1)]),2),g("div",{class:en(["step-line",{completed:R.value>=3}])},null,2),g("div",{class:en(["step",{completed:R.value>3,active:R.value===3}])},A[6]||(A[6]=[g("div",{class:"step-circle"},"3",-1),g("div",{class:"step-label d-none d-sm-block"},"Validation",-1)]),2)])]),A[7]||(A[7]=Th('<div class="secure-payment-cart d-none d-md-flex align-items-center ms-auto" data-v-391b5dbe><i class="bi bi-check-circle-fill secure-icon-cart me-2" data-v-391b5dbe></i><div class="text-end" data-v-391b5dbe><span class="secure-text-cart d-block" data-v-391b5dbe>Paiement sécurisé</span><span class="ssl-text-cart d-block" data-v-391b5dbe>SSL Secured</span></div></div>',1))],64)):(G(),Y(xe,{key:1},[g("form",{class:en(["search-form-mobile d-lg-none",{active:_.value}]),onSubmit:_r(j,["prevent"])},[yt(g("input",{class:"form-control me-2 search-input-mobile",type:"search",placeholder:"Rechercher...","aria-label":"Search","onUpdate:modelValue":A[0]||(A[0]=Le=>Dt(cn)?cn.value=Le:null),ref_key:"searchInputMobileRef",ref:E},null,512),[[Gt,Ne(cn)]]),g("button",{class:"btn search-filter-btn-mobile",type:"button",onClick:C},A[8]||(A[8]=[g("i",{class:"bi bi-filter"},null,-1)])),g("button",{class:"btn search-close-btn-mobile",type:"button",onClick:re},A[9]||(A[9]=[g("i",{class:"bi bi-x-lg"},null,-1)]))],34),g("ul",W3,[g("li",z3,[pe(S,{class:"nav-link",to:"/nouveautes"},{default:Je(()=>A[10]||(A[10]=[Xe("Nouveautés")])),_:1})]),g("li",K3,[pe(S,{class:"nav-link",to:"/precommandes"},{default:Je(()=>A[11]||(A[11]=[Xe("Précommandes")])),_:1})]),g("li",G3,[pe(S,{class:"nav-link",to:"/prochaines-sorties"},{default:Je(()=>A[12]||(A[12]=[Xe("Prochaines sorties")])),_:1})])]),g("div",Q3,[pe(K_,{name:"fade"},{default:Je(()=>[_.value?un("",!0):(G(),Y("button",{key:0,class:"btn btn-outline-secondary d-lg-none search-icon-mobile",type:"button",onClick:se},A[13]||(A[13]=[g("i",{class:"bi bi-search navbar-icon"},null,-1)])))]),_:1}),pe(K_,{name:"fade"},{default:Je(()=>[d.value?un("",!0):(G(),Y("button",{key:0,class:"btn btn-outline-secondary d-none d-lg-block search-icon-desktop",type:"button",onClick:$},A[14]||(A[14]=[g("i",{class:"bi bi-search navbar-icon"},null,-1)])))]),_:1}),g("form",{class:en(["search-form d-none d-lg-flex",{active:d.value}]),onSubmit:_r(N,["prevent"]),ref_key:"searchFormRef",ref:p},[yt(g("input",{class:"form-control me-2 search-input",type:"search",placeholder:"Rechercher...","aria-label":"Search","onUpdate:modelValue":A[1]||(A[1]=Le=>Dt(cn)?cn.value=Le:null),ref_key:"searchInputRef",ref:h,onBlur:B},null,544),[[Gt,Ne(cn)]]),d.value?(G(),Y("button",{key:0,class:"btn search-filter-btn",type:"button",onClick:C},A[15]||(A[15]=[g("i",{class:"bi bi-filter"},null,-1)]))):un("",!0),d.value?(G(),Y("button",{key:1,class:"btn search-close-btn",type:"button",onClick:U},A[16]||(A[16]=[g("i",{class:"bi bi-x-lg"},null,-1)]))):un("",!0)],34),g("div",Y3,[g("a",{class:"nav-link text ms-2 dropdown-toggle-no-caret",href:"#",id:"navbarDropdownProfile",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",onClick:I},[Ne(s).isLoggedIn?(G(),Y("i",X3)):(G(),Y("i",J3))]),g("ul",{class:en(["dropdown-menu dropdown-menu-end profile-dropdown-menu",{show:o.value}]),"aria-labelledby":"navbarDropdownProfile"},[Ne(s).isLoggedIn?(G(),Y("li",Z3,[g("span",e6,"Bienvenue, "+ae(Ne(s).currentUsername)+"!",1),A[17]||(A[17]=g("hr",{class:"dropdown-divider"},null,-1))])):un("",!0),g("li",t6,[pe(S,{class:"dropdown-item",to:"/nouveautes"},{default:Je(()=>A[18]||(A[18]=[Xe("Nouveautés")])),_:1})]),g("li",n6,[pe(S,{class:"dropdown-item",to:"/precommandes"},{default:Je(()=>A[19]||(A[19]=[Xe("Précommandes")])),_:1})]),g("li",s6,[pe(S,{class:"dropdown-item",to:"/prochaines-sorties"},{default:Je(()=>A[20]||(A[20]=[Xe("Prochaines sorties")])),_:1})]),Ne(s).isLoggedIn?un("",!0):(G(),Y("li",i6,A[21]||(A[21]=[g("hr",{class:"dropdown-divider"},null,-1)]))),Ne(s).isLoggedIn?(G(),Y("li",r6,[pe(S,{class:"dropdown-item",to:"/mes-achats"},{default:Je(()=>A[22]||(A[22]=[Xe("Mes achats")])),_:1})])):un("",!0),Ne(s).isLoggedIn?(G(),Y("li",o6,[pe(S,{class:"dropdown-item d-flex justify-content-between align-items-center",to:"/wishlist"},{default:Je(()=>[A[23]||(A[23]=Xe("Wishlist ")),g("span",a6,ae(Ne(i).wishlistCount),1)]),_:1})])):un("",!0),Ne(s).isLoggedIn?(G(),Y("li",l6,[pe(S,{class:"dropdown-item",to:"/parametres"},{default:Je(()=>A[24]||(A[24]=[Xe("Paramètres")])),_:1})])):un("",!0),Ne(s).isLoggedIn?(G(),Y("li",c6,A[25]||(A[25]=[g("hr",{class:"dropdown-divider"},null,-1)]))):un("",!0),g("li",null,[g("button",{class:"dropdown-item d-flex justify-content-between align-items-center",onClick:A[2]||(A[2]=_r((...Le)=>Ne(KE)&&Ne(KE)(...Le),["stop"]))},[g("span",null,ae(Ne(Dc)?"Mode clair":"Mode sombre"),1),g("i",{class:en(Ne(Dc)?"bi bi-sun-fill":"bi bi-moon-stars-fill")},null,2)])]),Ne(s).isLoggedIn?(G(),Y("li",u6,A[26]||(A[26]=[g("hr",{class:"dropdown-divider"},null,-1)]))):un("",!0),g("li",null,[Ne(s).isLoggedIn?(G(),Y("a",{key:1,class:"dropdown-item custom-auth-link",href:"#",onClick:_r(x,["prevent"])},"Déconnexion")):(G(),dm(S,{key:0,class:"dropdown-item custom-auth-link",to:"/connexion"},{default:Je(()=>A[27]||(A[27]=[Xe("Se connecter")])),_:1}))])],2)]),pe(S,{class:"nav-link text ms-2 position-relative",to:"/panier"},{default:Je(()=>[A[29]||(A[29]=g("i",{class:"bi bi-cart3 navbar-icon"},null,-1)),Ne(r).totalItems>0?(G(),Y("span",h6,[Xe(ae(Ne(r).totalItems)+" ",1),A[28]||(A[28]=g("span",{class:"visually-hidden"},"articles dans le panier",-1))])):un("",!0)]),_:1})])],64))])])}}},ai=Wt(d6,[["__scopeId","data-v-391b5dbe"]]),f6={__name:"Accueil",setup(t){return(e,n)=>(G(),Y(xe,null,[pe(ai),pe(BV),pe(XV),pe(dM),pe(bM),pe(dl)],64))}},p6={class:"container-fluid py-2 preco",id:"main-content"},m6={id:"precoIn"},g6={class:"game-card"},_6=["src","alt"],v6={class:"game-text"},y6={class:"titre"},E6={class:"prix"},b6={class:"dateSortie"},w6={__name:"NewGames",setup(t){const e=Ae([]),n=async()=>{const s=ri(Nt,"games"),i=new Date;i.setHours(0,0,0,0);const r=new Date(i);r.setDate(i.getDate()-180);const o=jr(s,Vi("dateSortie",">=",r),Vi("dateSortie","<=",i),al("dateSortie"));try{const l=await Bi(o);e.value=[],l.forEach(c=>{const d=c.data();e.value.push({id:c.id,titre:d.name,link:d.link,image:d.image,price:`${d.price}€`,date:d.dateSortie.toDate().toLocaleDateString("fr-FR")})})}catch(l){console.error("Erreur lors de la récupération des jeux :",l)}};return Un(()=>{n()}),(s,i)=>{const r=jn("router-link");return G(),Y("div",p6,[g("div",null,[i[0]||(i[0]=g("h1",{class:"mt-3 mb-5"},"Nouveautés",-1)),g("ul",m6,[(G(!0),Y(xe,null,wt(e.value,o=>(G(),Y("li",{key:o.id},[g("div",g6,[pe(r,{class:"nav-link",to:`/game/${o.id}`},{default:Je(()=>[g("img",{src:`/assets/img/preview/${o.image}`,alt:o.titre},null,8,_6)]),_:2},1032,["to"]),g("div",v6,[g("h3",y6,ae(o.titre),1),g("h3",E6,ae(o.price),1)]),g("p",b6,ae(o.date),1)])]))),128))])])])}}},T6=Wt(w6,[["__scopeId","data-v-1f773c91"]]),A6={__name:"Nouveautes",setup(t){return(e,n)=>(G(),Y(xe,null,[pe(ai),g("div",null,[pe(T6)]),pe(dl)],64))}},I6={class:"container-fluid py-2 preco",id:"main-content"},S6={id:"precoIn"},C6={class:"game-card"},R6=["src","alt"],P6={class:"game-text"},O6={class:"titre"},k6={class:"prix"},x6={class:"dateSortie"},D6={__name:"PrecoPage",setup(t){const e=Ae([]),n=async()=>{const s=ri(Nt,"games"),i=new Date;i.setHours(0,0,0,0);const r=jr(s,Vi("dateSortie",">=",i),al("dateSortie"));try{const o=await Bi(r);e.value=[],o.forEach(l=>{const c=l.data();e.value.push({id:l.id,titre:c.name,link:c.link,image:c.image,price:`${c.price}€`,date:c.dateSortie.toDate().toLocaleDateString("fr-FR")})})}catch(o){console.error("Erreur lors de la récupération des jeux :",o)}};return Un(()=>{n()}),(s,i)=>{const r=jn("router-link");return G(),Y("div",I6,[g("div",null,[i[0]||(i[0]=g("h1",{class:"mt-3"},"Précommandes",-1)),i[1]||(i[1]=g("p",{class:"mb-5"},"Réservez dès maintenant les articles à venir.",-1)),g("ul",S6,[(G(!0),Y(xe,null,wt(e.value,o=>(G(),Y("li",{key:o.id},[g("div",C6,[pe(r,{class:"nav-link",to:`/game/${o.id}`},{default:Je(()=>[g("img",{src:`/assets/img/preview/${o.image}`,alt:o.titre},null,8,R6)]),_:2},1032,["to"]),g("div",P6,[g("h3",O6,ae(o.titre),1),g("h3",k6,ae(o.price),1)]),g("p",x6,ae(o.date),1)])]))),128))])])])}}},N6=Wt(D6,[["__scopeId","data-v-18b1776a"]]),L6={__name:"Precommandes",setup(t){return(e,n)=>(G(),Y(xe,null,[pe(ai),g("div",null,[pe(N6)]),pe(dl)],64))}},V6={class:"container-fluid py-2 preco",id:"main-content"},M6={id:"precoIn"},$6={class:"game-card GameJuill"},F6=["href"],U6=["src","alt"],j6={class:"game-text"},B6={class:"titre"},H6={class:"prix"},q6={class:"dateSortie"},W6={id:"precoIn"},z6={class:"game-card GameAout"},K6=["href"],G6=["src","alt"],Q6={class:"game-text"},Y6={class:"titre"},X6={class:"prix"},J6={class:"dateSortie"},Z6={id:"precoIn"},eU={class:"game-card GameAout"},tU=["href"],nU=["src","alt"],sU={class:"game-text"},iU={class:"titre"},rU={class:"prix"},oU={class:"dateSortie"},aU={id:"precoIn"},lU={class:"game-card GameAout"},cU=["href"],uU=["src","alt"],hU={class:"game-text"},dU={class:"titre"},fU={class:"prix"},pU={class:"dateSortie"},mU={id:"precoIn"},gU={class:"game-card GameAout"},_U=["href"],vU=["src","alt"],yU={class:"game-text"},EU={class:"titre"},bU={class:"prix"},wU={class:"dateSortie"},TU={id:"precoIn"},AU={class:"game-card GameAout"},IU=["href"],SU=["src","alt"],CU={class:"game-text"},RU={class:"titre"},PU={class:"prix"},OU={class:"dateSortie"},kU={__name:"PlanningSortie",setup(t){const e=Ae([]),n=Ae([]),s=Ae([]),i=Ae([]),r=Ae([]),o=Ae([]),l=async()=>{const c=ri(Nt,"games"),d=new Date("2025-07-01T00:00:00"),h=new Date("2025-12-31T23:59:59"),p=jr(c,Vi("dateSortie",">=",d),Vi("dateSortie","<=",h),al("dateSortie"));try{const _=await Bi(p);e.value=[],n.value=[],s.value=[],i.value=[],r.value=[],o.value=[],_.forEach(E=>{const C=E.data(),D=C.dateSortie.toDate(),N={id:E.id,titre:C.name,link:C.link,image:C.image,price:`${C.price}€`,date:D.toLocaleDateString("fr-FR")};switch(D.getMonth()){case 6:e.value.push(N);break;case 7:n.value.push(N);break;case 8:s.value.push(N);break;case 9:i.value.push(N);break;case 10:r.value.push(N);break;case 11:o.value.push(N);break}})}catch(_){console.error("Erreur lors de la récupération des jeux :",_)}};return Un(()=>{l()}),(c,d)=>(G(),Y("div",V6,[g("div",null,[d[0]||(d[0]=g("h1",{class:"mt-3 mb-5"},"Prochaines sorties",-1)),d[1]||(d[1]=g("h2",{class:"text-center"},[g("u",null,"Juillet")],-1)),d[2]||(d[2]=g("br",null,null,-1)),g("ul",M6,[(G(!0),Y(xe,null,wt(e.value,h=>(G(),Y("li",{key:h.id},[g("div",$6,[g("a",{href:h.link},[g("img",{src:`/assets/img/preview/${h.image}`,alt:h.titre},null,8,U6)],8,F6),g("div",j6,[g("h3",B6,ae(h.titre),1),g("h3",H6,ae(h.price),1)]),g("p",q6,ae(h.date),1)])]))),128))]),d[3]||(d[3]=g("h2",{class:"text-center mt-4 mb-5"},[g("u",null,"Août")],-1)),g("ul",W6,[(G(!0),Y(xe,null,wt(n.value,h=>(G(),Y("li",{key:h.id},[g("div",z6,[g("a",{href:h.link},[g("img",{src:`/assets/img/preview/${h.image}`,alt:h.titre},null,8,G6)],8,K6),g("div",Q6,[g("h3",Y6,ae(h.titre),1),g("h3",X6,ae(h.price),1)]),g("p",J6,ae(h.date),1)])]))),128))]),d[4]||(d[4]=g("h2",{class:"text-center mt-4 mb-5"},[g("u",null,"Septembre")],-1)),g("ul",Z6,[(G(!0),Y(xe,null,wt(s.value,h=>(G(),Y("li",{key:h.id},[g("div",eU,[g("a",{href:h.link},[g("img",{src:`/assets/img/preview/${h.image}`,alt:h.titre},null,8,nU)],8,tU),g("div",sU,[g("h3",iU,ae(h.titre),1),g("h3",rU,ae(h.price),1)]),g("p",oU,ae(h.date),1)])]))),128))]),d[5]||(d[5]=g("h2",{class:"text-center mt-4 mb-5"},[g("u",null,"Octobre")],-1)),g("ul",aU,[(G(!0),Y(xe,null,wt(i.value,h=>(G(),Y("li",{key:h.id},[g("div",lU,[g("a",{href:h.link},[g("img",{src:`/assets/img/preview/${h.image}`,alt:h.titre},null,8,uU)],8,cU),g("div",hU,[g("h3",dU,ae(h.titre),1),g("h3",fU,ae(h.price),1)]),g("p",pU,ae(h.date),1)])]))),128))]),d[6]||(d[6]=g("h2",{class:"text-center mt-4 mb-5"},[g("u",null,"Novembre")],-1)),g("ul",mU,[(G(!0),Y(xe,null,wt(r.value,h=>(G(),Y("li",{key:h.id},[g("div",gU,[g("a",{href:h.link},[g("img",{src:`/assets/img/preview/${h.image}`,alt:h.titre},null,8,vU)],8,_U),g("div",yU,[g("h3",EU,ae(h.titre),1),g("h3",bU,ae(h.price),1)]),g("p",wU,ae(h.date),1)])]))),128))]),d[7]||(d[7]=g("h2",{class:"text-center mt-4 mb-5"},[g("u",null,"Décembre")],-1)),g("ul",TU,[(G(!0),Y(xe,null,wt(o.value,h=>(G(),Y("li",{key:h.id},[g("div",AU,[g("a",{href:h.link},[g("img",{src:`/assets/img/preview/${h.image}`,alt:h.titre},null,8,SU)],8,IU),g("div",CU,[g("h3",RU,ae(h.titre),1),g("h3",PU,ae(h.price),1)]),g("p",OU,ae(h.date),1)])]))),128))])])]))}},xU=Wt(kU,[["__scopeId","data-v-fca069ad"]]),DU={__name:"ProchainesSorties",setup(t){return(e,n)=>(G(),Y(xe,null,[pe(ai),g("div",null,[pe(xU)]),pe(dl)],64))}},NU="/assets/img/inscription.jpg",LU={class:"login-page-wrapper vh-100 d-flex align-items-center justify-content-center"},VU={class:"login-card-container d-flex shadow-lg"},MU={class:"login-form-section p-4 d-flex flex-column justify-content-center align-items-center text-center"},$U={class:"form-group mb-3 text-start"},FU={class:"form-group mb-3 text-start"},UU={class:"form-group mb-3 text-start"},jU={class:"form-group mb-3 text-start"},BU={class:"form-group mb-3 text-start"},HU={class:"form-group mb-4 text-start"},qU=["value"],WU={class:"d-flex justify-content-center w-100 mt-4 small-links"},zU={class:"login-image-section d-none d-md-flex align-items-center justify-content-center p-0"},KU={__name:"Inscription",setup(t){const e=Ae(""),n=Ae(""),s=Ae(""),i=Ae(""),r=Ae(""),o=Ae(""),l=Ae([]),c=$c();async function d(){try{const p=await fetch("https://restcountries.com/v3.1/all?fields=name,cca3");if(!p.ok)throw new Error("Failed to fetch countries");const _=await p.json();l.value=_.sort((E,C)=>E.name.common.localeCompare(C.name.common))}catch(p){console.error(p.message)}}Un(()=>{d()});async function h(){const p=new Date,_=new Date(r.value),E=new Date(p.getFullYear()-18,p.getMonth(),p.getDate());if(_>E){alert("Vous devez avoir au moins 18 ans pour vous inscrire.");return}try{const C=await N3(e.value,n.value);if(C&&C.uid)await Wc(Yn(Nt,"users",C.uid),{email:e.value,username:s.value,firstname:i.value,birthdate:r.value,country:o.value,createdAt:new Date},{merge:!0}),alert("Compte créé avec succès !"),c.push("/");else throw new Error("L'utilisateur n'a pas été créé correctement par Firebase.")}catch(C){alert("Erreur lors de l'inscription : "+C.message)}}return(p,_)=>{const E=jn("router-link");return G(),Y("div",LU,[g("div",VU,[g("div",MU,[_[15]||(_[15]=g("h2",{class:"login-title mb-4 text-white"},"inscription",-1)),g("form",{onSubmit:_r(h,["prevent"]),class:"w-100"},[g("div",$U,[_[6]||(_[6]=g("label",{for:"email",class:"form-label text-uppercase text-white-50"},"Email",-1)),yt(g("input",{id:"email","onUpdate:modelValue":_[0]||(_[0]=C=>e.value=C),type:"email",class:"form-control login-input",required:"","aria-label":"Email"},null,512),[[Gt,e.value]])]),g("div",FU,[_[7]||(_[7]=g("label",{for:"password",class:"form-label text-uppercase text-white-50"},"Mot de passe",-1)),yt(g("input",{id:"password","onUpdate:modelValue":_[1]||(_[1]=C=>n.value=C),type:"password",class:"form-control login-input",required:"","aria-label":"Mot de passe"},null,512),[[Gt,n.value]])]),g("div",UU,[_[8]||(_[8]=g("label",{for:"username",class:"form-label text-uppercase text-white-50"},"Nom",-1)),yt(g("input",{id:"username","onUpdate:modelValue":_[2]||(_[2]=C=>s.value=C),type:"text",class:"form-control login-input",required:"","aria-label":"Nom d'utilisateur"},null,512),[[Gt,s.value]])]),g("div",jU,[_[9]||(_[9]=g("label",{for:"firstname",class:"form-label text-uppercase text-white-50"},"Prénom",-1)),yt(g("input",{id:"firstname","onUpdate:modelValue":_[3]||(_[3]=C=>i.value=C),type:"text",class:"form-control login-input",required:"","aria-label":"Prénom"},null,512),[[Gt,i.value]])]),g("div",BU,[_[10]||(_[10]=g("label",{for:"birthdate",class:"form-label text-uppercase text-white-50"},"Date de naissance",-1)),yt(g("input",{id:"birthdate","onUpdate:modelValue":_[4]||(_[4]=C=>r.value=C),type:"date",class:"form-control login-input",required:"","aria-label":"Date de naissance"},null,512),[[Gt,r.value]])]),g("div",HU,[_[12]||(_[12]=g("label",{for:"country",class:"form-label text-uppercase text-white-50"},"Pays",-1)),yt(g("select",{id:"country","onUpdate:modelValue":_[5]||(_[5]=C=>o.value=C),class:"form-control login-input",required:"","aria-label":"Pays"},[_[11]||(_[11]=g("option",{disabled:"",value:""},"Veuillez sélectionner un pays",-1)),(G(!0),Y(xe,null,wt(l.value,C=>(G(),Y("option",{key:C.cca3,value:C.name.common},ae(C.name.common),9,qU))),128))],512),[[Cr,o.value]])]),_[13]||(_[13]=g("button",{type:"submit",class:"btn login-btn w-100"},"valider",-1))],32),g("div",WU,[pe(E,{to:"/connexion",class:"text-decoration-none text-white-50"},{default:Je(()=>_[14]||(_[14]=[g("i",{class:"bi bi-arrow-left me-2"},null,-1),Xe(" RETOUR ")])),_:1})])]),g("div",zU,[pe(E,{to:"/",class:"close-button","aria-label":"Retour à l'accueil"},{default:Je(()=>_[16]||(_[16]=[g("i",{class:"bi bi-x-lg"},null,-1)])),_:1}),_[17]||(_[17]=g("img",{src:NU,alt:"Illustration de jeux vidéo pour l'inscription",class:"img-fluid login-background-image"},null,-1))])])])}}},GU=Wt(KU,[["__scopeId","data-v-8a284661"]]),QU="/assets/img/connexion.jpg",YU={class:"login-page-wrapper vh-100 d-flex align-items-center justify-content-center"},XU={class:"login-card-container d-flex shadow-lg"},JU={class:"login-form-section p-4 d-flex flex-column justify-content-center align-items-center text-center"},ZU={class:"form-group mb-3 text-start"},e9={class:"form-group mb-4 text-start"},t9={class:"d-flex justify-content-between w-100 mt-3 small-links"},n9={class:"login-image-section d-none d-md-flex align-items-center justify-content-center p-0"},s9={__name:"Connexion",setup(t){const e=Ae(""),n=Ae(""),s=$c();async function i(){try{await L3(e.value,n.value),alert("Connexion réussie !"),s.push("/")}catch(l){alert("Erreur lors de la connexion : "+l.message)}}async function r(){try{await V3(),alert("Connexion Google réussie !"),s.push("/")}catch(l){alert("Erreur avec Google : "+l.message)}}async function o(){if(!e.value){alert('Veuillez entrer votre adresse email dans le champ "Email" pour réinitialiser votre mot de passe.');return}try{await $3(e.value),alert("Un e-mail de réinitialisation de mot de passe a été envoyé à "+e.value+". Veuillez vérifier votre boîte de réception.")}catch(l){alert("Erreur lors de l'envoi de l'e-mail de réinitialisation : "+l.message)}}return(l,c)=>{const d=jn("router-link");return G(),Y("div",YU,[g("div",XU,[g("div",JU,[c[9]||(c[9]=g("h2",{class:"login-title mb-4"},"Se connecter",-1)),g("div",{class:"social-icons d-flex justify-content-center w-100 mb-4"},[g("button",{onClick:r,class:"btn social-icon-btn google-btn me-3","aria-label":"Se connecter avec Google"},c[2]||(c[2]=[g("i",{class:"bi bi-google"},null,-1)])),c[3]||(c[3]=g("button",{class:"btn social-icon-btn discord-btn me-3","aria-label":"Se connecter avec Discord"},[g("i",{class:"bi bi-discord"})],-1)),c[4]||(c[4]=g("button",{class:"btn social-icon-btn facebook-btn","aria-label":"Se connecter avec Facebook"},[g("i",{class:"bi bi-facebook"})],-1))]),c[10]||(c[10]=g("div",{class:"social-login-separator my-3"},"— ou —",-1)),g("form",{onSubmit:_r(i,["prevent"]),class:"w-100"},[g("div",ZU,[c[5]||(c[5]=g("label",{for:"email",class:"form-label text-uppercase"},"Email",-1)),yt(g("input",{id:"email","onUpdate:modelValue":c[0]||(c[0]=h=>e.value=h),type:"email",class:"form-control login-input",required:"","aria-label":"Email"},null,512),[[Gt,e.value]])]),g("div",e9,[c[6]||(c[6]=g("label",{for:"password",class:"form-label text-uppercase"},"Mot de passe",-1)),yt(g("input",{id:"password","onUpdate:modelValue":c[1]||(c[1]=h=>n.value=h),type:"password",class:"form-control login-input",required:"","aria-label":"Mot de passe"},null,512),[[Gt,n.value]])]),c[7]||(c[7]=g("button",{type:"submit",class:"btn login-btn w-100"},"Se connecter",-1))],32),g("div",t9,[pe(d,{to:"/inscription",class:"text-decoration-none"},{default:Je(()=>c[8]||(c[8]=[Xe(" J'ai besoin de compte ? ")])),_:1}),g("a",{href:"#",onClick:_r(o,["prevent"]),class:"text-decoration-none"}," Mot de passe oublié ? ")])]),g("div",n9,[pe(d,{to:"/",class:"close-button","aria-label":"Retour à l'accueil"},{default:Je(()=>c[11]||(c[11]=[g("i",{class:"bi bi-x-lg"},null,-1)])),_:1}),c[12]||(c[12]=g("img",{src:QU,alt:"Illustration de jeux vidéo",class:"img-fluid login-background-image"},null,-1))])])])}}},i9=Wt(s9,[["__scopeId","data-v-6422ba25"]]),r9={class:"panier-container container py-5",id:"main-content"},o9={class:"row g-4 mt-4"},a9={class:"col-lg-8"},l9={class:"cart-items-list"},c9={key:0,class:"empty-cart-message"},u9=["src","alt"],h9={class:"item-details"},d9={class:"item-name"},f9={class:"item-price-unit"},p9={class:"item-quantity-controls"},m9=["onClick"],g9={class:"quantity-display"},_9=["onClick"],v9={class:"item-subtotal"},y9={class:"mb-0"},E9=["onClick"],b9={class:"col-lg-4"},w9={class:"order-summary"},T9={class:"summary-details mt-4"},A9={class:"d-flex justify-content-between fw-bold summary-total-final"},I9={class:"display-6"},S9={class:"address-section"},C9={key:0,class:"address-box-action"},R9={key:1,class:"address-box-action"},P9={key:2,class:"address-box-saved"},O9={class:"address-details"},k9={class:"payment-section"},x9={class:"credit-card-form"},D9={class:"mb-3"},N9={class:"mb-3"},L9={class:"row"},V9={class:"col-7"},M9={class:"d-flex"},$9=["value"],F9=["value"],U9={class:"col-5"},j9=["disabled"],B9={__name:"Panier",setup(t){const e=Yc(),n=ei(),s=$c(),i=Ot(()=>e.items.length>0&&n.isLoggedIn&&n.hasCompleteBillingAddress&&l.value),r=new Date().getFullYear(),o=Ae({name:"",number:"",expiryMonth:"",expiryYear:"",cvc:""}),l=Ot(()=>o.value.name.trim()!==""&&o.value.number.length>=16&&o.value.expiryMonth!==""&&o.value.expiryYear!==""&&o.value.cvc.length>=3);async function c(){if(!i.value){alert("Veuillez vous connecter et renseigner une adresse de facturation complète pour continuer.");return}try{const d={userId:n.user.uid,createdAt:tN(),items:JSON.parse(JSON.stringify(e.items)),totalPrice:e.totalPrice,billingAddress:JSON.parse(JSON.stringify(n.billingAddress)),status:"validée"};console.log("Objet orderData envoyé à Firestore :",d),console.log("État de authStore.user au moment du clic :",n.user),console.log("État de authStore.billingAddress :",n.billingAddress);const h=ri(Nt,"orders"),p=await ZD(h,d);e.clearCart(),s.push({name:"validation",params:{orderId:p.id}})}catch(d){console.error("Erreur lors de la création de la commande : ",d),alert("Une erreur est survenue lors du paiement. Veuillez réessayer.")}}return(d,h)=>{const p=jn("router-link");return G(),Y(xe,null,[pe(ai),g("div",r9,[g("div",o9,[g("div",a9,[g("div",l9,[Ne(e).items.length===0?(G(),Y("div",c9,[h[6]||(h[6]=g("i",{class:"bi bi-bag-fill empty-cart-icon"},null,-1)),h[7]||(h[7]=g("h3",null,"Votre panier est vide.",-1)),h[8]||(h[8]=g("p",null,"Découvrez notre catalogue de jeux et remplissez votre collection !",-1)),pe(p,{to:"/",class:"btn btn-primary mt-3"},{default:Je(()=>h[5]||(h[5]=[Xe("Explorer le catalogue")])),_:1})])):(G(!0),Y(xe,{key:1},wt(Ne(e).items,_=>(G(),Y("div",{key:_.id,class:"cart-item"},[g("img",{src:_.image,alt:_.name,class:"item-image"},null,8,u9),g("div",h9,[g("h5",d9,ae(_.name),1),g("p",f9,ae(_.price)+" €",1)]),g("div",p9,[g("button",{class:"btn-quantity",onClick:E=>Ne(e).decreaseQuantity(_.id)},h[9]||(h[9]=[g("i",{class:"bi bi-dash"},null,-1)]),8,m9),g("span",g9,ae(_.quantity),1),g("button",{class:"btn-quantity",onClick:E=>Ne(e).increaseQuantity(_.id)},h[10]||(h[10]=[g("i",{class:"bi bi-plus"},null,-1)]),8,_9)]),g("div",v9,[g("p",y9,ae((_.price*_.quantity).toFixed(2))+" €",1)]),g("button",{class:"btn-delete",onClick:E=>Ne(e).removeItem(_.id)},h[11]||(h[11]=[g("i",{class:"bi bi-trash-fill"},null,-1)]),8,E9)]))),128))])]),g("div",b9,[g("div",w9,[h[32]||(h[32]=g("h3",{class:"summary-title"},"RÉSUMÉ DE LA COMMANDE",-1)),g("div",T9,[g("div",A9,[h[12]||(h[12]=g("span",null,"TOTAL :",-1)),g("span",I9,ae(Ne(e).totalPrice)+" €",1)]),h[13]||(h[13]=g("p",{class:"mt-3 text-muted small"},"*Livraison instantanée par clé numérique.",-1))]),h[33]||(h[33]=g("hr",{class:"my-4"},null,-1)),g("div",S9,[h[23]||(h[23]=g("h4",{class:"address-title"},"Adresse de facturation",-1)),Ne(n).isLoggedIn?Ne(n).hasCompleteBillingAddress?(G(),Y("div",P9,[g("div",O9,[g("strong",null,ae(Ne(n).userData.firstname)+" "+ae(Ne(n).userData.username),1),h[19]||(h[19]=g("br",null,null,-1)),Xe(" "+ae(Ne(n).billingAddress.street),1),h[20]||(h[20]=g("br",null,null,-1)),Xe(" "+ae(Ne(n).billingAddress.postalCode)+" "+ae(Ne(n).billingAddress.city),1),h[21]||(h[21]=g("br",null,null,-1)),Xe(" "+ae(Ne(n).billingAddress.country),1)]),pe(p,{to:"/parametres",class:"edit-address-btn","aria-label":"Modifier l'adresse"},{default:Je(()=>h[22]||(h[22]=[g("i",{class:"bi bi-pencil-square"},null,-1)])),_:1})])):(G(),Y("div",R9,[h[18]||(h[18]=g("p",null,"Aucune adresse de facturation trouvée.",-1)),pe(p,{to:"/parametres",class:"btn btn-sm btn-outline-primary"},{default:Je(()=>h[17]||(h[17]=[Xe(" Ajouter une adresse ")])),_:1})])):(G(),Y("div",C9,[g("p",null,[h[15]||(h[15]=Xe("Veuillez vous ")),pe(p,{to:"/connexion"},{default:Je(()=>h[14]||(h[14]=[Xe("connecter")])),_:1}),h[16]||(h[16]=Xe(" pour utiliser une adresse enregistrée."))])]))]),h[34]||(h[34]=g("hr",{class:"my-4"},null,-1)),g("div",k9,[h[30]||(h[30]=g("h4",{class:"payment-title"},"Informations de paiement",-1)),g("form",x9,[g("div",D9,[h[24]||(h[24]=g("label",{for:"card-name",class:"form-label"},"Nom sur la carte",-1)),yt(g("input",{type:"text",id:"card-name",class:"form-control","onUpdate:modelValue":h[0]||(h[0]=_=>o.value.name=_),required:""},null,512),[[Gt,o.value.name]])]),g("div",N9,[h[25]||(h[25]=g("label",{for:"card-number",class:"form-label"},"Numéro de carte",-1)),yt(g("input",{type:"text",id:"card-number",class:"form-control",placeholder:"0000 0000 0000 0000","onUpdate:modelValue":h[1]||(h[1]=_=>o.value.number=_),maxlength:"19",required:""},null,512),[[Gt,o.value.number]])]),g("div",L9,[g("div",V9,[h[28]||(h[28]=g("label",{for:"card-expiry",class:"form-label"},"Expiration",-1)),g("div",M9,[yt(g("select",{id:"card-expiry-month",class:"form-select me-2","onUpdate:modelValue":h[2]||(h[2]=_=>o.value.expiryMonth=_),required:""},[h[26]||(h[26]=g("option",{disabled:"",value:""},"Mois",-1)),(G(),Y(xe,null,wt(12,_=>g("option",{key:_,value:_},ae(_.toString().padStart(2,"0")),9,$9)),64))],512),[[Cr,o.value.expiryMonth]]),yt(g("select",{id:"card-expiry-year",class:"form-select","onUpdate:modelValue":h[3]||(h[3]=_=>o.value.expiryYear=_),required:""},[h[27]||(h[27]=g("option",{disabled:"",value:""},"Année",-1)),(G(),Y(xe,null,wt(10,_=>g("option",{key:_,value:Ne(r)+_-1},ae(Ne(r)+_-1),9,F9)),64))],512),[[Cr,o.value.expiryYear]])])]),g("div",U9,[h[29]||(h[29]=g("label",{for:"card-cvc",class:"form-label"},"CVC",-1)),yt(g("input",{type:"text",id:"card-cvc",class:"form-control",placeholder:"123","onUpdate:modelValue":h[4]||(h[4]=_=>o.value.cvc=_),maxlength:"4",required:""},null,512),[[Gt,o.value.cvc]])])])])]),g("button",{onClick:c,class:"btn-validate mt-4",disabled:!i.value}," PAYER "+ae(Ne(e).totalPrice)+" € ",9,j9),pe(p,{to:"/",class:"btn btn-continue-shopping mt-3"},{default:Je(()=>h[31]||(h[31]=[Xe(" Continuer mes achats ")])),_:1})])])])])],64)}}},H9=Wt(B9,[["__scopeId","data-v-552c2cad"]]),q9={key:0,class:"similar"},W9={class:"row"},z9={class:"media-scroller snaps-inline",id:"similarIn"},K9={class:"game-card mt-4 mb-5"},G9=["src","alt"],Q9={class:"game-text"},Y9={class:"titre"},X9={class:"prix"},J9={__name:"SimilarGames",props:{tags:{type:Array,required:!0},currentGameId:{type:String,required:!0}},setup(t){const e=t,n=Ae([]);return rs(()=>e.tags,async()=>{const i=ri(Nt,"games"),r=[];(await Bi(i)).forEach(l=>{const c=l.data(),d=c.tag||[];if(l.id!==e.currentGameId){const h=d.filter(p=>e.tags.includes(p));h.length>=2&&r.push({id:l.id,titre:c.name,image:c.image,price:`${c.price}€`,commonTagCount:h.length})}}),r.sort((l,c)=>c.commonTagCount-l.commonTagCount),n.value=r.slice(0,12)},{immediate:!0}),(i,r)=>{const o=jn("router-link");return n.value.length?(G(),Y("div",q9,[r[1]||(r[1]=g("h2",null,"Jeux similaires",-1)),g("div",W9,[g("ul",z9,[(G(!0),Y(xe,null,wt(n.value,l=>(G(),Y("div",{key:l.id,class:"col-6 col-md-3 mb-4"},[pe(o,{to:`/game/${l.id}`,class:"text-decoration-none"},{default:Je(()=>[g("div",K9,[pe(o,{class:"nav-link",to:`/game/${l.id}`},{default:Je(()=>[g("img",{src:`/assets/img/preview/${l.image}`,alt:l.titre},null,8,G9)]),_:2},1032,["to"]),g("div",Q9,[g("h3",Y9,ae(l.titre)+" :",1),g("h3",X9,ae(l.price),1)]),r[0]||(r[0]=g("h2",null,null,-1))])]),_:2},1032,["to"])]))),128))])])])):un("",!0)}}},Z9=Wt(J9,[["__scopeId","data-v-17334b8b"]]),e5={key:0,class:"container-fluid py-2 gameDetail",id:"main-content"},t5={key:0},n5={class:"title"},s5={class:"game-info"},i5={class:"tags"},r5={class:"tag-list"},o5={class:"synopsis"},a5={class:"game-details"},l5={class:"infos"},c5={class:"infos1"},u5={class:"paltform"},h5={class:"price"},d5={class:"buttons"},f5={class:"description"},p5={key:1},m5=["src","alt"],g5={class:"desktop"},_5={class:"title"},v5={class:"game-info"},y5={class:"tags"},E5={class:"tag-list"},b5={class:"synopsis"},w5={class:"game-details"},T5={class:"infos"},A5={class:"infos1"},I5={class:"paltform"},S5={class:"price"},C5={class:"buttons"},R5={class:"description"},P5={key:1},O5={__name:"GameDetail",setup(t){const e=Yc(),n=Xc(),s=vm(),i=Ae(s.params.id),r=Ae(null),o=async _=>{try{const E=Yn(Nt,"games",_),C=await xo(E);if(C.exists()){const D=C.data();r.value={id:C.id,titre:D.name,link:D.link,image:D.image,price:`${Number(D.price).toFixed(2)}€`,date:D.dateSortie.toDate().toLocaleDateString("fr-FR"),description:D.description,tags:D.tag,platform:D.plateforme,hero:D.hero}}else router.replace({name:"NotFound"})}catch(E){console.error("Erreur lors de la récupération du jeu :",E)}},l=Ot(()=>{var _;return(_=r.value)!=null&&_.id?n.isInWishlist(r.value.id):!1}),c=()=>{var _;(_=r.value)!=null&&_.id&&(l.value?n.removeFromWishlist(r.value.id):n.addToWishlist(r.value.id))};function d(){e.addItem({id:r.value.id,name:r.value.titre,image:r.value.hero,price:parseFloat(r.value.price)})}rs(()=>s.params.id,_=>{i.value=_,o(_)});const h=Ae(window.innerWidth<768),p=()=>{h.value=window.innerWidth<768};return Un(()=>{i.value&&o(i.value),window.addEventListener("resize",p)}),ld(()=>{window.removeEventListener("resize",p)}),rs(()=>s.params.id,_=>{_&&(i.value=_,o(_))}),(_,E)=>r.value?(G(),Y("div",e5,[h.value?(G(),Y("div",t5,[g("div",{class:"background",style:Co({backgroundImage:`url(/assets/img/preview/${r.value.image})`})},[g("h1",n5,ae(r.value.titre),1),g("div",s5,[g("h3",i5,[g("ul",r5,[(G(!0),Y(xe,null,wt(r.value.tags,(C,D)=>(G(),Y("li",{key:D,class:"tag"},ae(C),1))),128))])]),g("p",o5,[pe(Hp,{text:r.value.description,maxLength:200},null,8,["text"])])])],4),g("div",a5,[g("div",l5,[g("div",c5,[g("div",u5,[g("h3",null,ae(r.value.platform),1)]),E[0]||(E[0]=g("p",null,"|",-1)),E[1]||(E[1]=g("div",{class:"stock"},[g("h3",null,"En stock")],-1))]),g("h3",h5,ae(r.value.price),1)]),g("div",d5,[g("button",{class:en(["favorite",{"in-wishlist":l.value}]),onClick:c},[g("i",{class:en(["bi",l.value?"bi-heart-fill":"bi-heart"])},null,2)],2),g("button",{class:"cart",onClick:d},E[2]||(E[2]=[g("h3",null,"Ajouter au panier",-1),Xe(),g("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"},[Xe("!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--> "),g("path",{d:"M0 24C0 10.7 10.7 0 24 0L69.5 0c22 0 41.5 12.8 50.6 32l411 0c26.3 0 45.5 25 38.6 50.4l-41 152.3c-8.5 31.4-37 53.3-69.5 53.3l-288.5 0 5.4 28.5c2.2 11.3 12.1 19.5 23.6 19.5L488 336c13.3 0 24 10.7 24 24s-10.7 24-24 24l-288.3 0c-34.6 0-64.3-24.6-70.7-58.5L77.4 54.5c-.7-3.8-4-6.5-7.9-6.5L24 48C10.7 48 0 37.3 0 24zM128 464a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm336-48a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"})],-1)]))]),g("div",f5,[E[3]||(E[3]=g("h3",null,"Description",-1)),Xe(" "+ae(r.value.description),1)])])])):(G(),Y("div",p5,[g("div",{class:"background",style:Co({backgroundImage:`url(${r.value.hero})`})},[g("div",null,[g("img",{src:`/assets/img/preview/${r.value.image}`,alt:r.value.titre},null,8,m5)]),g("div",g5,[g("h1",_5,ae(r.value.titre),1),g("div",v5,[g("h3",y5,[g("ul",E5,[(G(!0),Y(xe,null,wt(r.value.tags,(C,D)=>(G(),Y("li",{key:D,class:"tag"},ae(C),1))),128))])]),g("p",b5,[pe(Hp,{text:r.value.description,maxLength:450},null,8,["text"])])]),g("div",w5,[g("div",T5,[g("div",A5,[g("div",I5,[g("h3",null,ae(r.value.platform),1)]),E[4]||(E[4]=g("p",null,"|",-1)),E[5]||(E[5]=g("div",{class:"stock"},[g("h3",null,"En stock")],-1))]),g("h3",S5,ae(r.value.price),1)]),g("div",C5,[g("button",{class:en(["favorite",{"in-wishlist":l.value}]),onClick:c},[g("i",{class:en(["bi",l.value?"bi-heart-fill":"bi-heart"])},null,2),g("span",null,ae(l.value?"Dans la wishlist":"Ajouter aux favoris"),1)],2),g("button",{class:"cart",onClick:d},E[6]||(E[6]=[g("h3",null,"Ajouter au panier",-1),Xe(),g("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"},[Xe("!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--> "),g("path",{d:"M0 24C0 10.7 10.7 0 24 0L69.5 0c22 0 41.5 12.8 50.6 32l411 0c26.3 0 45.5 25 38.6 50.4l-41 152.3c-8.5 31.4-37 53.3-69.5 53.3l-288.5 0 5.4 28.5c2.2 11.3 12.1 19.5 23.6 19.5L488 336c13.3 0 24 10.7 24 24s-10.7 24-24 24l-288.3 0c-34.6 0-64.3-24.6-70.7-58.5L77.4 54.5c-.7-3.8-4-6.5-7.9-6.5L24 48C10.7 48 0 37.3 0 24zM128 464a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm336-48a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"})],-1)]))])])])],4),g("div",R5,[E[7]||(E[7]=g("h3",null,"Description",-1)),Xe(" "+ae(r.value.description),1)])])),pe(Z9,{tags:r.value.tags,currentGameId:r.value.id},null,8,["tags","currentGameId"])])):(G(),Y("div",P5,E[8]||(E[8]=[g("p",null,"Chargement du jeu...",-1)])))}},k5=Wt(O5,[["__scopeId","data-v-5d29e58c"]]),x5={__name:"GameDetailPage",setup(t){return(e,n)=>(G(),Y(xe,null,[pe(ai),g("div",null,[pe(k5)]),pe(dl)],64))}},D5={};function N5(t,e){const n=jn("router-link");return G(),Y("div",null,[e[1]||(e[1]=g("h1",null,"404 - Page introuvable",-1)),e[2]||(e[2]=g("p",null,"Cette page n'existe pas.",-1)),pe(n,{to:"/"},{default:Je(()=>e[0]||(e[0]=[Xe("Retour à l'accueil")])),_:1})])}const L5=Wt(D5,[["render",N5]]),V5={class:"container-fluid py-2 preco",id:"main-content"},M5={id:"filter"},$5={class:"price"},F5={id:"precoIn"},U5={class:"game-card"},j5=["href"],B5=["src","alt"],H5={class:"game-text"},q5={class:"titre"},W5={class:"prix"},z5={class:"dateSortie"},K5={key:0,class:"text-center mt-2"},G5={__name:"Search",setup(t){const e=Ae([]),n=Ae([]),s=Ae(""),i=Ae(""),r=Ae(null),o=Ae(null),l=async()=>{const d=ri(Nt,"games"),h=jr(d,al("name"));try{const p=await Bi(h);e.value=[],p.forEach(_=>{const E=_.data();e.value.push({id:_.id,titre:E.name,link:E.link,image:E.image,plateforme:E.plateforme,price:`${E.price}€`,date:E.dateSortie.toDate().toLocaleDateString("fr-FR"),tag:E.tag||[]})}),c()}catch(p){console.error("Erreur lors de la récupération des jeux :",p)}};function c(){let d=e.value;cn.value&&(d=d.filter(h=>h.titre.toLowerCase().includes(cn.value.toLowerCase()))),s.value&&(d=d.filter(h=>h.plateforme.includes(s.value))),i.value&&(d=d.filter(h=>h.tag.includes(i.value))),r.value!==null&&r.value!==""&&(d=d.filter(h=>parseFloat(h.price.replace("€",""))>=r.value)),o.value!==null&&o.value!==""&&(d=d.filter(h=>parseFloat(h.price.replace("€",""))<=o.value)),n.value=d}return rs([cn,s,i],c),Un(()=>{l()}),(d,h)=>(G(),Y("div",V5,[g("div",null,[h[10]||(h[10]=g("h1",{class:"mt-3 mb-5"},"Recherche",-1)),g("form",M5,[yt(g("select",{"onUpdate:modelValue":h[0]||(h[0]=p=>s.value=p),onChange:c,class:"form-select"},h[4]||(h[4]=[Th('<option value="" data-v-6fd9a345>Systèmes</option><option value="Steam" data-v-6fd9a345>Steam</option><option value="Switch" data-v-6fd9a345>Nintendo Switch</option><option value="Playstation" data-v-6fd9a345>PlayStation</option><option value="Xbox" data-v-6fd9a345>Xbox Series</option>',5)]),544),[[Cr,s.value]]),yt(g("select",{"onUpdate:modelValue":h[1]||(h[1]=p=>i.value=p),onChange:c,class:"form-select"},h[5]||(h[5]=[Th('<option value="" data-v-6fd9a345>Genres</option><option value="Action" data-v-6fd9a345>Action</option><option value="Aventure" data-v-6fd9a345>Aventure</option><option value="Histoire" data-v-6fd9a345>Histoire</option><option value="Horreur" data-v-6fd9a345>Horreur</option><option value="Indies" data-v-6fd9a345>Indies</option><option value="Infiltration" data-v-6fd9a345>Infiltration</option><option value="Multijoueur" data-v-6fd9a345>Multijoueur</option><option value="RPG" data-v-6fd9a345>RPG</option><option value="Difficulté" data-v-6fd9a345>Difficulté</option><option value="FPS" data-v-6fd9a345>FPS</option><option value="Roguelite" data-v-6fd9a345>Roguelite</option><option value="Sport" data-v-6fd9a345>Sport</option><option value="Anime" data-v-6fd9a345>Anime</option><option value="Gestion" data-v-6fd9a345>Gestion</option><option value="Stratégie" data-v-6fd9a345>Stratégie</option><option value="Course" data-v-6fd9a345>Course</option><option value="Simulation" data-v-6fd9a345>Simulation</option>',18)]),544),[[Cr,i.value]]),g("div",$5,[h[6]||(h[6]=g("span",null,"Entre",-1)),yt(g("input",{type:"number","onUpdate:modelValue":h[2]||(h[2]=p=>r.value=p),placeholder:"Prix min",onInput:c,class:"form-control"},null,544),[[Gt,r.value]]),h[7]||(h[7]=g("span",null,"à",-1)),yt(g("input",{type:"number","onUpdate:modelValue":h[3]||(h[3]=p=>o.value=p),placeholder:"Prix max",onInput:c,class:"form-control"},null,544),[[Gt,o.value]]),h[8]||(h[8]=g("span",null,"€",-1))])]),g("ul",F5,[(G(!0),Y(xe,null,wt(n.value,p=>(G(),Y("li",{key:p.id},[g("div",U5,[g("a",{href:p.link},[g("img",{src:`/assets/img/preview/${p.image}`,alt:p.titre},null,8,B5)],8,j5),g("div",H5,[g("h3",q5,ae(p.titre),1),g("h3",W5,ae(p.price),1)]),g("p",z5,ae(p.date),1)])]))),128))]),n.value.length===0?(G(),Y("div",K5,h[9]||(h[9]=[g("h4",null,"Aucun jeu trouvé pour cette recherche.",-1)]))):un("",!0)])]))}},Q5=Wt(G5,[["__scopeId","data-v-6fd9a345"]]),Y5={__name:"Recherche",setup(t){return(e,n)=>(G(),Y(xe,null,[pe(ai),g("div",null,[pe(Q5)]),pe(dl)],64))}},X5={class:"settings-page-wrapper"},J5={class:"container py-5"},Z5={class:"row justify-content-center"},ej={class:"col-lg-8 col-md-10"},tj={key:0,class:"card"},nj={key:0,class:"card-body"},sj={key:0,class:"alert alert-success"},ij={key:1,class:"alert alert-warning"},rj={class:"mb-3 text-start"},oj=["value"],aj={class:"row"},lj={class:"col-md-6 mb-3 text-start"},cj={class:"col-md-6 mb-3 text-start"},uj={class:"mb-3 text-start"},hj={class:"mb-3 text-start"},dj={class:"row"},fj={class:"col-md-7 mb-3 text-start"},pj={class:"col-md-5 mb-3 text-start"},mj={__name:"Parametres",setup(t){const e=$c(),n=ei(),s=Ae({firstname:"",username:"",billingAddress:{street:"",city:"",postalCode:"",country:""}}),i=Ae(""),r=Ae("");QC(()=>{var d,h,p,_;n.userData&&(s.value.firstname=n.userData.firstname||"",s.value.username=n.userData.username||"",s.value.billingAddress={street:((d=n.userData.billingAddress)==null?void 0:d.street)||"",city:((h=n.userData.billingAddress)==null?void 0:h.city)||"",postalCode:((p=n.userData.billingAddress)==null?void 0:p.postalCode)||"",country:((_=n.userData.billingAddress)==null?void 0:_.country)||""})});async function o(){i.value="",r.value="";try{const d={...s.value,displayName:`${s.value.firstname} ${s.value.username}`};await n.updateUserProfile(d),i.value="Vos informations ont été mises à jour avec succès !"}catch(d){r.value="Une erreur est survenue lors de la mise à jour.",console.error(d)}}function l(){e.back()}async function c(){if(r.value="",!confirm("Êtes-vous certain de vouloir supprimer votre compte ?"))return;const d=prompt("Veuillez entrer votre mot de passe pour confirmer :");if(d)try{await F3(d),alert("Compte supprimé."),e.push("/")}catch(h){r.value="Erreur lors de la suppression : "+h.message}}return(d,h)=>(G(),Y("div",X5,[g("div",J5,[g("div",Z5,[g("div",ej,[Ne(n).isLoading?un("",!0):(G(),Y("div",tj,[h[21]||(h[21]=g("div",{class:"card-header"},[g("h1",null,"Paramètres du compte")],-1)),Ne(n).isLoggedIn?(G(),Y("div",nj,[i.value?(G(),Y("div",sj,ae(i.value),1)):un("",!0),r.value?(G(),Y("div",ij,ae(r.value),1)):un("",!0),g("form",{onSubmit:_r(o,["prevent"])},[h[14]||(h[14]=g("h3",{class:"mb-3 mt-2 text-start"},"Informations Personnelles",-1)),g("div",rj,[h[6]||(h[6]=g("label",{for:"email",class:"form-label"},"Adresse e-mail",-1)),g("input",{type:"email",id:"email",class:"form-control",value:Ne(n).user.email,disabled:""},null,8,oj),h[7]||(h[7]=g("div",{class:"form-text"},"L'adresse e-mail ne peut pas être modifiée.",-1))]),g("div",aj,[g("div",lj,[h[8]||(h[8]=g("label",{for:"firstname",class:"form-label"},"Prénom",-1)),yt(g("input",{type:"text",id:"firstname",class:"form-control","onUpdate:modelValue":h[0]||(h[0]=p=>s.value.firstname=p)},null,512),[[Gt,s.value.firstname]])]),g("div",cj,[h[9]||(h[9]=g("label",{for:"username",class:"form-label"},"Nom",-1)),yt(g("input",{type:"text",id:"username",class:"form-control","onUpdate:modelValue":h[1]||(h[1]=p=>s.value.username=p)},null,512),[[Gt,s.value.username]])])]),h[15]||(h[15]=g("hr",{class:"my-4"},null,-1)),h[16]||(h[16]=g("h3",{class:"mb-3 text-start"},"Adresse de Facturation",-1)),g("div",uj,[h[10]||(h[10]=g("label",{for:"country",class:"form-label"},"Pays",-1)),yt(g("input",{type:"text",id:"country",class:"form-control","onUpdate:modelValue":h[2]||(h[2]=p=>s.value.billingAddress.country=p)},null,512),[[Gt,s.value.billingAddress.country]])]),g("div",hj,[h[11]||(h[11]=g("label",{for:"street",class:"form-label"},"Adresse (rue, etc.)",-1)),yt(g("input",{type:"text",id:"street",class:"form-control",placeholder:"123 rue de la République","onUpdate:modelValue":h[3]||(h[3]=p=>s.value.billingAddress.street=p)},null,512),[[Gt,s.value.billingAddress.street]])]),g("div",dj,[g("div",fj,[h[12]||(h[12]=g("label",{for:"city",class:"form-label"},"Ville",-1)),yt(g("input",{type:"text",id:"city",class:"form-control","onUpdate:modelValue":h[4]||(h[4]=p=>s.value.billingAddress.city=p)},null,512),[[Gt,s.value.billingAddress.city]])]),g("div",pj,[h[13]||(h[13]=g("label",{for:"postalCode",class:"form-label"},"Code Postal",-1)),yt(g("input",{type:"text",id:"postalCode",class:"form-control","onUpdate:modelValue":h[5]||(h[5]=p=>s.value.billingAddress.postalCode=p)},null,512),[[Gt,s.value.billingAddress.postalCode]])])]),h[17]||(h[17]=g("button",{type:"submit",class:"btn btn-primary w-100 mt-3"},"Sauvegarder les modifications",-1))],32),h[20]||(h[20]=g("hr",{class:"my-4"},null,-1)),g("div",{class:"alert alert-danger"},[h[18]||(h[18]=g("h4",{class:"alert-heading"},"Zone de Danger",-1)),h[19]||(h[19]=g("p",null,"La suppression de votre compte est une action permanente et irréversible.",-1)),g("button",{onClick:c,class:"btn btn-danger"},"Supprimer mon compte")]),g("div",{class:"mt-4 text-center"},[g("button",{onClick:l,class:"btn btn-secondary"},"Retour")])])):un("",!0)]))])])])]))}},gj=Wt(mj,[["__scopeId","data-v-3c13f7a8"]]),_j={class:"container py-5"},vj={class:"mb-4"},yj={class:"d-flex justify-content-end mb-4"},Ej={key:0,class:"text-center"},bj={key:1,class:"text-center p-5 empty-wishlist-card"},wj={key:2,class:"row g-4"},Tj={class:"card h-100 game-card"},Aj=["src","alt"],Ij={class:"card-body d-flex flex-column"},Sj={class:"card-title"},Cj={class:"card-text mt-auto mb-2 price"},Rj=["onClick"],Pj={__name:"Wishlist",setup(t){const e=Xc(),n=Ae([]),s=Ae(!1),i=Ae("default"),r=c=>{const d=c.data(),h=d.dateSortie.toDate();return{id:c.id,titre:d.name,link:d.link,image:d.image,hero:d.hero,price:`${d.price.toFixed(2)}`,numericPrice:d.price,date:h.toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}),dateObject:h,description:d.description,tags:d.tag,platform:d.plateforme}},o=Ot(()=>{const c=[...n.value];switch(i.value){case"price-asc":return c.sort((d,h)=>d.numericPrice-h.numericPrice);case"price-desc":return c.sort((d,h)=>h.numericPrice-d.numericPrice);case"date-desc":return c.sort((d,h)=>h.dateObject-d.dateObject);default:return c}}),l=async c=>{if(c.length===0){n.value=[];return}s.value=!0;const d=ri(Nt,"games"),h=jr(d,Vi("__name__","in",c)),p=await Bi(h);n.value=p.docs.map(_=>r(_)),s.value=!1};return Un(async()=>{await e.fetchWishlist(),l(e.gameIds)}),rs(()=>e.gameIds,c=>{l(c)}),(c,d)=>{const h=jn("router-link");return G(),Y(xe,null,[pe(ai),g("main",null,[g("div",_j,[g("h1",vj,"Ma Wishlist ("+ae(o.value.length)+" jeux)",1),g("div",yj,[yt(g("select",{class:"form-select",style:{"max-width":"200px"},"onUpdate:modelValue":d[0]||(d[0]=p=>i.value=p)},d[1]||(d[1]=[g("option",{value:"default"},"Trier par...",-1),g("option",{value:"price-asc"},"Prix : le moins cher",-1),g("option",{value:"price-desc"},"Prix : le plus cher",-1),g("option",{value:"date-desc"},"Nouveautés",-1)]),512),[[Cr,i.value]])]),s.value?(G(),Y("div",Ej,d[2]||(d[2]=[g("div",{class:"spinner-border",role:"status"},[g("span",{class:"visually-hidden"},"Loading...")],-1)]))):n.value.length?(G(),Y("div",wj,[(G(!0),Y(xe,null,wt(o.value,p=>(G(),Y("div",{key:p.id,class:"col-6 col-md-4 col-lg-3"},[g("div",Tj,[g("img",{src:p.hero,class:"card-img-top",alt:p.titre},null,8,Aj),g("div",Ij,[g("h5",Sj,ae(p.titre),1),g("p",Cj,ae(p.price)+" €",1),g("button",{onClick:_=>Ne(e).removeFromWishlist(p.id),class:"btn btn-danger btn-sm"},d[6]||(d[6]=[g("i",{class:"bi bi-trash-fill"},null,-1),Xe(" Retirer ")]),8,Rj)])])]))),128))])):(G(),Y("div",bj,[d[4]||(d[4]=g("h3",null,"Votre wishlist est vide",-1)),d[5]||(d[5]=g("p",null,"Parcourez nos jeux et cliquez sur le cœur pour les ajouter !",-1)),pe(h,{to:"/",class:"btn btn-primary"},{default:Je(()=>d[3]||(d[3]=[Xe("Explorer les jeux")])),_:1})]))])])],64)}}},Oj=Wt(Pj,[["__scopeId","data-v-124a09bc"]]),kj={class:"validation-page-wrapper"},xj={class:"container py-5"},Dj={class:"row justify-content-center"},Nj={class:"col-md-8 col-lg-6"},Lj={key:0,class:"text-center"},Vj={key:1,class:"card validation-card text-center shadow-lg"},Mj={class:"card-body p-4 p-md-5"},$j={class:"card-title mt-3"},Fj={class:"order-recap my-4"},Uj={class:"order-number"},jj={class:"items-summary mt-4 text-start"},Bj={class:"list-group list-group-flush"},Hj=["src","alt"],qj={class:"fw-bold"},Wj={class:"list-group-item d-flex justify-content-between align-items-center fw-bold total-price mt-2"},zj={class:"mt-5 d-grid gap-2 d-sm-flex justify-content-sm-center"},Kj={key:2,class:"alert alert-danger"},Gj={__name:"Validation",setup(t){const e=vm(),n=ei(),s=Ae(null),i=Ae(!0),r=e.params.orderId;return Un(async()=>{if(r)try{const o=Yn(Nt,"orders",r),l=await xo(o);l.exists()?s.value=l.data():console.error("Aucune commande trouvée avec l'ID:",r)}catch(o){console.error("Erreur lors de la récupération de la commande:",o)}finally{i.value=!1}else i.value=!1}),(o,l)=>{const c=jn("router-link");return G(),Y(xe,null,[pe(ai),g("div",kj,[g("div",xj,[g("div",Dj,[g("div",Nj,[i.value?(G(),Y("div",Lj,l[0]||(l[0]=[g("div",{class:"spinner-border",role:"status"},[g("span",{class:"visually-hidden"},"Chargement...")],-1)]))):s.value?(G(),Y("div",Vj,[g("div",Mj,[l[7]||(l[7]=g("i",{class:"bi bi-check-circle-fill success-icon"},null,-1)),g("h1",$j,"Merci, "+ae(Ne(n).currentUsername)+" !",1),l[8]||(l[8]=g("p",{class:"lead text-muted"},"Votre commande a été validée avec succès.",-1)),g("div",Fj,[l[2]||(l[2]=g("p",null,"Un e-mail de confirmation vous a été envoyé.",-1)),g("p",Uj,[l[1]||(l[1]=Xe(" Commande n° ")),g("strong",null,ae(Ne(r)),1)])]),l[9]||(l[9]=g("hr",null,null,-1)),g("div",jj,[l[4]||(l[4]=g("h5",{class:"mb-3"},"Vos articles :",-1)),g("ul",Bj,[(G(!0),Y(xe,null,wt(s.value.items,d=>(G(),Y("li",{key:d.id,class:"list-group-item d-flex justify-content-between align-items-center"},[g("span",null,[g("img",{src:d.image,alt:d.name,class:"item-image me-2"},null,8,Hj),Xe(" "+ae(d.name)+" (x"+ae(d.quantity)+") ",1)]),g("span",qj,ae((d.price*d.quantity).toFixed(2))+" €",1)]))),128))]),g("div",Wj,[l[3]||(l[3]=g("span",null,"Total payé",-1)),g("span",null,ae(s.value.totalPrice)+" €",1)])]),g("div",zj,[pe(c,{to:"/mes-achats",class:"btn btn-primary btn-lg px-4 gap-3"},{default:Je(()=>l[5]||(l[5]=[Xe("Voir mes achats")])),_:1}),pe(c,{to:"/",class:"btn btn-outline-secondary btn-lg px-4"},{default:Je(()=>l[6]||(l[6]=[Xe("Retour à l'accueil")])),_:1})])])])):(G(),Y("div",Kj," Désolé, cette commande n'a pas pu être trouvée. "))])])])])],64)}}},Qj=Wt(Gj,[["__scopeId","data-v-e004e359"]]),Yj={class:"purchases-wrapper"},Xj={class:"container py-5"},Jj={key:0,class:"text-center mt-5"},Zj={key:1,class:"text-center empty-purchases-message"},eB={key:2,class:"orders-list"},tB={class:"card-header d-flex justify-content-between align-items-center"},nB={class:"order-id"},sB={class:"order-date"},iB={class:"card-body"},rB={class:"list-group list-group-flush"},oB=["src","alt"],aB={class:"flex-grow-1"},lB={class:"item-name"},cB={class:"item-quantity mb-0"},uB={class:"item-price text-end"},hB={class:"card-footer text-end"},dB={__name:"MesAchats",setup(t){const e=ei(),n=Ae([]),s=Ae(!0);Un(async()=>{if(!e.isLoggedIn){s.value=!1;return}try{const r=ri(Nt,"orders"),o=jr(r,Vi("userId","==",e.user.uid),al("createdAt","desc"));(await Bi(o)).forEach(c=>{n.value.push({id:c.id,...c.data()})})}catch(r){console.error("Erreur lors de la récupération des commandes:",r)}finally{s.value=!1}});function i(r){return!r||!r.toDate?"Date inconnue":r.toDate().toLocaleDateString("fr-FR",{day:"2-digit",month:"long",year:"numeric"})}return(r,o)=>{const l=jn("router-link");return G(),Y(xe,null,[pe(ai),g("div",Yj,[g("div",Xj,[o[6]||(o[6]=g("h1",{class:"mb-4"},"Mes Achats",-1)),s.value?(G(),Y("div",Jj,o[0]||(o[0]=[g("div",{class:"spinner-border",role:"status"},[g("span",{class:"visually-hidden"},"Chargement...")],-1)]))):n.value.length===0?(G(),Y("div",Zj,[o[2]||(o[2]=g("i",{class:"bi bi-cart-x-fill empty-icon"},null,-1)),o[3]||(o[3]=g("h3",{class:"mt-3"},"Aucun achat pour le moment",-1)),o[4]||(o[4]=g("p",null,"Il est temps de commencer votre collection !",-1)),pe(l,{to:"/",class:"btn btn-primary mt-3"},{default:Je(()=>o[1]||(o[1]=[Xe("Explorer le catalogue")])),_:1})])):(G(),Y("div",eB,[(G(!0),Y(xe,null,wt(n.value,c=>(G(),Y("div",{key:c.id,class:"card order-card mb-4 shadow-sm"},[g("div",tB,[g("div",null,[o[5]||(o[5]=g("span",{class:"order-id-label"},"Commande",-1)),g("strong",nB,ae(c.id),1)]),g("span",sB,ae(i(c.createdAt)),1)]),g("div",iB,[g("ul",rB,[(G(!0),Y(xe,null,wt(c.items,d=>(G(),Y("li",{key:d.id,class:"list-group-item item-row d-flex align-items-center"},[g("img",{src:d.image,alt:d.name,class:"item-image me-3"},null,8,oB),g("div",aB,[g("h5",lB,ae(d.name),1),g("p",cB,"Quantité : "+ae(d.quantity),1)]),g("div",uB,[g("strong",null,ae((d.price*d.quantity).toFixed(2))+" €",1)])]))),128))])]),g("div",hB,[g("strong",null,"Total : "+ae(c.totalPrice)+" €",1)])]))),128))]))])])],64)}}},fB=Wt(dB,[["__scopeId","data-v-32f20c87"]]),pB=oP({history:vv("/"),routes:[{path:"/",name:"accueil",component:f6},{path:"/nouveautes",name:"nouveautes",component:A6},{path:"/precommandes",name:"precommandes",component:L6},{path:"/prochaines-sorties",name:"prochaines-sorties",component:DU},{path:"/inscription",name:"inscription",component:GU},{path:"/connexion",name:"connexion",component:i9},{path:"/parametres",name:"Parametres",component:gj},{path:"/panier",name:"panier",component:H9},{path:"/validation/:orderId",name:"validation",component:Qj},{path:"/mes-achats",name:"mesAchats",component:fB},{path:"/game/:id",name:"gameDetailPage",component:x5},{path:"/:pathMatch(.*)*",name:"not-found",component:L5},{path:"/recherche",name:"recherche",component:Y5},{path:"/wishlist",name:"wishlist",component:Oj}],history:vv("/"),linkActiveClass:"active",scrollBehavior(t,e,n){return{top:0}}}),Fg=G1(rR),mB=X1();Fg.use(mB);Fg.use(pB);const gB=ei();gB.initAuthListener();const _B=Yc();_B.init();Fg.mount("#app");
